/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
'use strict';Object.defineProperty(exports,"__esModule",{value:!0});var vue=require("vue");function ascending(aa,ba){return aa<ba?-1:aa>ba?1:aa>=ba?0:NaN}
function bisector(aa){function ba(aa,ba,ca,ha){null==ca&&(ca=0);null==ha&&(ha=aa.length);for(;ca<ha;){let ea=ca+ha>>>1;0>da(aa[ea],ba)?ca=ea+1:ha=ea}return ca}let ca=aa,da=aa;1===aa.length&&(ca=(ba,ca)=>aa(ba)-ca,da=ascendingComparator(aa));return{left:ba,center:function(aa,da,ia,ha){null==ia&&(ia=0);null==ha&&(ha=aa.length);ha=ba(aa,da,ia,ha-1);return ha>ia&&ca(aa[ha-1],da)>-ca(aa[ha],da)?ha-1:ha},right:function(aa,ba,ca,ha){null==ca&&(ca=0);null==ha&&(ha=aa.length);for(;ca<ha;){let ea=ca+ha>>>1;
0<da(aa[ea],ba)?ha=ea:ca=ea+1}return ca}}}function ascendingComparator(aa){return(ba,ca)=>ascending(aa(ba),ca)}function number(aa){return null===aa?NaN:+aa}let ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectCenter=bisector(number).center;
function extent(aa,ba){let ca,da;if(void 0===ba)for(var ea of aa)null!=ea&&(void 0===ca?ea>=ea&&(ca=da=ea):(ca>ea&&(ca=ea),da<ea&&(da=ea)));else{ea=-1;for(let fa of aa)null!=(fa=ba(fa,++ea,aa))&&(void 0===ca?fa>=fa&&(ca=da=fa):(ca>fa&&(ca=fa),da<fa&&(da=fa)))}return[ca,da]}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);
function ticks(aa,ba,ca){var da,ea=-1,fa;ba=+ba;aa=+aa;ca=+ca;if(aa===ba&&0<ca)return[aa];if(da=ba<aa){var ia=aa;aa=ba;ba=ia}if(0===(fa=tickIncrement(aa,ba,ca))||!isFinite(fa))return[];if(0<fa)for(aa=Math.ceil(aa/fa),ba=Math.floor(ba/fa),ba=Array(ia=Math.ceil(ba-aa+1));++ea<ia;)ba[ea]=(aa+ea)*fa;else for(fa=-fa,aa=Math.ceil(aa*fa),ba=Math.floor(ba*fa),ba=Array(ia=Math.ceil(ba-aa+1));++ea<ia;)ba[ea]=(aa+ea)/fa;da&&ba.reverse();return ba}
function tickIncrement(aa,ba,ca){ba=(ba-aa)/Math.max(0,ca);aa=Math.floor(Math.log(ba)/Math.LN10);ba/=Math.pow(10,aa);return 0<=aa?(ba>=e10?10:ba>=e5?5:ba>=e2?2:1)*Math.pow(10,aa):-Math.pow(10,-aa)/(ba>=e10?10:ba>=e5?5:ba>=e2?2:1)}function tickStep(aa,ba,ca){var da=Math.abs(ba-aa)/Math.max(0,ca);ca=Math.pow(10,Math.floor(Math.log(da)/Math.LN10));da/=ca;da>=e10?ca*=10:da>=e5?ca*=5:da>=e2&&(ca*=2);return ba<aa?-ca:ca}
function max(aa,ba){let ca;if(void 0===ba)for(var da of aa)null!=da&&(ca<da||void 0===ca&&da>=da)&&(ca=da);else{da=-1;for(let ea of aa)null!=(ea=ba(ea,++da,aa))&&(ca<ea||void 0===ca&&ea>=ea)&&(ca=ea)}return ca}function min(aa,ba){let ca;if(void 0===ba)for(var da of aa)null!=da&&(ca>da||void 0===ca&&da>=da)&&(ca=da);else{da=-1;for(let ea of aa)null!=(ea=ba(ea,++da,aa))&&(ca>ea||void 0===ca&&ea>=ea)&&(ca=ea)}return ca}
function range(aa,ba,ca){aa=+aa;ba=+ba;ca=2>(ea=arguments.length)?(ba=aa,aa=0,1):3>ea?1:+ca;for(var da=-1,ea=Math.max(0,Math.ceil((ba-aa)/ca))|0,fa=Array(ea);++da<ea;)fa[da]=aa+da*ca;return fa}var slice=Array.prototype.slice;function identity(aa){return aa}var top=1,right=2,bottom=3,left=4,epsilon=1E-6;function translateX(aa){return"translate("+(aa+.5)+",0)"}function translateY(aa){return"translate(0,"+(aa+.5)+")"}function number$1(aa){return ba=>+aa(ba)}
function center(aa){var ba=Math.max(0,aa.bandwidth()-1)/2;aa.round()&&(ba=Math.round(ba));return function(ca){return+aa(ca)+ba}}function entering(){return!this.__axis}
function axis(aa,ba){function ca(ca){var na=null==ea?ba.ticks?ba.ticks.apply(ba,da):ba.domain():ea,qa=null==fa?ba.tickFormat?ba.tickFormat.apply(ba,da):identity:fa,ra=Math.max(ia,0)+ja,ta=ba.range(),oa=+ta[0]+.5;ta=+ta[ta.length-1]+.5;var sa=(ba.bandwidth?center:number$1)(ba.copy()),wa=ca.selection?ca.selection():ca,Ba=wa.selectAll(".domain").data([null]);na=wa.selectAll(".tick").data(na,ba).order();var ua=na.exit(),va=na.enter().append("g").attr("class","tick"),ya=na.select("line"),xa=na.select("text");
Ba=Ba.merge(Ba.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor"));na=na.merge(va);ya=ya.merge(va.append("line").attr("stroke","currentColor").attr(la+"2",ka*ia));xa=xa.merge(va.append("text").attr("fill","currentColor").attr(la,ka*ra).attr("dy",aa===top?"0em":aa===bottom?"0.71em":"0.32em"));ca!==wa&&(Ba=Ba.transition(ca),na=na.transition(ca),ya=ya.transition(ca),xa=xa.transition(ca),ua=ua.transition(ca).attr("opacity",epsilon).attr("transform",function(aa){return isFinite(aa=
sa(aa))?ma(aa):this.getAttribute("transform")}),va.attr("opacity",epsilon).attr("transform",function(aa){var ba=this.parentNode.__axis;return ma(ba&&isFinite(ba=ba(aa))?ba:sa(aa))}));ua.remove();Ba.attr("d",aa===left||aa==right?ha?"M"+ka*ha+","+oa+"H0.5V"+ta+"H"+ka*ha:"M0.5,"+oa+"V"+ta:ha?"M"+oa+","+ka*ha+"V0.5H"+ta+"V"+ka*ha:"M"+oa+",0.5H"+ta);na.attr("opacity",1).attr("transform",function(aa){return ma(sa(aa))});ya.attr(la+"2",ka*ia);xa.attr(la,ka*ra).text(qa);wa.filter(entering).attr("fill","none").attr("font-size",
10).attr("font-family","sans-serif").attr("text-anchor",aa===right?"start":aa===left?"end":"middle");wa.each(function(){this.__axis=sa})}var da=[],ea=null,fa=null,ia=6,ha=6,ja=3,ka=aa===top||aa===left?-1:1,la=aa===left||aa===right?"x":"y",ma=aa===top||aa===bottom?translateX:translateY;ca.scale=function(aa){return arguments.length?(ba=aa,ca):ba};ca.ticks=function(){return da=slice.call(arguments),ca};ca.tickArguments=function(aa){return arguments.length?(da=null==aa?[]:slice.call(aa),ca):da.slice()};
ca.tickValues=function(aa){return arguments.length?(ea=null==aa?null:slice.call(aa),ca):ea&&ea.slice()};ca.tickFormat=function(aa){return arguments.length?(fa=aa,ca):fa};ca.tickSize=function(aa){return arguments.length?(ia=ha=+aa,ca):ia};ca.tickSizeInner=function(aa){return arguments.length?(ia=+aa,ca):ia};ca.tickSizeOuter=function(aa){return arguments.length?(ha=+aa,ca):ha};ca.tickPadding=function(aa){return arguments.length?(ja=+aa,ca):ja};return ca}
function axisBottom(aa){return axis(bottom,aa)}function axisLeft(aa){return axis(left,aa)}var noop={value:()=>{}};function dispatch(){for(var aa=0,ba=arguments.length,ca={},da;aa<ba;++aa){if(!(da=arguments[aa]+"")||da in ca||/[\s.]/.test(da))throw Error("illegal type: "+da);ca[da]=[]}return new Dispatch(ca)}function Dispatch(aa){this._=aa}
function parseTypenames(aa,ba){return aa.trim().split(/^|\s+/).map(function(aa){var ca="",ea=aa.indexOf(".");0<=ea&&(ca=aa.slice(ea+1),aa=aa.slice(0,ea));if(aa&&!ba.hasOwnProperty(aa))throw Error("unknown type: "+aa);return{type:aa,name:ca}})}
Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(aa,ba){var ca=this._,da=parseTypenames(aa+"",ca),ea,fa=-1,ia=da.length;if(2>arguments.length)for(;++fa<ia;){if((ea=(aa=da[fa]).type)&&(ea=get(ca[ea],aa.name)))return ea}else{if(null!=ba&&"function"!==typeof ba)throw Error("invalid callback: "+ba);for(;++fa<ia;)if(ea=(aa=da[fa]).type)ca[ea]=set(ca[ea],aa.name,ba);else if(null==ba)for(ea in ca)ca[ea]=set(ca[ea],aa.name,null);return this}},copy:function(){var aa={},ba=this._,ca;
for(ca in ba)aa[ca]=ba[ca].slice();return new Dispatch(aa)},call:function(aa,ba){if(0<(ea=arguments.length-2))for(var ca=Array(ea),da=0,ea,fa;da<ea;++da)ca[da]=arguments[da+2];if(!this._.hasOwnProperty(aa))throw Error("unknown type: "+aa);fa=this._[aa];da=0;for(ea=fa.length;da<ea;++da)fa[da].value.apply(ba,ca)},apply:function(aa,ba,ca){if(!this._.hasOwnProperty(aa))throw Error("unknown type: "+aa);aa=this._[aa];for(var da=0,ea=aa.length;da<ea;++da)aa[da].value.apply(ba,ca)}};
function get(aa,ba){for(var ca=0,da=aa.length,ea;ca<da;++ca)if((ea=aa[ca]).name===ba)return ea.value}function set(aa,ba,ca){for(var da=0,ea=aa.length;da<ea;++da)if(aa[da].name===ba){aa[da]=noop;aa=aa.slice(0,da).concat(aa.slice(da+1));break}null!=ca&&aa.push({name:ba,value:ca});return aa}var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
function namespace(aa){var ba=aa+="",ca=ba.indexOf(":");0<=ca&&"xmlns"!==(ba=aa.slice(0,ca))&&(aa=aa.slice(ca+1));return namespaces.hasOwnProperty(ba)?{space:namespaces[ba],local:aa}:aa}function creatorInherit(aa){return function(){var ba=this.ownerDocument,ca=this.namespaceURI;return ca===xhtml&&ba.documentElement.namespaceURI===xhtml?ba.createElement(aa):ba.createElementNS(ca,aa)}}function creatorFixed(aa){return function(){return this.ownerDocument.createElementNS(aa.space,aa.local)}}
function creator(aa){aa=namespace(aa);return(aa.local?creatorFixed:creatorInherit)(aa)}function none(){}function selector(aa){return null==aa?none:function(){return this.querySelector(aa)}}
function selection_select(aa){"function"!==typeof aa&&(aa=selector(aa));for(var ba=this._groups,ca=ba.length,da=Array(ca),ea=0;ea<ca;++ea)for(var fa=ba[ea],ia=fa.length,ha=da[ea]=Array(ia),ja,ka,la=0;la<ia;++la)(ja=fa[la])&&(ka=aa.call(ja,ja.__data__,la,fa))&&("__data__"in ja&&(ka.__data__=ja.__data__),ha[la]=ka);return new Selection(da,this._parents)}function array(aa){return"object"===typeof aa&&"length"in aa?aa:Array.from(aa)}function empty(){return[]}
function selectorAll(aa){return null==aa?empty:function(){return this.querySelectorAll(aa)}}function arrayAll(aa){return function(){var ba=aa.apply(this,arguments);return null==ba?[]:array(ba)}}function selection_selectAll(aa){aa="function"===typeof aa?arrayAll(aa):selectorAll(aa);for(var ba=this._groups,ca=ba.length,da=[],ea=[],fa=0;fa<ca;++fa)for(var ia=ba[fa],ha=ia.length,ja,ka=0;ka<ha;++ka)if(ja=ia[ka])da.push(aa.call(ja,ja.__data__,ka,ia)),ea.push(ja);return new Selection(da,ea)}
function matcher(aa){return function(){return this.matches(aa)}}function childMatcher(aa){return function(ba){return ba.matches(aa)}}var find=Array.prototype.find;function childFind(aa){return function(){return find.call(this.children,aa)}}function childFirst(){return this.firstElementChild}function selection_selectChild(aa){return this.select(null==aa?childFirst:childFind("function"===typeof aa?aa:childMatcher(aa)))}var filter=Array.prototype.filter;function children(){return this.children}
function childrenFilter(aa){return function(){return filter.call(this.children,aa)}}function selection_selectChildren(aa){return this.selectAll(null==aa?children:childrenFilter("function"===typeof aa?aa:childMatcher(aa)))}
function selection_filter(aa){"function"!==typeof aa&&(aa=matcher(aa));for(var ba=this._groups,ca=ba.length,da=Array(ca),ea=0;ea<ca;++ea)for(var fa=ba[ea],ia=fa.length,ha=da[ea]=[],ja,ka=0;ka<ia;++ka)(ja=fa[ka])&&aa.call(ja,ja.__data__,ka,fa)&&ha.push(ja);return new Selection(da,this._parents)}function sparse(aa){return Array(aa.length)}function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)}
function EnterNode(aa,ba){this.ownerDocument=aa.ownerDocument;this.namespaceURI=aa.namespaceURI;this._next=null;this._parent=aa;this.__data__=ba}EnterNode.prototype={constructor:EnterNode,appendChild:function(aa){return this._parent.insertBefore(aa,this._next)},insertBefore:function(aa,ba){return this._parent.insertBefore(aa,ba)},querySelector:function(aa){return this._parent.querySelector(aa)},querySelectorAll:function(aa){return this._parent.querySelectorAll(aa)}};
function constant(aa){return function(){return aa}}function bindIndex(aa,ba,ca,da,ea,fa){for(var ia=0,ha,ja=ba.length,ka=fa.length;ia<ka;++ia)(ha=ba[ia])?(ha.__data__=fa[ia],da[ia]=ha):ca[ia]=new EnterNode(aa,fa[ia]);for(;ia<ja;++ia)if(ha=ba[ia])ea[ia]=ha}
function bindKey(aa,ba,ca,da,ea,fa,ia){var ha,ja,ka=new Map,la=ba.length,ma=fa.length,na=Array(la),pa;for(ha=0;ha<la;++ha)if(ja=ba[ha])na[ha]=pa=ia.call(ja,ja.__data__,ha,ba)+"",ka.has(pa)?ea[ha]=ja:ka.set(pa,ja);for(ha=0;ha<ma;++ha)pa=ia.call(aa,fa[ha],ha,fa)+"",(ja=ka.get(pa))?(da[ha]=ja,ja.__data__=fa[ha],ka.delete(pa)):ca[ha]=new EnterNode(aa,fa[ha]);for(ha=0;ha<la;++ha)(ja=ba[ha])&&ka.get(na[ha])===ja&&(ea[ha]=ja)}function datum(aa){return aa.__data__}
function selection_data(aa,ba){if(!arguments.length)return Array.from(this,datum);var ca=ba?bindKey:bindIndex,da=this._parents,ea=this._groups;"function"!==typeof aa&&(aa=constant(aa));for(var fa=ea.length,ia=Array(fa),ha=Array(fa),ja=Array(fa),ka=0;ka<fa;++ka){var la=da[ka],ma=ea[ka],na=ma.length,pa=array(aa.call(la,la&&la.__data__,ka,da)),qa=pa.length,ra=ha[ka]=Array(qa),ta=ia[ka]=Array(qa);na=ja[ka]=Array(na);ca(la,ma,ra,ta,na,pa,ba);for(ma=la=0;la<qa;++la)if(pa=ra[la]){for(la>=ma&&(ma=la+1);!(na=
ta[ma])&&++ma<qa;);pa._next=na||null}}ia=new Selection(ia,da);ia._enter=ha;ia._exit=ja;return ia}function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)}function selection_join(aa,ba,ca){var da=this.enter(),ea=this,fa=this.exit();da="function"===typeof aa?aa(da):da.append(aa+"");null!=ba&&(ea=ba(ea));null==ca?fa.remove():ca(fa);return da&&ea?da.merge(ea).order():ea}
function selection_merge(aa){if(!(aa instanceof Selection))throw Error("invalid merge");var ba=this._groups;aa=aa._groups;for(var ca=ba.length,da=Math.min(ca,aa.length),ea=Array(ca),fa=0;fa<da;++fa)for(var ia=ba[fa],ha=aa[fa],ja=ia.length,ka=ea[fa]=Array(ja),la,ma=0;ma<ja;++ma)if(la=ia[ma]||ha[ma])ka[ma]=la;for(;fa<ca;++fa)ea[fa]=ba[fa];return new Selection(ea,this._parents)}
function selection_order(){for(var aa=this._groups,ba=-1,ca=aa.length;++ba<ca;)for(var da=aa[ba],ea=da.length-1,fa=da[ea],ia;0<=--ea;)if(ia=da[ea])fa&&ia.compareDocumentPosition(fa)^4&&fa.parentNode.insertBefore(ia,fa),fa=ia;return this}
function selection_sort(aa){function ba(ba,ca){return ba&&ca?aa(ba.__data__,ca.__data__):!ba-!ca}aa||(aa=ascending$1);for(var ca=this._groups,da=ca.length,ea=Array(da),fa=0;fa<da;++fa){for(var ia=ca[fa],ha=ia.length,ja=ea[fa]=Array(ha),ka,la=0;la<ha;++la)if(ka=ia[la])ja[la]=ka;ja.sort(ba)}return(new Selection(ea,this._parents)).order()}function ascending$1(aa,ba){return aa<ba?-1:aa>ba?1:aa>=ba?0:NaN}
function selection_call(){var aa=arguments[0];arguments[0]=this;aa.apply(null,arguments);return this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var aa=this._groups,ba=0,ca=aa.length;ba<ca;++ba)for(var da=aa[ba],ea=0,fa=da.length;ea<fa;++ea){var ia=da[ea];if(ia)return ia}return null}function selection_size(){let aa=0;for(let ba of this)++aa;return aa}function selection_empty(){return!this.node()}
function selection_each(aa){for(var ba=this._groups,ca=0,da=ba.length;ca<da;++ca)for(var ea=ba[ca],fa=0,ia=ea.length,ha;fa<ia;++fa)(ha=ea[fa])&&aa.call(ha,ha.__data__,fa,ea);return this}function attrRemove(aa){return function(){this.removeAttribute(aa)}}function attrRemoveNS(aa){return function(){this.removeAttributeNS(aa.space,aa.local)}}function attrConstant(aa,ba){return function(){this.setAttribute(aa,ba)}}
function attrConstantNS(aa,ba){return function(){this.setAttributeNS(aa.space,aa.local,ba)}}function attrFunction(aa,ba){return function(){var ca=ba.apply(this,arguments);null==ca?this.removeAttribute(aa):this.setAttribute(aa,ca)}}function attrFunctionNS(aa,ba){return function(){var ca=ba.apply(this,arguments);null==ca?this.removeAttributeNS(aa.space,aa.local):this.setAttributeNS(aa.space,aa.local,ca)}}
function selection_attr(aa,ba){var ca=namespace(aa);if(2>arguments.length){var da=this.node();return ca.local?da.getAttributeNS(ca.space,ca.local):da.getAttribute(ca)}return this.each((null==ba?ca.local?attrRemoveNS:attrRemove:"function"===typeof ba?ca.local?attrFunctionNS:attrFunction:ca.local?attrConstantNS:attrConstant)(ca,ba))}function defaultView(aa){return aa.ownerDocument&&aa.ownerDocument.defaultView||aa.document&&aa||aa.defaultView}
function styleRemove(aa){return function(){this.style.removeProperty(aa)}}function styleConstant(aa,ba,ca){return function(){this.style.setProperty(aa,ba,ca)}}function styleFunction(aa,ba,ca){return function(){var da=ba.apply(this,arguments);null==da?this.style.removeProperty(aa):this.style.setProperty(aa,da,ca)}}
function selection_style(aa,ba,ca){return 1<arguments.length?this.each((null==ba?styleRemove:"function"===typeof ba?styleFunction:styleConstant)(aa,ba,null==ca?"":ca)):styleValue(this.node(),aa)}function styleValue(aa,ba){return aa.style.getPropertyValue(ba)||defaultView(aa).getComputedStyle(aa,null).getPropertyValue(ba)}function propertyRemove(aa){return function(){delete this[aa]}}function propertyConstant(aa,ba){return function(){this[aa]=ba}}
function propertyFunction(aa,ba){return function(){var ca=ba.apply(this,arguments);null==ca?delete this[aa]:this[aa]=ca}}function selection_property(aa,ba){return 1<arguments.length?this.each((null==ba?propertyRemove:"function"===typeof ba?propertyFunction:propertyConstant)(aa,ba)):this.node()[aa]}function classArray(aa){return aa.trim().split(/^|\s+/)}function classList(aa){return aa.classList||new ClassList(aa)}
function ClassList(aa){this._node=aa;this._names=classArray(aa.getAttribute("class")||"")}ClassList.prototype={add:function(aa){0>this._names.indexOf(aa)&&(this._names.push(aa),this._node.setAttribute("class",this._names.join(" ")))},remove:function(aa){aa=this._names.indexOf(aa);0<=aa&&(this._names.splice(aa,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(aa){return 0<=this._names.indexOf(aa)}};
function classedAdd(aa,ba){aa=classList(aa);for(var ca=-1,da=ba.length;++ca<da;)aa.add(ba[ca])}function classedRemove(aa,ba){aa=classList(aa);for(var ca=-1,da=ba.length;++ca<da;)aa.remove(ba[ca])}function classedTrue(aa){return function(){classedAdd(this,aa)}}function classedFalse(aa){return function(){classedRemove(this,aa)}}function classedFunction(aa,ba){return function(){(ba.apply(this,arguments)?classedAdd:classedRemove)(this,aa)}}
function selection_classed(aa,ba){var ca=classArray(aa+"");if(2>arguments.length){for(var da=classList(this.node()),ea=-1,fa=ca.length;++ea<fa;)if(!da.contains(ca[ea]))return!1;return!0}return this.each(("function"===typeof ba?classedFunction:ba?classedTrue:classedFalse)(ca,ba))}function textRemove(){this.textContent=""}function textConstant(aa){return function(){this.textContent=aa}}function textFunction(aa){return function(){var ba=aa.apply(this,arguments);this.textContent=null==ba?"":ba}}
function selection_text(aa){return arguments.length?this.each(null==aa?textRemove:("function"===typeof aa?textFunction:textConstant)(aa)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(aa){return function(){this.innerHTML=aa}}function htmlFunction(aa){return function(){var ba=aa.apply(this,arguments);this.innerHTML=null==ba?"":ba}}
function selection_html(aa){return arguments.length?this.each(null==aa?htmlRemove:("function"===typeof aa?htmlFunction:htmlConstant)(aa)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}
function selection_append(aa){var ba="function"===typeof aa?aa:creator(aa);return this.select(function(){return this.appendChild(ba.apply(this,arguments))})}function constantNull(){return null}function selection_insert(aa,ba){var ca="function"===typeof aa?aa:creator(aa),da=null==ba?constantNull:"function"===typeof ba?ba:selector(ba);return this.select(function(){return this.insertBefore(ca.apply(this,arguments),da.apply(this,arguments)||null)})}
function remove(){var aa=this.parentNode;aa&&aa.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var aa=this.cloneNode(!1),ba=this.parentNode;return ba?ba.insertBefore(aa,this.nextSibling):aa}function selection_cloneDeep(){var aa=this.cloneNode(!0),ba=this.parentNode;return ba?ba.insertBefore(aa,this.nextSibling):aa}function selection_clone(aa){return this.select(aa?selection_cloneDeep:selection_cloneShallow)}
function selection_datum(aa){return arguments.length?this.property("__data__",aa):this.node().__data__}function contextListener(aa){return function(ba){aa.call(this,ba,this.__data__)}}function parseTypenames$1(aa){return aa.trim().split(/^|\s+/).map(function(aa){var ba="",da=aa.indexOf(".");0<=da&&(ba=aa.slice(da+1),aa=aa.slice(0,da));return{type:aa,name:ba}})}
function onRemove(aa){return function(){var ba=this.__on;if(ba){for(var ca=0,da=-1,ea=ba.length,fa;ca<ea;++ca)(fa=ba[ca],aa.type&&fa.type!==aa.type||fa.name!==aa.name)?ba[++da]=fa:this.removeEventListener(fa.type,fa.listener,fa.options);++da?ba.length=da:delete this.__on}}}
function onAdd(aa,ba,ca){return function(){var da=this.__on,ea,fa=contextListener(ba);if(da)for(var ia=0,ha=da.length;ia<ha;++ia)if((ea=da[ia]).type===aa.type&&ea.name===aa.name){this.removeEventListener(ea.type,ea.listener,ea.options);this.addEventListener(ea.type,ea.listener=fa,ea.options=ca);ea.value=ba;return}this.addEventListener(aa.type,fa,ca);ea={type:aa.type,name:aa.name,value:ba,listener:fa,options:ca};da?da.push(ea):this.__on=[ea]}}
function selection_on(aa,ba,ca){var da=parseTypenames$1(aa+""),ea=da.length,fa;if(2>arguments.length){var ia=this.node().__on;if(ia)for(var ha=0,ja=ia.length,ka;ha<ja;++ha){var la=0;for(ka=ia[ha];la<ea;++la)if((fa=da[la]).type===ka.type&&fa.name===ka.name)return ka.value}}else{ia=ba?onAdd:onRemove;for(la=0;la<ea;++la)this.each(ia(da[la],ba,ca));return this}}
function dispatchEvent(aa,ba,ca){var da=defaultView(aa),ea=da.CustomEvent;"function"===typeof ea?ea=new ea(ba,ca):(ea=da.document.createEvent("Event"),ca?(ea.initEvent(ba,ca.bubbles,ca.cancelable),ea.detail=ca.detail):ea.initEvent(ba,!1,!1));aa.dispatchEvent(ea)}function dispatchConstant(aa,ba){return function(){return dispatchEvent(this,aa,ba)}}function dispatchFunction(aa,ba){return function(){return dispatchEvent(this,aa,ba.apply(this,arguments))}}
function selection_dispatch(aa,ba){return this.each(("function"===typeof ba?dispatchFunction:dispatchConstant)(aa,ba))}function*selection_iterator(){for(var aa=this._groups,ba=0,ca=aa.length;ba<ca;++ba)for(var da=aa[ba],ea=0,fa=da.length,ia;ea<fa;++ea)if(ia=da[ea])yield ia}var root=[null];function Selection(aa,ba){this._groups=aa;this._parents=ba}function selection(){return new Selection([[document.documentElement]],root)}function selection_selection(){return this}
Selection.prototype=selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,
attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};
function select(aa){return"string"===typeof aa?new Selection([[document.querySelector(aa)]],[document.documentElement]):new Selection([[aa]],root)}function sourceEvent(aa){let ba;for(;ba=aa.sourceEvent;)aa=ba;return aa}
function pointer(aa,ba){aa=sourceEvent(aa);void 0===ba&&(ba=aa.currentTarget);if(ba){var ca=ba.ownerSVGElement||ba;if(ca.createSVGPoint)return ca=ca.createSVGPoint(),ca.x=aa.clientX,ca.y=aa.clientY,ca=ca.matrixTransform(ba.getScreenCTM().inverse()),[ca.x,ca.y];if(ba.getBoundingClientRect)return ca=ba.getBoundingClientRect(),[aa.clientX-ca.left-ba.clientLeft,aa.clientY-ca.top-ba.clientTop]}return[aa.pageX,aa.pageY]}
function selectAll(aa){return"string"===typeof aa?new Selection([document.querySelectorAll(aa)],[document.documentElement]):new Selection([null==aa?[]:array(aa)],root)}function define(aa,ba,ca){aa.prototype=ba.prototype=ca;ca.constructor=aa}function extend(aa,ba){aa=Object.create(aa.prototype);for(var ca in ba)aa[ca]=ba[ca];return aa}function Color(){}
var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+
[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,
darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,
greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,
lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,
palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,
steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy:function(aa){return Object.assign(new this.constructor,this,aa)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});
function color_formatHex(){return this.rgb().formatHex()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}
function color(aa){var ba,ca;aa=(aa+"").trim().toLowerCase();return(ba=reHex.exec(aa))?(ca=ba[1].length,ba=parseInt(ba[1],16),6===ca?rgbn(ba):3===ca?new Rgb(ba>>8&15|ba>>4&240,ba>>4&15|ba&240,(ba&15)<<4|ba&15,1):8===ca?rgba(ba>>24&255,ba>>16&255,ba>>8&255,(ba&255)/255):4===ca?rgba(ba>>12&15|ba>>8&240,ba>>8&15|ba>>4&240,ba>>4&15|ba&240,((ba&15)<<4|ba&15)/255):null):(ba=reRgbInteger.exec(aa))?new Rgb(ba[1],ba[2],ba[3],1):(ba=reRgbPercent.exec(aa))?new Rgb(255*ba[1]/100,255*ba[2]/100,255*ba[3]/100,1):
(ba=reRgbaInteger.exec(aa))?rgba(ba[1],ba[2],ba[3],ba[4]):(ba=reRgbaPercent.exec(aa))?rgba(255*ba[1]/100,255*ba[2]/100,255*ba[3]/100,ba[4]):(ba=reHslPercent.exec(aa))?hsla(ba[1],ba[2]/100,ba[3]/100,1):(ba=reHslaPercent.exec(aa))?hsla(ba[1],ba[2]/100,ba[3]/100,ba[4]):named.hasOwnProperty(aa)?rgbn(named[aa]):"transparent"===aa?new Rgb(NaN,NaN,NaN,0):null}function rgbn(aa){return new Rgb(aa>>16&255,aa>>8&255,aa&255,1)}function rgba(aa,ba,ca,da){0>=da&&(aa=ba=ca=NaN);return new Rgb(aa,ba,ca,da)}
function rgbConvert(aa){aa instanceof Color||(aa=color(aa));if(!aa)return new Rgb;aa=aa.rgb();return new Rgb(aa.r,aa.g,aa.b,aa.opacity)}function rgb(aa,ba,ca,da){return 1===arguments.length?rgbConvert(aa):new Rgb(aa,ba,ca,null==da?1:da)}function Rgb(aa,ba,ca,da){this.r=+aa;this.g=+ba;this.b=+ca;this.opacity=+da}
define(Rgb,rgb,extend(Color,{brighter:function(aa){aa=null==aa?brighter:Math.pow(brighter,aa);return new Rgb(this.r*aa,this.g*aa,this.b*aa,this.opacity)},darker:function(aa){aa=null==aa?darker:Math.pow(darker,aa);return new Rgb(this.r*aa,this.g*aa,this.b*aa,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,
toString:rgb_formatRgb}));function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var aa=this.opacity;aa=isNaN(aa)?1:Math.max(0,Math.min(1,aa));return(1===aa?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===aa?")":", "+aa+")")}function hex(aa){aa=Math.max(0,Math.min(255,Math.round(aa)||0));return(16>aa?"0":"")+aa.toString(16)}
function hsla(aa,ba,ca,da){0>=da?aa=ba=ca=NaN:0>=ca||1<=ca?aa=ba=NaN:0>=ba&&(aa=NaN);return new Hsl(aa,ba,ca,da)}
function hslConvert(aa){if(aa instanceof Hsl)return new Hsl(aa.h,aa.s,aa.l,aa.opacity);aa instanceof Color||(aa=color(aa));if(!aa)return new Hsl;if(aa instanceof Hsl)return aa;aa=aa.rgb();var ba=aa.r/255,ca=aa.g/255,da=aa.b/255,ea=Math.min(ba,ca,da),fa=Math.max(ba,ca,da),ia=NaN,ha=fa-ea,ja=(fa+ea)/2;ha?(ia=ba===fa?(ca-da)/ha+6*(ca<da):ca===fa?(da-ba)/ha+2:(ba-ca)/ha+4,ha/=.5>ja?fa+ea:2-fa-ea,ia*=60):ha=0<ja&&1>ja?0:ia;return new Hsl(ia,ha,ja,aa.opacity)}
function hsl(aa,ba,ca,da){return 1===arguments.length?hslConvert(aa):new Hsl(aa,ba,ca,null==da?1:da)}function Hsl(aa,ba,ca,da){this.h=+aa;this.s=+ba;this.l=+ca;this.opacity=+da}
define(Hsl,hsl,extend(Color,{brighter:function(aa){aa=null==aa?brighter:Math.pow(brighter,aa);return new Hsl(this.h,this.s,this.l*aa,this.opacity)},darker:function(aa){aa=null==aa?darker:Math.pow(darker,aa);return new Hsl(this.h,this.s,this.l*aa,this.opacity)},rgb:function(){var aa=this.h%360+360*(0>this.h),ba=isNaN(aa)||isNaN(this.s)?0:this.s,ca=this.l;ba=ca+(.5>ca?ca:1-ca)*ba;ca=2*ca-ba;return new Rgb(hsl2rgb(240<=aa?aa-240:aa+120,ca,ba),hsl2rgb(aa,ca,ba),hsl2rgb(120>aa?aa+240:aa-120,ca,ba),this.opacity)},
displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var aa=this.opacity;aa=isNaN(aa)?1:Math.max(0,Math.min(1,aa));return(1===aa?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===aa?")":", "+aa+")")}}));function hsl2rgb(aa,ba,ca){return 255*(60>aa?ba+(ca-ba)*aa/60:180>aa?ca:240>aa?ba+(ca-ba)*(240-aa)/60:ba)}var constant$1=aa=>()=>aa;
function linear(aa,ba){return function(ca){return aa+ca*ba}}function exponential(aa,ba,ca){return aa=Math.pow(aa,ca),ba=Math.pow(ba,ca)-aa,ca=1/ca,function(da){return Math.pow(aa+da*ba,ca)}}function gamma(aa){return 1===(aa=+aa)?nogamma:function(ba,ca){return ca-ba?exponential(ba,ca,aa):constant$1(isNaN(ba)?ca:ba)}}function nogamma(aa,ba){var ca=ba-aa;return ca?linear(aa,ca):constant$1(isNaN(aa)?ba:aa)}
var interpolateRgb=function rgbGamma(aa){function ca(aa,ca){var ea=da((aa=rgb(aa)).r,(ca=rgb(ca)).r),fa=da(aa.g,ca.g),ja=da(aa.b,ca.b),ka=nogamma(aa.opacity,ca.opacity);return function(ca){aa.r=ea(ca);aa.g=fa(ca);aa.b=ja(ca);aa.opacity=ka(ca);return aa+""}}var da=gamma(aa);ca.gamma=rgbGamma;return ca}(1);function numberArray(aa,ba){ba||(ba=[]);var ca=aa?Math.min(ba.length,aa.length):0,da=ba.slice(),ea;return function(fa){for(ea=0;ea<ca;++ea)da[ea]=aa[ea]*(1-fa)+ba[ea]*fa;return da}}
function isNumberArray(aa){return ArrayBuffer.isView(aa)&&!(aa instanceof DataView)}function genericArray(aa,ba){var ca=ba?ba.length:0,da=aa?Math.min(ca,aa.length):0,ea=Array(da),fa=Array(ca),ia;for(ia=0;ia<da;++ia)ea[ia]=interpolate(aa[ia],ba[ia]);for(;ia<ca;++ia)fa[ia]=ba[ia];return function(aa){for(ia=0;ia<da;++ia)fa[ia]=ea[ia](aa);return fa}}function date(aa,ba){var ca=new Date;return aa=+aa,ba=+ba,function(da){return ca.setTime(aa*(1-da)+ba*da),ca}}
function interpolateNumber(aa,ba){return aa=+aa,ba=+ba,function(ca){return aa*(1-ca)+ba*ca}}function object(aa,ba){var ca={},da={},ea;if(null===aa||"object"!==typeof aa)aa={};if(null===ba||"object"!==typeof ba)ba={};for(ea in ba)ea in aa?ca[ea]=interpolate(aa[ea],ba[ea]):da[ea]=ba[ea];return function(aa){for(ea in ca)da[ea]=ca[ea](aa);return da}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(aa){return function(){return aa}}
function one(aa){return function(ba){return aa(ba)+""}}
function interpolateString(aa,ba){var ca=reA.lastIndex=reB.lastIndex=0,da,ea,fa,ia=-1,ha=[],ja=[];aa+="";for(ba+="";(da=reA.exec(aa))&&(ea=reB.exec(ba));)(fa=ea.index)>ca&&(fa=ba.slice(ca,fa),ha[ia]?ha[ia]+=fa:ha[++ia]=fa),(da=da[0])===(ea=ea[0])?ha[ia]?ha[ia]+=ea:ha[++ia]=ea:(ha[++ia]=null,ja.push({i:ia,x:interpolateNumber(da,ea)})),ca=reB.lastIndex;ca<ba.length&&(fa=ba.slice(ca),ha[ia]?ha[ia]+=fa:ha[++ia]=fa);return 2>ha.length?ja[0]?one(ja[0].x):zero(ba):(ba=ja.length,function(aa){for(var ca=0,
da;ca<ba;++ca)ha[(da=ja[ca]).i]=da.x(aa);return ha.join("")})}function interpolate(aa,ba){var ca=typeof ba,da;return null==ba||"boolean"===ca?constant$1(ba):("number"===ca?interpolateNumber:"string"===ca?(da=color(ba))?(ba=da,interpolateRgb):interpolateString:ba instanceof color?interpolateRgb:ba instanceof Date?date:isNumberArray(ba)?numberArray:Array.isArray(ba)?genericArray:"function"!==typeof ba.valueOf&&"function"!==typeof ba.toString||isNaN(ba)?object:interpolateNumber)(aa,ba)}
function interpolateRound(aa,ba){return aa=+aa,ba=+ba,function(ca){return Math.round(aa*(1-ca)+ba*ca)}}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};
function decompose(aa,ba,ca,da,ea,fa){var ia,ha,ja;if(ia=Math.sqrt(aa*aa+ba*ba))aa/=ia,ba/=ia;if(ja=aa*ca+ba*da)ca-=aa*ja,da-=ba*ja;if(ha=Math.sqrt(ca*ca+da*da))ca/=ha,da/=ha,ja/=ha;aa*da<ba*ca&&(aa=-aa,ba=-ba,ja=-ja,ia=-ia);return{translateX:ea,translateY:fa,rotate:Math.atan2(ba,aa)*degrees,skewX:Math.atan(ja)*degrees,scaleX:ia,scaleY:ha}}var svgNode;
function parseCss(aa){aa=new ("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(aa+"");return aa.isIdentity?identity$1:decompose(aa.a,aa.b,aa.c,aa.d,aa.e,aa.f)}function parseSvg(aa){if(null==aa)return identity$1;svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g"));svgNode.setAttribute("transform",aa);if(!(aa=svgNode.transform.baseVal.consolidate()))return identity$1;aa=aa.matrix;return decompose(aa.a,aa.b,aa.c,aa.d,aa.e,aa.f)}
function interpolateTransform(aa,ba,ca,da){function ea(aa){return aa.length?aa.pop()+" ":""}function fa(aa,da,ea,fa,ha,ia){aa!==ea||da!==fa?(ha=ha.push("translate(",null,ba,null,ca),ia.push({i:ha-4,x:interpolateNumber(aa,ea)},{i:ha-2,x:interpolateNumber(da,fa)})):(ea||fa)&&ha.push("translate("+ea+ba+fa+ca)}function ia(aa,ba,ca,fa){aa!==ba?(180<aa-ba?ba+=360:180<ba-aa&&(aa+=360),fa.push({i:ca.push(ea(ca)+"rotate(",null,da)-2,x:interpolateNumber(aa,ba)})):ba&&ca.push(ea(ca)+"rotate("+ba+da)}function ha(aa,
ba,ca,fa){aa!==ba?fa.push({i:ca.push(ea(ca)+"skewX(",null,da)-2,x:interpolateNumber(aa,ba)}):ba&&ca.push(ea(ca)+"skewX("+ba+da)}function ja(aa,ba,ca,da,fa,ha){aa!==ca||ba!==da?(fa=fa.push(ea(fa)+"scale(",null,",",null,")"),ha.push({i:fa-4,x:interpolateNumber(aa,ca)},{i:fa-2,x:interpolateNumber(ba,da)})):1===ca&&1===da||fa.push(ea(fa)+"scale("+ca+","+da+")")}return function(ba,ca){var da=[],ea=[];ba=aa(ba);ca=aa(ca);fa(ba.translateX,ba.translateY,ca.translateX,ca.translateY,da,ea);ia(ba.rotate,ca.rotate,
da,ea);ha(ba.skewX,ca.skewX,da,ea);ja(ba.scaleX,ba.scaleY,ca.scaleX,ca.scaleY,da,ea);ba=ca=null;return function(aa){for(var ba=-1,ca=ea.length,fa;++ba<ca;)da[(fa=ea[ba]).i]=fa.x(aa);return da.join("")}}}
var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout=0,interval=0,pokeDelay=1E3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock="object"===typeof performance&&performance.now?performance:Date,setFrame="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(aa){setTimeout(aa,17)};
function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}
Timer.prototype=timer.prototype={constructor:Timer,restart:function(aa,ba,ca){if("function"!==typeof aa)throw new TypeError("callback is not a function");ca=(null==ca?now():+ca)+(null==ba?0:+ba);this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this);this._call=aa;this._time=ca;sleep()},stop:function(){this._call&&(this._call=null,this._time=Infinity,sleep())}};function timer(aa,ba,ca){var da=new Timer;da.restart(aa,ba,ca);return da}
function timerFlush(){now();++frame;for(var aa=taskHead,ba;aa;)0<=(ba=clockNow-aa._time)&&aa._call.call(null,ba),aa=aa._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew;frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var aa=clock.now(),ba=aa-clockLast;ba>pokeDelay&&(clockSkew-=ba,clockLast=aa)}
function nap(){for(var aa,ba=taskHead,ca,da=Infinity;ba;)ba._call?(da>ba._time&&(da=ba._time),aa=ba,ba=ba._next):(ca=ba._next,ba._next=null,ba=aa?aa._next=ca:taskHead=ca);taskTail=aa;sleep(da)}function sleep(aa){frame||(timeout&&(timeout=clearTimeout(timeout)),24<aa-clockNow?(Infinity>aa&&(timeout=setTimeout(wake,aa-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}
function timeout$1(aa,ba,ca){var da=new Timer;ba=null==ba?0:+ba;da.restart(ca=>{da.stop();aa(ca+ba)},ba,ca);return da}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;
function schedule(aa,ba,ca,da,ea,fa){var ia=aa.__transition;if(!ia)aa.__transition={};else if(ca in ia)return;create(aa,ca,{name:ba,index:da,group:ea,on:emptyOn,tween:emptyTween,time:fa.time,delay:fa.delay,duration:fa.duration,ease:fa.ease,timer:null,state:CREATED})}function init(aa,ba){aa=get$1(aa,ba);if(aa.state>CREATED)throw Error("too late; already scheduled");return aa}function set$1(aa,ba){aa=get$1(aa,ba);if(aa.state>STARTED)throw Error("too late; already running");return aa}
function get$1(aa,ba){aa=aa.__transition;if(!aa||!(aa=aa[ba]))throw Error("transition not found");return aa}
function create(aa,ba,ca){function da(ja){var ka,la;if(ca.state!==SCHEDULED)return fa();for(na in ia){var ma=ia[na];if(ma.name===ca.name){if(ma.state===STARTED)return timeout$1(da);ma.state===RUNNING?(ma.state=ENDED,ma.timer.stop(),ma.on.call("interrupt",aa,aa.__data__,ma.index,ma.group),delete ia[na]):+na<ba&&(ma.state=ENDED,ma.timer.stop(),ma.on.call("cancel",aa,aa.__data__,ma.index,ma.group),delete ia[na])}}timeout$1(function(){ca.state===STARTED&&(ca.state=RUNNING,ca.timer.restart(ea,ca.delay,
ca.time),ea(ja))});ca.state=STARTING;ca.on.call("start",aa,aa.__data__,ca.index,ca.group);if(ca.state===STARTING){ca.state=STARTED;ha=Array(la=ca.tween.length);var na=0;for(ka=-1;na<la;++na)if(ma=ca.tween[na].value.call(aa,aa.__data__,ca.index,ca.group))ha[++ka]=ma;ha.length=ka+1}}function ea(ba){ba=ba<ca.duration?ca.ease.call(null,ba/ca.duration):(ca.timer.restart(fa),ca.state=ENDING,1);for(var da=-1,ea=ha.length;++da<ea;)ha[da].call(aa,ba);ca.state===ENDING&&(ca.on.call("end",aa,aa.__data__,ca.index,
ca.group),fa())}function fa(){ca.state=ENDED;ca.timer.stop();delete ia[ba];for(var da in ia)return;delete aa.__transition}var ia=aa.__transition,ha;ia[ba]=ca;ca.timer=timer(function(aa){ca.state=SCHEDULED;ca.timer.restart(da,ca.delay,ca.time);ca.delay<=aa&&da(aa-ca.delay)},0,ca.time)}
function interrupt(aa,ba){var ca=aa.__transition,da,ea=!0,fa;if(ca){ba=null==ba?null:ba+"";for(fa in ca)if((da=ca[fa]).name!==ba)ea=!1;else{var ia=da.state>STARTING&&da.state<ENDING;da.state=ENDED;da.timer.stop();da.on.call(ia?"interrupt":"cancel",aa,aa.__data__,da.index,da.group);delete ca[fa]}ea&&delete aa.__transition}}function selection_interrupt(aa){return this.each(function(){interrupt(this,aa)})}
function tweenRemove(aa,ba){var ca,da;return function(){var ea=set$1(this,aa),fa=ea.tween;if(fa!==ca){da=ca=fa;fa=0;for(var ia=da.length;fa<ia;++fa)if(da[fa].name===ba){da=da.slice();da.splice(fa,1);break}}ea.tween=da}}
function tweenFunction(aa,ba,ca){var da,ea;if("function"!==typeof ca)throw Error();return function(){var fa=set$1(this,aa),ia=fa.tween;if(ia!==da){ea=(da=ia).slice();ia={name:ba,value:ca};for(var ha=0,ja=ea.length;ha<ja;++ha)if(ea[ha].name===ba){ea[ha]=ia;break}ha===ja&&ea.push(ia)}fa.tween=ea}}
function transition_tween(aa,ba){var ca=this._id;aa+="";if(2>arguments.length){ca=get$1(this.node(),ca).tween;for(var da=0,ea=ca.length,fa;da<ea;++da)if((fa=ca[da]).name===aa)return fa.value;return null}return this.each((null==ba?tweenRemove:tweenFunction)(ca,aa,ba))}function tweenValue(aa,ba,ca){var da=aa._id;aa.each(function(){var aa=set$1(this,da);(aa.value||(aa.value={}))[ba]=ca.apply(this,arguments)});return function(aa){return get$1(aa,da).value[ba]}}
function interpolate$1(aa,ba){var ca;return("number"===typeof ba?interpolateNumber:ba instanceof color?interpolateRgb:(ca=color(ba))?(ba=ca,interpolateRgb):interpolateString)(aa,ba)}function attrRemove$1(aa){return function(){this.removeAttribute(aa)}}function attrRemoveNS$1(aa){return function(){this.removeAttributeNS(aa.space,aa.local)}}function attrConstant$1(aa,ba,ca){var da,ea=ca+"",fa;return function(){var ia=this.getAttribute(aa);return ia===ea?null:ia===da?fa:fa=ba(da=ia,ca)}}
function attrConstantNS$1(aa,ba,ca){var da,ea=ca+"",fa;return function(){var ia=this.getAttributeNS(aa.space,aa.local);return ia===ea?null:ia===da?fa:fa=ba(da=ia,ca)}}function attrFunction$1(aa,ba,ca){var da,ea,fa;return function(){var ia=ca(this);if(null==ia)return void this.removeAttribute(aa);var ha=this.getAttribute(aa);var ja=ia+"";return ha===ja?null:ha===da&&ja===ea?fa:(ea=ja,fa=ba(da=ha,ia))}}
function attrFunctionNS$1(aa,ba,ca){var da,ea,fa;return function(){var ia=ca(this);if(null==ia)return void this.removeAttributeNS(aa.space,aa.local);var ha=this.getAttributeNS(aa.space,aa.local);var ja=ia+"";return ha===ja?null:ha===da&&ja===ea?fa:(ea=ja,fa=ba(da=ha,ia))}}
function transition_attr(aa,ba){var ca=namespace(aa),da="transform"===ca?interpolateTransformSvg:interpolate$1;return this.attrTween(aa,"function"===typeof ba?(ca.local?attrFunctionNS$1:attrFunction$1)(ca,da,tweenValue(this,"attr."+aa,ba)):null==ba?(ca.local?attrRemoveNS$1:attrRemove$1)(ca):(ca.local?attrConstantNS$1:attrConstant$1)(ca,da,ba))}function attrInterpolate(aa,ba){return function(ca){this.setAttribute(aa,ba.call(this,ca))}}
function attrInterpolateNS(aa,ba){return function(ca){this.setAttributeNS(aa.space,aa.local,ba.call(this,ca))}}function attrTweenNS(aa,ba){function ca(){var ca=ba.apply(this,arguments);ca!==ea&&(da=(ea=ca)&&attrInterpolateNS(aa,ca));return da}var da,ea;ca._value=ba;return ca}function attrTween(aa,ba){function ca(){var ca=ba.apply(this,arguments);ca!==ea&&(da=(ea=ca)&&attrInterpolate(aa,ca));return da}var da,ea;ca._value=ba;return ca}
function transition_attrTween(aa,ba){var ca="attr."+aa;if(2>arguments.length)return(ca=this.tween(ca))&&ca._value;if(null==ba)return this.tween(ca,null);if("function"!==typeof ba)throw Error();var da=namespace(aa);return this.tween(ca,(da.local?attrTweenNS:attrTween)(da,ba))}function delayFunction(aa,ba){return function(){init(this,aa).delay=+ba.apply(this,arguments)}}function delayConstant(aa,ba){return ba=+ba,function(){init(this,aa).delay=ba}}
function transition_delay(aa){var ba=this._id;return arguments.length?this.each(("function"===typeof aa?delayFunction:delayConstant)(ba,aa)):get$1(this.node(),ba).delay}function durationFunction(aa,ba){return function(){set$1(this,aa).duration=+ba.apply(this,arguments)}}function durationConstant(aa,ba){return ba=+ba,function(){set$1(this,aa).duration=ba}}
function transition_duration(aa){var ba=this._id;return arguments.length?this.each(("function"===typeof aa?durationFunction:durationConstant)(ba,aa)):get$1(this.node(),ba).duration}function easeConstant(aa,ba){if("function"!==typeof ba)throw Error();return function(){set$1(this,aa).ease=ba}}function transition_ease(aa){var ba=this._id;return arguments.length?this.each(easeConstant(ba,aa)):get$1(this.node(),ba).ease}
function easeVarying(aa,ba){return function(){var ca=ba.apply(this,arguments);if("function"!==typeof ca)throw Error();set$1(this,aa).ease=ca}}function transition_easeVarying(aa){if("function"!==typeof aa)throw Error();return this.each(easeVarying(this._id,aa))}
function transition_filter(aa){"function"!==typeof aa&&(aa=matcher(aa));for(var ba=this._groups,ca=ba.length,da=Array(ca),ea=0;ea<ca;++ea)for(var fa=ba[ea],ia=fa.length,ha=da[ea]=[],ja,ka=0;ka<ia;++ka)(ja=fa[ka])&&aa.call(ja,ja.__data__,ka,fa)&&ha.push(ja);return new Transition(da,this._parents,this._name,this._id)}
function transition_merge(aa){if(aa._id!==this._id)throw Error();var ba=this._groups;aa=aa._groups;for(var ca=ba.length,da=Math.min(ca,aa.length),ea=Array(ca),fa=0;fa<da;++fa)for(var ia=ba[fa],ha=aa[fa],ja=ia.length,ka=ea[fa]=Array(ja),la,ma=0;ma<ja;++ma)if(la=ia[ma]||ha[ma])ka[ma]=la;for(;fa<ca;++fa)ea[fa]=ba[fa];return new Transition(ea,this._parents,this._name,this._id)}
function start(aa){return(aa+"").trim().split(/^|\s+/).every(function(aa){var ba=aa.indexOf(".");0<=ba&&(aa=aa.slice(0,ba));return!aa||"start"===aa})}function onFunction(aa,ba,ca){var da,ea,fa=start(ba)?init:set$1;return function(){var ia=fa(this,aa),ha=ia.on;if(ha!==da)(ea=(da=ha).copy()).on(ba,ca);ia.on=ea}}function transition_on(aa,ba){var ca=this._id;return 2>arguments.length?get$1(this.node(),ca).on.on(aa):this.each(onFunction(ca,aa,ba))}
function removeFunction(aa){return function(){var ba=this.parentNode,ca;for(ca in this.__transition)if(+ca!==aa)return;ba&&ba.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}
function transition_select(aa){var ba=this._name,ca=this._id;"function"!==typeof aa&&(aa=selector(aa));for(var da=this._groups,ea=da.length,fa=Array(ea),ia=0;ia<ea;++ia)for(var ha=da[ia],ja=ha.length,ka=fa[ia]=Array(ja),la,ma,na=0;na<ja;++na)(la=ha[na])&&(ma=aa.call(la,la.__data__,na,ha))&&("__data__"in la&&(ma.__data__=la.__data__),ka[na]=ma,schedule(ka[na],ba,ca,na,ka,get$1(la,ca)));return new Transition(fa,this._parents,ba,ca)}
function transition_selectAll(aa){var ba=this._name,ca=this._id;"function"!==typeof aa&&(aa=selectorAll(aa));for(var da=this._groups,ea=da.length,fa=[],ia=[],ha=0;ha<ea;++ha)for(var ja=da[ha],ka=ja.length,la,ma=0;ma<ka;++ma)if(la=ja[ma]){for(var na=aa.call(la,la.__data__,ma,ja),pa,qa=get$1(la,ca),ra=0,ta=na.length;ra<ta;++ra)(pa=na[ra])&&schedule(pa,ba,ca,ra,na,qa);fa.push(na);ia.push(la)}return new Transition(fa,ia,ba,ca)}var Selection$1=selection.prototype.constructor;
function transition_selection(){return new Selection$1(this._groups,this._parents)}function styleNull(aa,ba){var ca,da,ea;return function(){var fa=styleValue(this,aa),ia=(this.style.removeProperty(aa),styleValue(this,aa));return fa===ia?null:fa===ca&&ia===da?ea:ea=ba(ca=fa,da=ia)}}function styleRemove$1(aa){return function(){this.style.removeProperty(aa)}}
function styleConstant$1(aa,ba,ca){var da,ea=ca+"",fa;return function(){var ia=styleValue(this,aa);return ia===ea?null:ia===da?fa:fa=ba(da=ia,ca)}}function styleFunction$1(aa,ba,ca){var da,ea,fa;return function(){var ia=styleValue(this,aa),ha=ca(this),ja=ha+"";null==ha&&(ja=ha=(this.style.removeProperty(aa),styleValue(this,aa)));return ia===ja?null:ia===da&&ja===ea?fa:(ea=ja,fa=ba(da=ia,ha))}}
function styleMaybeRemove(aa,ba){var ca,da,ea,fa="style."+ba,ia="end."+fa,ha;return function(){var ja=set$1(this,aa),ka=ja.on,la=null==ja.value[fa]?ha||(ha=styleRemove$1(ba)):void 0;if(ka!==ca||ea!==la)(da=(ca=ka).copy()).on(ia,ea=la);ja.on=da}}
function transition_style(aa,ba,ca){var da="transform"===(aa+="")?interpolateTransformCss:interpolate$1;return null==ba?this.styleTween(aa,styleNull(aa,da)).on("end.style."+aa,styleRemove$1(aa)):"function"===typeof ba?this.styleTween(aa,styleFunction$1(aa,da,tweenValue(this,"style."+aa,ba))).each(styleMaybeRemove(this._id,aa)):this.styleTween(aa,styleConstant$1(aa,da,ba),ca).on("end.style."+aa,null)}
function styleInterpolate(aa,ba,ca){return function(da){this.style.setProperty(aa,ba.call(this,da),ca)}}function styleTween(aa,ba,ca){function da(){var da=ba.apply(this,arguments);da!==fa&&(ea=(fa=da)&&styleInterpolate(aa,da,ca));return ea}var ea,fa;da._value=ba;return da}
function transition_styleTween(aa,ba,ca){var da="style."+(aa+="");if(2>arguments.length)return(da=this.tween(da))&&da._value;if(null==ba)return this.tween(da,null);if("function"!==typeof ba)throw Error();return this.tween(da,styleTween(aa,ba,null==ca?"":ca))}function textConstant$1(aa){return function(){this.textContent=aa}}function textFunction$1(aa){return function(){var ba=aa(this);this.textContent=null==ba?"":ba}}
function transition_text(aa){return this.tween("text","function"===typeof aa?textFunction$1(tweenValue(this,"text",aa)):textConstant$1(null==aa?"":aa+""))}function textInterpolate(aa){return function(ba){this.textContent=aa.call(this,ba)}}function textTween(aa){function ba(){var ba=aa.apply(this,arguments);ba!==da&&(ca=(da=ba)&&textInterpolate(ba));return ca}var ca,da;ba._value=aa;return ba}
function transition_textTween(aa){var ba="text";if(1>arguments.length)return(ba=this.tween(ba))&&ba._value;if(null==aa)return this.tween(ba,null);if("function"!==typeof aa)throw Error();return this.tween(ba,textTween(aa))}
function transition_transition(){for(var aa=this._name,ba=this._id,ca=newId(),da=this._groups,ea=da.length,fa=0;fa<ea;++fa)for(var ia=da[fa],ha=ia.length,ja,ka=0;ka<ha;++ka)if(ja=ia[ka]){var la=get$1(ja,ba);schedule(ja,aa,ca,ka,ia,{time:la.time+la.delay+la.duration,delay:0,duration:la.duration,ease:la.ease})}return new Transition(da,this._parents,aa,ca)}
function transition_end(){var aa,ba,ca=this,da=ca._id,ea=ca.size();return new Promise(function(fa,ia){var ha={value:ia},ja={value:function(){0===--ea&&fa()}};ca.each(function(){var ca=set$1(this,da),ea=ca.on;ea!==aa&&(ba=(aa=ea).copy(),ba._.cancel.push(ha),ba._.interrupt.push(ha),ba._.end.push(ja));ca.on=ba});0===ea&&fa()})}var id=0;function Transition(aa,ba,ca,da){this._groups=aa;this._parents=ba;this._name=ca;this._id=da}function transition(aa){return selection().transition(aa)}
function newId(){return++id}var selection_prototype=selection.prototype;
Transition.prototype=transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,
styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(aa){return(1>=(aa*=2)?aa*aa*aa:(aa-=2)*aa*aa+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};
function inherit(aa,ba){for(var ca;!(ca=aa.__transition)||!(ca=ca[ba]);)if(!(aa=aa.parentNode))throw Error(`transition ${ba} not found`);return ca}
function selection_transition(aa){var ba;if(aa instanceof Transition){var ca=aa._id;aa=aa._name}else ca=newId(),(ba=defaultTiming).time=now(),aa=null==aa?null:aa+"";for(var da=this._groups,ea=da.length,fa=0;fa<ea;++fa)for(var ia=da[fa],ha=ia.length,ja,ka=0;ka<ha;++ka)(ja=ia[ka])&&schedule(ja,aa,ca,ka,ia,ba||inherit(ja,ca));return new Transition(da,this._parents,aa,ca)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;
let pi=Math.PI,tau=2*pi,epsilon$1=1E-6,tauEpsilon=tau-epsilon$1;function Path(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function path(){return new Path}
Path.prototype=path.prototype={constructor:Path,moveTo:function(aa,ba){this._+="M"+(this._x0=this._x1=+aa)+","+(this._y0=this._y1=+ba)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(aa,ba){this._+="L"+(this._x1=+aa)+","+(this._y1=+ba)},quadraticCurveTo:function(aa,ba,ca,da){this._+="Q"+ +aa+","+ +ba+","+(this._x1=+ca)+","+(this._y1=+da)},bezierCurveTo:function(aa,ba,ca,da,ea,fa){this._+="C"+ +aa+","+ +ba+","+ +ca+","+ +da+","+(this._x1=+ea)+
","+(this._y1=+fa)},arcTo:function(aa,ba,ca,da,ea){aa=+aa;ba=+ba;ca=+ca;da=+da;ea=+ea;var fa=this._x1,ia=this._y1,ha=ca-aa,ja=da-ba,ka=fa-aa,la=ia-ba,ma=ka*ka+la*la;if(0>ea)throw Error("negative radius: "+ea);if(null===this._x1)this._+="M"+(this._x1=aa)+","+(this._y1=ba);else if(ma>epsilon$1)if(Math.abs(la*ha-ja*ka)>epsilon$1&&ea){ca-=fa;da-=ia;var na=ha*ha+ja*ja;ia=Math.sqrt(na);fa=Math.sqrt(ma);ma=ea*Math.tan((pi-Math.acos((na+ma-(ca*ca+da*da))/(2*ia*fa)))/2);fa=ma/fa;ma/=ia;Math.abs(fa-1)>epsilon$1&&
(this._+="L"+(aa+fa*ka)+","+(ba+fa*la));this._+="A"+ea+","+ea+",0,0,"+ +(la*ca>ka*da)+","+(this._x1=aa+ma*ha)+","+(this._y1=ba+ma*ja)}else this._+="L"+(this._x1=aa)+","+(this._y1=ba)},arc:function(aa,ba,ca,da,ea,fa){aa=+aa;ba=+ba;ca=+ca;fa=!!fa;var ia=ca*Math.cos(da),ha=ca*Math.sin(da),ja=aa+ia,ka=ba+ha,la=1^fa;da=fa?da-ea:ea-da;if(0>ca)throw Error("negative radius: "+ca);if(null===this._x1)this._+="M"+ja+","+ka;else if(Math.abs(this._x1-ja)>epsilon$1||Math.abs(this._y1-ka)>epsilon$1)this._+="L"+
ja+","+ka;ca&&(0>da&&(da=da%tau+tau),da>tauEpsilon?this._+="A"+ca+","+ca+",0,1,"+la+","+(aa-ia)+","+(ba-ha)+"A"+ca+","+ca+",0,1,"+la+","+(this._x1=ja)+","+(this._y1=ka):da>epsilon$1&&(this._+="A"+ca+","+ca+",0,"+ +(da>=pi)+","+la+","+(this._x1=aa+ca*Math.cos(ea))+","+(this._y1=ba+ca*Math.sin(ea))))},rect:function(aa,ba,ca,da){this._+="M"+(this._x0=this._x1=+aa)+","+(this._y0=this._y1=+ba)+"h"+ +ca+"v"+ +da+"h"+-ca+"Z"},toString:function(){return this._}};
var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(aa){return new Function("d","return {"+aa.map(function(aa,ca){return JSON.stringify(aa)+": d["+ca+'] || ""'}).join(",")+"}")}function customConverter(aa,ba){var ca=objectConverter(aa);return function(da,ea){return ba(ca(da),ea,aa)}}function inferColumns(aa){var ba=Object.create(null),ca=[];aa.forEach(function(aa){for(var da in aa)da in ba||ca.push(ba[da]=da)});return ca}
function pad(aa,ba){aa+="";var ca=aa.length;return ca<ba?Array(ba-ca+1).join(0)+aa:aa}function formatYear(aa){return 0>aa?"-"+pad(-aa,6):9999<aa?"+"+pad(aa,6):pad(aa,4)}
function formatDate(aa){var ba=aa.getUTCHours(),ca=aa.getUTCMinutes(),da=aa.getUTCSeconds(),ea=aa.getUTCMilliseconds();return isNaN(aa)?"Invalid Date":formatYear(aa.getUTCFullYear())+"-"+pad(aa.getUTCMonth()+1,2)+"-"+pad(aa.getUTCDate(),2)+(ea?"T"+pad(ba,2)+":"+pad(ca,2)+":"+pad(da,2)+"."+pad(ea,3)+"Z":da?"T"+pad(ba,2)+":"+pad(ca,2)+":"+pad(da,2)+"Z":ca||ba?"T"+pad(ba,2)+":"+pad(ca,2)+"Z":"")}
function dsvFormat(aa){function ba(aa,ba){function ca(){if(ra)return EOF;if(ta)return ta=!1,EOL;var ba,ca=fa,da;if(aa.charCodeAt(ca)===QUOTE){for(;fa++<ea&&aa.charCodeAt(fa)!==QUOTE||aa.charCodeAt(++fa)===QUOTE;);(ba=fa)>=ea?ra=!0:(da=aa.charCodeAt(fa++))===NEWLINE?ta=!0:da===RETURN&&(ta=!0,aa.charCodeAt(fa)===NEWLINE&&++fa);return aa.slice(ca+1,ba-1).replace(/""/g,'"')}for(;fa<ea;){if((da=aa.charCodeAt(ba=fa++))===NEWLINE)ta=!0;else if(da===RETURN)ta=!0,aa.charCodeAt(fa)===NEWLINE&&++fa;else if(da!==
ia)continue;return aa.slice(ca,ba)}return ra=!0,aa.slice(ca,ea)}var da=[],ea=aa.length,fa=0,ha=0,ja,ra=0>=ea,ta=!1;aa.charCodeAt(ea-1)===NEWLINE&&--ea;for(aa.charCodeAt(ea-1)===RETURN&&--ea;(ja=ca())!==EOF;){for(var oa=[];ja!==EOL&&ja!==EOF;)oa.push(ja),ja=ca();ba&&null==(oa=ba(oa,ha++))||da.push(oa)}return da}function ca(ba,ca){return ba.map(function(ba){return ca.map(function(aa){return ea(ba[aa])}).join(aa)})}function da(ba){return ba.map(ea).join(aa)}function ea(aa){return null==aa?"":aa instanceof
Date?formatDate(aa):fa.test(aa+="")?'"'+aa.replace(/"/g,'""')+'"':aa}var fa=new RegExp('["'+aa+"\n\r]"),ia=aa.charCodeAt(0);return{parse:function(aa,ca){var da,ea;aa=ba(aa,function(aa,ba){if(da)return da(aa,ba-1);ea=aa;da=ca?customConverter(aa,ca):objectConverter(aa)});aa.columns=ea||[];return aa},parseRows:ba,format:function(ba,da){null==da&&(da=inferColumns(ba));return[da.map(ea).join(aa)].concat(ca(ba,da)).join("\n")},formatBody:function(aa,ba){null==ba&&(ba=inferColumns(aa));return ca(aa,ba).join("\n")},
formatRows:function(aa){return aa.map(da).join("\n")},formatRow:da,formatValue:ea}}var csv=dsvFormat(","),csvParse=csv.parse,tsv=dsvFormat("\t"),tsvParse=tsv.parse;function responseText(aa){if(!aa.ok)throw Error(aa.status+" "+aa.statusText);return aa.text()}function text(aa,ba){return fetch(aa,ba).then(responseText)}function dsvParse(aa){return function(ba,ca,da){2===arguments.length&&"function"===typeof ca&&(da=ca,ca=void 0);return text(ba,ca).then(function(ba){return aa(ba,da)})}}
var csv$1=dsvParse(csvParse),tsv$1=dsvParse(tsvParse);function responseJson(aa){if(!aa.ok)throw Error(aa.status+" "+aa.statusText);if(204!==aa.status&&205!==aa.status)return aa.json()}function json(aa,ba){return fetch(aa,ba).then(responseJson)}function formatDecimal(aa){return 1E21<=Math.abs(aa=Math.round(aa))?aa.toLocaleString("en").replace(/,/g,""):aa.toString(10)}
function formatDecimalParts(aa,ba){if(0>(ba=(aa=ba?aa.toExponential(ba-1):aa.toExponential()).indexOf("e")))return null;var ca=aa.slice(0,ba);return[1<ca.length?ca[0]+ca.slice(2):ca,+aa.slice(ba+1)]}function exponent(aa){return aa=formatDecimalParts(Math.abs(aa)),aa?aa[1]:NaN}
function formatGroup(aa,ba){return function(ca,da){for(var ea=ca.length,fa=[],ia=0,ha=aa[0],ja=0;0<ea&&0<ha;){ja+ha+1>da&&(ha=Math.max(1,da-ja));fa.push(ca.substring(ea-=ha,ea+ha));if((ja+=ha+1)>da)break;ha=aa[ia=(ia+1)%aa.length]}return fa.reverse().join(ba)}}function formatNumerals(aa){return function(ba){return ba.replace(/[0-9]/g,function(ba){return aa[+ba]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function formatSpecifier(aa){if(!(ba=re.exec(aa)))throw Error("invalid format: "+aa);var ba;return new FormatSpecifier({fill:ba[1],align:ba[2],sign:ba[3],symbol:ba[4],zero:ba[5],width:ba[6],comma:ba[7],precision:ba[8]&&ba[8].slice(1),trim:ba[9],type:ba[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;
function FormatSpecifier(aa){this.fill=void 0===aa.fill?" ":aa.fill+"";this.align=void 0===aa.align?">":aa.align+"";this.sign=void 0===aa.sign?"-":aa.sign+"";this.symbol=void 0===aa.symbol?"":aa.symbol+"";this.zero=!!aa.zero;this.width=void 0===aa.width?void 0:+aa.width;this.comma=!!aa.comma;this.precision=void 0===aa.precision?void 0:+aa.precision;this.trim=!!aa.trim;this.type=void 0===aa.type?"":aa.type+""}
FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};
function formatTrim(aa){var ba=aa.length,ca=1,da=-1,ea;a:for(;ca<ba;++ca)switch(aa[ca]){case ".":da=ea=ca;break;case "0":0===da&&(da=ca);ea=ca;break;default:if(!+aa[ca])break a;0<da&&(da=0)}return 0<da?aa.slice(0,da)+aa.slice(ea+1):aa}var prefixExponent;
function formatPrefixAuto(aa,ba){var ca=formatDecimalParts(aa,ba);if(!ca)return aa+"";var da=ca[0];ca=ca[1];ca=ca-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(ca/3))))+1;var ea=da.length;return ca===ea?da:ca>ea?da+Array(ca-ea+1).join("0"):0<ca?da.slice(0,ca)+"."+da.slice(ca):"0."+Array(1-ca).join("0")+formatDecimalParts(aa,Math.max(0,ba+ca-1))[0]}
function formatRounded(aa,ba){ba=formatDecimalParts(aa,ba);if(!ba)return aa+"";aa=ba[0];ba=ba[1];return 0>ba?"0."+Array(-ba).join("0")+aa:aa.length>ba+1?aa.slice(0,ba+1)+"."+aa.slice(ba+1):aa+Array(ba-aa.length+2).join("0")}
var formatTypes={"%":(aa,ba)=>(100*aa).toFixed(ba),b:aa=>Math.round(aa).toString(2),c:aa=>aa+"",d:formatDecimal,e:(aa,ba)=>aa.toExponential(ba),f:(aa,ba)=>aa.toFixed(ba),g:(aa,ba)=>aa.toPrecision(ba),o:aa=>Math.round(aa).toString(8),p:(aa,ba)=>formatRounded(100*aa,ba),r:formatRounded,s:formatPrefixAuto,X:aa=>Math.round(aa).toString(16).toUpperCase(),x:aa=>Math.round(aa).toString(16)};function identity$2(aa){return aa}var map=Array.prototype.map,prefixes="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ");
function formatLocale(aa){function ba(aa){function ba(aa){var ba=va,da=ya,ea,ha;if("c"===ua)da=xa(aa)+da,aa="";else{aa=+aa;var ma=0>aa||0>1/aa;aa=isNaN(aa)?ka:xa(Math.abs(aa),wa);Ba&&(aa=formatTrim(aa));ma&&0===+aa&&"+"!==qa&&(ma=!1);ba=(ma?"("===qa?qa:ja:"-"===qa||"("===qa?"":qa)+ba;da=("s"===ua?prefixes[8+prefixExponent/3]:"")+da+(ma&&"("===qa?")":"");if(Aa)for(ma=-1,ea=aa.length;++ma<ea;)if(ha=aa.charCodeAt(ma),48>ha||57<ha){da=(46===ha?fa+aa.slice(ma+1):aa.slice(ma))+da;aa=aa.slice(0,ma);break}}sa&&
!ta&&(aa=ca(aa,Infinity));ha=ba.length+aa.length+da.length;ma=ha<oa?Array(oa-ha+1).join(na):"";sa&&ta&&(aa=ca(ma+aa,ma.length?oa-da.length:Infinity),ma="");switch(la){case "<":aa=ba+aa+da+ma;break;case "=":aa=ba+ma+aa+da;break;case "^":aa=ma.slice(0,ha=ma.length>>1)+ba+aa+da+ma.slice(ha);break;default:aa=ma+ba+aa+da}return ia(aa)}aa=formatSpecifier(aa);var na=aa.fill,la=aa.align,qa=aa.sign,ra=aa.symbol,ta=aa.zero,oa=aa.width,sa=aa.comma,wa=aa.precision,Ba=aa.trim,ua=aa.type;"n"===ua?(sa=!0,ua="g"):
formatTypes[ua]||(void 0===wa&&(wa=12),Ba=!0,ua="g");if(ta||"0"===na&&"="===la)ta=!0,na="0",la="=";var va="$"===ra?da:"#"===ra&&/[boxX]/.test(ua)?"0"+ua.toLowerCase():"",ya="$"===ra?ea:/[%p]/.test(ua)?ha:"",xa=formatTypes[ua],Aa=/[defgprs%]/.test(ua);wa=void 0===wa?6:/[gprs]/.test(ua)?Math.max(1,Math.min(21,wa)):Math.max(0,Math.min(20,wa));ba.toString=function(){return aa+""};return ba}var ca=void 0===aa.grouping||void 0===aa.thousands?identity$2:formatGroup(map.call(aa.grouping,Number),aa.thousands+
""),da=void 0===aa.currency?"":aa.currency[0]+"",ea=void 0===aa.currency?"":aa.currency[1]+"",fa=void 0===aa.decimal?".":aa.decimal+"",ia=void 0===aa.numerals?identity$2:formatNumerals(map.call(aa.numerals,String)),ha=void 0===aa.percent?"%":aa.percent+"",ja=void 0===aa.minus?"\u2212":aa.minus+"",ka=void 0===aa.nan?"NaN":aa.nan+"";return{format:ba,formatPrefix:function(aa,ca){var da=ba((aa=formatSpecifier(aa),aa.type="f",aa));aa=3*Math.max(-8,Math.min(8,Math.floor(exponent(ca)/3)));var ea=Math.pow(10,
-aa),fa=prefixes[8+aa/3];return function(aa){return da(ea*aa)+fa}}}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(aa){locale=formatLocale(aa);format=locale.format;formatPrefix=locale.formatPrefix;return locale}function precisionFixed(aa){return Math.max(0,-exponent(Math.abs(aa)))}function precisionPrefix(aa,ba){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(ba)/3)))-exponent(Math.abs(aa)))}
function precisionRound(aa,ba){aa=Math.abs(aa);ba=Math.abs(ba)-aa;return Math.max(0,exponent(ba)-exponent(aa))+1}function initRange(aa,ba){switch(arguments.length){case 0:break;case 1:this.range(aa);break;default:this.range(ba).domain(aa)}return this}let implicit=Symbol("implicit");
function ordinal(){function aa(aa){var fa=aa+"",ha=ba.get(fa);if(!ha){if(ea!==implicit)return ea;ba.set(fa,ha=ca.push(aa))}return da[(ha-1)%da.length]}var ba=new Map,ca=[],da=[],ea=implicit;aa.domain=function(da){if(!arguments.length)return ca.slice();ca=[];ba=new Map;for(let aa of da){let da=aa+"";ba.has(da)||ba.set(da,ca.push(aa))}return aa};aa.range=function(ba){return arguments.length?(da=Array.from(ba),aa):da.slice()};aa.unknown=function(ba){return arguments.length?(ea=ba,aa):ea};aa.copy=function(){return ordinal(ca,
da).unknown(ea)};initRange.apply(aa,arguments);return aa}
function band(){function aa(){var aa=ca().length,ba=fa<ea,qa=ba?fa:ea,ra=ba?ea:fa;ia=(ra-qa)/Math.max(1,aa-ka+2*la);ja&&(ia=Math.floor(ia));qa+=(ra-qa-ia*(aa-ka))*ma;ha=ia*(1-ka);ja&&(qa=Math.round(qa),ha=Math.round(ha));aa=range(aa).map(function(aa){return qa+ia*aa});return da(ba?aa.reverse():aa)}var ba=ordinal().unknown(void 0),ca=ba.domain,da=ba.range,ea=0,fa=1,ia,ha,ja=!1,ka=0,la=0,ma=.5;delete ba.unknown;ba.domain=function(ba){return arguments.length?(ca(ba),aa()):ca()};ba.range=function(ba){return arguments.length?
([ea,fa]=ba,ea=+ea,fa=+fa,aa()):[ea,fa]};ba.rangeRound=function(ba){return[ea,fa]=ba,ea=+ea,fa=+fa,ja=!0,aa()};ba.bandwidth=function(){return ha};ba.step=function(){return ia};ba.round=function(ba){return arguments.length?(ja=!!ba,aa()):ja};ba.padding=function(ba){return arguments.length?(ka=Math.min(1,la=+ba),aa()):ka};ba.paddingInner=function(ba){return arguments.length?(ka=Math.min(1,ba),aa()):ka};ba.paddingOuter=function(ba){return arguments.length?(la=+ba,aa()):la};ba.align=function(ba){return arguments.length?
(ma=Math.max(0,Math.min(1,ba)),aa()):ma};ba.copy=function(){return band(ca(),[ea,fa]).round(ja).paddingInner(ka).paddingOuter(la).align(ma)};return initRange.apply(aa(),arguments)}function pointish(aa){var ba=aa.copy;aa.padding=aa.paddingOuter;delete aa.paddingInner;delete aa.paddingOuter;aa.copy=function(){return pointish(ba())};return aa}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(aa){return function(){return aa}}
function number$2(aa){return+aa}var unit=[0,1];function identity$3(aa){return aa}function normalize(aa,ba){return(ba-=aa=+aa)?function(ca){return(ca-aa)/ba}:constants(isNaN(ba)?NaN:.5)}function clamper(aa,ba){if(aa>ba){var ca=aa;aa=ba;ba=ca}return function(ca){return Math.max(aa,Math.min(ba,ca))}}function bimap(aa,ba,ca){var da=aa[0];aa=aa[1];var ea=ba[0];ba=ba[1];aa<da?(da=normalize(aa,da),ea=ca(ba,ea)):(da=normalize(da,aa),ea=ca(ea,ba));return function(aa){return ea(da(aa))}}
function polymap(aa,ba,ca){var da=Math.min(aa.length,ba.length)-1,ea=Array(da),fa=Array(da),ia=-1;aa[da]<aa[0]&&(aa=aa.slice().reverse(),ba=ba.slice().reverse());for(;++ia<da;)ea[ia]=normalize(aa[ia],aa[ia+1]),fa[ia]=ca(ba[ia],ba[ia+1]);return function(ba){var ca=bisectRight(aa,ba,1,da)-1;return fa[ca](ea[ca](ba))}}function copy(aa,ba){return ba.domain(aa.domain()).range(aa.range()).interpolate(aa.interpolate()).clamp(aa.clamp()).unknown(aa.unknown())}
function transformer(){function aa(){var aa=Math.min(ca.length,da.length);ja!==identity$3&&(ja=clamper(ca[0],ca[aa-1]));ka=2<aa?polymap:bimap;la=ma=null;return ba}function ba(aa){return isNaN(aa=+aa)?ha:(la||(la=ka(ca.map(fa),da,ea)))(fa(ja(aa)))}var ca=unit,da=unit,ea=interpolate,fa,ia,ha,ja=identity$3,ka,la,ma;ba.invert=function(aa){return ja(ia((ma||(ma=ka(da,ca.map(fa),interpolateNumber)))(aa)))};ba.domain=function(ba){return arguments.length?(ca=Array.from(ba,number$2),aa()):ca.slice()};ba.range=
function(ba){return arguments.length?(da=Array.from(ba),aa()):da.slice()};ba.rangeRound=function(ba){return da=Array.from(ba),ea=interpolateRound,aa()};ba.clamp=function(ba){return arguments.length?(ja=ba?!0:identity$3,aa()):ja!==identity$3};ba.interpolate=function(ba){return arguments.length?(ea=ba,aa()):ea};ba.unknown=function(aa){return arguments.length?(ha=aa,ba):ha};return function(ba,ca){fa=ba;ia=ca;return aa()}}function continuous(){return transformer()(identity$3,identity$3)}
function tickFormat(aa,ba,ca,da){ca=tickStep(aa,ba,ca);var ea;da=formatSpecifier(null==da?",f":da);switch(da.type){case "s":return aa=Math.max(Math.abs(aa),Math.abs(ba)),null!=da.precision||isNaN(ea=precisionPrefix(ca,aa))||(da.precision=ea),formatPrefix(da,aa);case "":case "e":case "g":case "p":case "r":null!=da.precision||isNaN(ea=precisionRound(ca,Math.max(Math.abs(aa),Math.abs(ba))))||(da.precision=ea-("e"===da.type));break;case "f":case "%":null!=da.precision||isNaN(ea=precisionFixed(ca))||(da.precision=
ea-2*("%"===da.type))}return format(da)}
function linearish(aa){var ba=aa.domain;aa.ticks=function(aa){var ca=ba();return ticks(ca[0],ca[ca.length-1],null==aa?10:aa)};aa.tickFormat=function(aa,da){var ca=ba();return tickFormat(ca[0],ca[ca.length-1],null==aa?10:aa,da)};aa.nice=function(ca){null==ca&&(ca=10);var da=ba(),ea=0,fa=da.length-1,ia=da[ea],ha=da[fa],ja=10;if(ha<ia){var ka=ia;ia=ha;ha=ka;ka=ea;ea=fa;fa=ka}for(;0<ja--;){ka=tickIncrement(ia,ha,ca);if(ka===la)return da[ea]=ia,da[fa]=ha,ba(da);if(0<ka)ia=Math.floor(ia/ka)*ka,ha=Math.ceil(ha/
ka)*ka;else if(0>ka)ia=Math.ceil(ia*ka)/ka,ha=Math.floor(ha*ka)/ka;else break;var la=ka}return aa};return aa}function linear$1(){var aa=continuous();aa.copy=function(){return copy(aa,linear$1())};initRange.apply(aa,arguments);return linearish(aa)}function constant$2(aa){return function(){return aa}}var abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max$1=Math.max,min$1=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon$2=1E-12,pi$1=Math.PI,halfPi=pi$1/2,tau$1=2*pi$1;
function acos(aa){return 1<aa?0:-1>aa?pi$1:Math.acos(aa)}function asin(aa){return 1<=aa?halfPi:-1>=aa?-halfPi:Math.asin(aa)}function arcInnerRadius(aa){return aa.innerRadius}function arcOuterRadius(aa){return aa.outerRadius}function arcStartAngle(aa){return aa.startAngle}function arcEndAngle(aa){return aa.endAngle}function arcPadAngle(aa){return aa&&aa.padAngle}
function intersect(aa,ba,ca,da,ea,fa,ia,ha){ca-=aa;da-=ba;ia-=ea;ha-=fa;var ja=ha*ca-ia*da;if(!(ja*ja<epsilon$2))return ja=(ia*(ba-fa)-ha*(aa-ea))/ja,[aa+ja*ca,ba+ja*da]}
function cornerTangents(aa,ba,ca,da,ea,fa,ia){var ha=aa-ca,ja=ba-da;ia=(ia?fa:-fa)/sqrt(ha*ha+ja*ja);ja*=ia;ha*=-ia;var ka=aa+ja,la=ba+ha,ma=ca+ja,na=da+ha;ca=(ka+ma)/2;da=(la+na)/2;ba=ma-ka;aa=na-la;ia=ba*ba+aa*aa;fa=ea-fa;na=ka*na-ma*la;var pa=(0>aa?-1:1)*sqrt(max$1(0,fa*fa*ia-na*na));ka=(na*aa-ba*pa)/ia;la=(-na*ba-aa*pa)/ia;ma=(na*aa+ba*pa)/ia;ba=(-na*ba+aa*pa)/ia;aa=ka-ca;ia=la-da;ca=ma-ca;da=ba-da;aa*aa+ia*ia>ca*ca+da*da&&(ka=ma,la=ba);return{cx:ka,cy:la,x01:-ja,y01:-ha,x11:ka*(ea/fa-1),y11:la*
(ea/fa-1)}}
function arc(){function aa(){var aa,la=+ba.apply(this,arguments),ma=+ca.apply(this,arguments),na=fa.apply(this,arguments)-halfPi,pa=ia.apply(this,arguments)-halfPi,qa=abs(pa-na),ra=pa>na;ja||(ja=aa=path());if(ma<la){var ta=ma;ma=la;la=ta}if(ma>epsilon$2)if(qa>tau$1-epsilon$2)ja.moveTo(ma*cos(na),ma*sin(na)),ja.arc(0,0,ma,na,pa,!ra),la>epsilon$2&&(ja.moveTo(la*cos(pa),la*sin(pa)),ja.arc(0,0,la,pa,na,ra));else{var oa=na,sa=pa;ta=na;var wa=pa,Ba=qa,ua=qa,va=ha.apply(this,arguments)/2,ya=va>epsilon$2&&
(ea?+ea.apply(this,arguments):sqrt(la*la+ma*ma)),xa=min$1(abs(ma-la)/2,+da.apply(this,arguments)),Aa=xa,za=xa;if(ya>epsilon$2){var Da=asin(ya/la*sin(va));va=asin(ya/ma*sin(va));(Ba-=2*Da)>epsilon$2?(Da*=ra?1:-1,ta+=Da,wa-=Da):(Ba=0,ta=wa=(na+pa)/2);(ua-=2*va)>epsilon$2?(va*=ra?1:-1,oa+=va,sa-=va):(ua=0,oa=sa=(na+pa)/2)}na=ma*cos(oa);pa=ma*sin(oa);Da=la*cos(wa);va=la*sin(wa);if(xa>epsilon$2){var Ea=ma*cos(sa),Fa=ma*sin(sa),Ga=la*cos(ta),Ha=la*sin(ta),Ca;qa<pi$1&&(Ca=intersect(na,pa,Ga,Ha,Ea,Fa,Da,
va))&&(Aa=na-Ca[0],za=pa-Ca[1],qa=Ea-Ca[0],ya=Fa-Ca[1],za=1/sin(acos((Aa*qa+za*ya)/(sqrt(Aa*Aa+za*za)*sqrt(qa*qa+ya*ya)))/2),Ca=sqrt(Ca[0]*Ca[0]+Ca[1]*Ca[1]),Aa=min$1(xa,(la-Ca)/(za-1)),za=min$1(xa,(ma-Ca)/(za+1)))}ua>epsilon$2?za>epsilon$2?(oa=cornerTangents(Ga,Ha,na,pa,ma,za,ra),sa=cornerTangents(Ea,Fa,Da,va,ma,za,ra),ja.moveTo(oa.cx+oa.x01,oa.cy+oa.y01),za<xa?ja.arc(oa.cx,oa.cy,za,atan2(oa.y01,oa.x01),atan2(sa.y01,sa.x01),!ra):(ja.arc(oa.cx,oa.cy,za,atan2(oa.y01,oa.x01),atan2(oa.y11,oa.x11),!ra),
ja.arc(0,0,ma,atan2(oa.cy+oa.y11,oa.cx+oa.x11),atan2(sa.cy+sa.y11,sa.cx+sa.x11),!ra),ja.arc(sa.cx,sa.cy,za,atan2(sa.y11,sa.x11),atan2(sa.y01,sa.x01),!ra))):(ja.moveTo(na,pa),ja.arc(0,0,ma,oa,sa,!ra)):ja.moveTo(na,pa);la>epsilon$2&&Ba>epsilon$2?Aa>epsilon$2?(oa=cornerTangents(Da,va,Ea,Fa,la,-Aa,ra),sa=cornerTangents(na,pa,Ga,Ha,la,-Aa,ra),ja.lineTo(oa.cx+oa.x01,oa.cy+oa.y01),Aa<xa?ja.arc(oa.cx,oa.cy,Aa,atan2(oa.y01,oa.x01),atan2(sa.y01,sa.x01),!ra):(ja.arc(oa.cx,oa.cy,Aa,atan2(oa.y01,oa.x01),atan2(oa.y11,
oa.x11),!ra),ja.arc(0,0,la,atan2(oa.cy+oa.y11,oa.cx+oa.x11),atan2(sa.cy+sa.y11,sa.cx+sa.x11),ra),ja.arc(sa.cx,sa.cy,Aa,atan2(sa.y11,sa.x11),atan2(sa.y01,sa.x01),!ra))):ja.arc(0,0,la,wa,ta,ra):ja.lineTo(Da,va)}else ja.moveTo(0,0);ja.closePath();if(aa)return ja=null,aa+""||null}var ba=arcInnerRadius,ca=arcOuterRadius,da=constant$2(0),ea=null,fa=arcStartAngle,ia=arcEndAngle,ha=arcPadAngle,ja=null;aa.centroid=function(){var aa=(+ba.apply(this,arguments)+ +ca.apply(this,arguments))/2,da=(+fa.apply(this,
arguments)+ +ia.apply(this,arguments))/2-pi$1/2;return[cos(da)*aa,sin(da)*aa]};aa.innerRadius=function(ca){return arguments.length?(ba="function"===typeof ca?ca:constant$2(+ca),aa):ba};aa.outerRadius=function(ba){return arguments.length?(ca="function"===typeof ba?ba:constant$2(+ba),aa):ca};aa.cornerRadius=function(ba){return arguments.length?(da="function"===typeof ba?ba:constant$2(+ba),aa):da};aa.padRadius=function(ba){return arguments.length?(ea=null==ba?null:"function"===typeof ba?ba:constant$2(+ba),
aa):ea};aa.startAngle=function(ba){return arguments.length?(fa="function"===typeof ba?ba:constant$2(+ba),aa):fa};aa.endAngle=function(ba){return arguments.length?(ia="function"===typeof ba?ba:constant$2(+ba),aa):ia};aa.padAngle=function(ba){return arguments.length?(ha="function"===typeof ba?ba:constant$2(+ba),aa):ha};aa.context=function(ba){return arguments.length?(ja=null==ba?null:ba,aa):ja};return aa}function array$1(aa){return"object"===typeof aa&&"length"in aa?aa:Array.from(aa)}
function Linear(aa){this._context=aa}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(aa,ba){aa=+aa;ba=+ba;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(aa,ba):this._context.moveTo(aa,ba);break;case 1:this._point=2;default:this._context.lineTo(aa,ba)}}};
function curveLinear(aa){return new Linear(aa)}function x(aa){return aa[0]}function y(aa){return aa[1]}
function line(aa,ba){function ca(ca){var ha,ka=(ca=array$1(ca)).length,la,ma=!1,na;null==ea&&(ia=fa(na=path()));for(ha=0;ha<=ka;++ha)!(ha<ka&&da(la=ca[ha],ha,ca))===ma&&((ma=!ma)?ia.lineStart():ia.lineEnd()),ma&&ia.point(+aa(la,ha,ca),+ba(la,ha,ca));if(na)return ia=null,na+""||null}var da=constant$2(!0),ea=null,fa=curveLinear,ia=null;aa="function"===typeof aa?aa:void 0===aa?x:constant$2(aa);ba="function"===typeof ba?ba:void 0===ba?y:constant$2(ba);ca.x=function(ba){return arguments.length?(aa="function"===
typeof ba?ba:constant$2(+ba),ca):aa};ca.y=function(aa){return arguments.length?(ba="function"===typeof aa?aa:constant$2(+aa),ca):ba};ca.defined=function(aa){return arguments.length?(da="function"===typeof aa?aa:constant$2(!!aa),ca):da};ca.curve=function(aa){return arguments.length?(fa=aa,null!=ea&&(ia=fa(ea)),ca):fa};ca.context=function(aa){return arguments.length?(null==aa?ea=ia=null:ia=fa(ea=aa),ca):ea};return ca}function descending(aa,ba){return ba<aa?-1:ba>aa?1:ba>=aa?0:NaN}
function identity$4(aa){return aa}
function pie(){function aa(aa){var ha,ka=(aa=array$1(aa)).length;var la=0;var ma=Array(ka),na=Array(ka),pa=+ea.apply(this,arguments);var qa=Math.min(tau$1,Math.max(-tau$1,fa.apply(this,arguments)-pa));var ra=Math.min(Math.abs(qa)/ka,ia.apply(this,arguments)),ta=ra*(0>qa?-1:1),oa;for(ha=0;ha<ka;++ha)0<(oa=na[ma[ha]=ha]=+ba(aa[ha],ha,aa))&&(la+=oa);null!=ca?ma.sort(function(aa,ba){return ca(na[aa],na[ba])}):null!=da&&ma.sort(function(ba,ca){return da(aa[ba],aa[ca])});ha=0;for(qa=la?(qa-ka*ta)/la:0;ha<
ka;++ha,pa=sa){la=ma[ha];oa=na[la];var sa=pa+(0<oa?oa*qa:0)+ta;na[la]={data:aa[la],index:ha,value:oa,startAngle:pa,endAngle:sa,padAngle:ra}}return na}var ba=identity$4,ca=descending,da=null,ea=constant$2(0),fa=constant$2(tau$1),ia=constant$2(0);aa.value=function(ca){return arguments.length?(ba="function"===typeof ca?ca:constant$2(+ca),aa):ba};aa.sortValues=function(ba){return arguments.length?(ca=ba,da=null,aa):ca};aa.sort=function(ba){return arguments.length?(da=ba,ca=null,aa):da};aa.startAngle=
function(ba){return arguments.length?(ea="function"===typeof ba?ba:constant$2(+ba),aa):ea};aa.endAngle=function(ba){return arguments.length?(fa="function"===typeof ba?ba:constant$2(+ba),aa):fa};aa.padAngle=function(ba){return arguments.length?(ia="function"===typeof ba?ba:constant$2(+ba),aa):ia};return aa}
function t(aa,ba,ca){if(aa&&aa.length){let [da,ea]=ba;ba=Math.PI/180*ca;let fa=Math.cos(ba),ia=Math.sin(ba);aa.forEach(aa=>{let [ba,ca]=aa;aa[0]=(ba-da)*fa-(ca-ea)*ia+da;aa[1]=(ba-da)*ia+(ca-ea)*fa+ea})}}function e(aa){let ba=aa[0];aa=aa[1];return Math.sqrt(Math.pow(ba[0]-aa[0],2)+Math.pow(ba[1]-aa[1],2))}
function s(aa,ba,ca,da){let ea=ba[1]-aa[1];ba=aa[0]-ba[0];aa=ea*aa[0]+ba*aa[1];let fa=da[1]-ca[1];da=ca[0]-da[0];ca=fa*ca[0]+da*ca[1];let ia=ea*da-fa*ba;return ia?[(da*aa-ba*ca)/ia,(ea*ca-fa*aa)/ia]:null}function n(aa,ba,ca){let da=aa.length;if(3>da)return!1;let ea=[Number.MAX_SAFE_INTEGER,ca];ba=[ba,ca];ca=0;for(let fa=0;fa<da;fa++){let ia=aa[fa],ha=aa[(fa+1)%da];if(r(ia,ha,ba,ea)){if(0===a(ia,ba,ha))return o(ia,ba,ha);ca++}}return 1==ca%2}
function o(aa,ba,ca){return ba[0]<=Math.max(aa[0],ca[0])&&ba[0]>=Math.min(aa[0],ca[0])&&ba[1]<=Math.max(aa[1],ca[1])&&ba[1]>=Math.min(aa[1],ca[1])}function a(aa,ba,ca){aa=(ba[1]-aa[1])*(ca[0]-ba[0])-(ba[0]-aa[0])*(ca[1]-ba[1]);return 0===aa?0:0<aa?1:2}function r(aa,ba,ca,da){let ea=a(aa,ba,ca),fa=a(aa,ba,da),ia=a(ca,da,aa),ha=a(ca,da,ba);return ea!==fa&&ia!==ha||!(0!==ea||!o(aa,ca,ba))||!(0!==fa||!o(aa,da,ba))||!(0!==ia||!o(ca,aa,da))||!(0!==ha||!o(ca,ba,da))}
function h(aa,ba){let ca=[0,0],da=Math.round(ba.hachureAngle+90);da&&t(aa,ca,da);ba=function(aa,ba){var ca=[...aa];ca[0].join(",")!==ca[ca.length-1].join(",")&&ca.push([ca[0][0],ca[0][1]]);aa=[];if(ca&&2<ca.length){let ea=ba.hachureGap;0>ea&&(ea=4*ba.strokeWidth);ea=Math.max(ea,.1);ba=[];for(var da=0;da<ca.length-1;da++){const aa=ca[da],ea=ca[da+1];if(aa[1]!==ea[1]){const ca=Math.min(aa[1],ea[1]);ba.push({ymin:ca,ymax:Math.max(aa[1],ea[1]),x:ca===aa[1]?aa[0]:ea[0],islope:(ea[0]-aa[0])/(ea[1]-aa[1])})}}if(ba.sort((aa,
ba)=>aa.ymin<ba.ymin?-1:aa.ymin>ba.ymin?1:aa.x<ba.x?-1:aa.x>ba.x?1:aa.ymax===ba.ymax?0:(aa.ymax-ba.ymax)/Math.abs(aa.ymax-ba.ymax)),!ba.length)return aa;let fa=[],ha=ba[0].ymin;for(;fa.length||ba.length;){if(ba.length){ca=-1;for(da=0;da<ba.length&&!(ba[da].ymin>ha);da++)ca=da;ba.splice(0,ca+1).forEach(aa=>{fa.push({s:ha,edge:aa})})}if(fa=fa.filter(aa=>!(aa.edge.ymax<=ha)),fa.sort((aa,ba)=>aa.edge.x===ba.edge.x?0:(aa.edge.x-ba.edge.x)/Math.abs(aa.edge.x-ba.edge.x)),1<fa.length)for(ca=0;ca<fa.length;ca+=
2){da=ca+1;if(da>=fa.length)break;aa.push([[Math.round(fa[ca].edge.x),ha],[Math.round(fa[da].edge.x),ha]])}ha+=ea;fa.forEach(aa=>{aa.edge.x+=ea*aa.edge.islope})}}return aa}(aa,ba);return da&&(t(aa,ca,-da),function(aa,ba,ca){let da=[];aa.forEach(aa=>da.push(...aa));t(da,ba,ca)}(ba,ca,-da)),ba}
class i{constructor(aa){this.helper=aa}fillPolygon(aa,ba){return this._fillPolygon(aa,ba)}_fillPolygon(aa,ba,ca=!1){let da=h(aa,ba);ca&&(aa=this.connectingLines(aa,da),da=da.concat(aa));return{type:"fillSketch",ops:this.renderLines(da,ba)}}renderLines(aa,ba){let ca=[];for(let da of aa)ca.push(...this.helper.doubleLineOps(da[0][0],da[0][1],da[1][0],da[1][1],ba));return ca}connectingLines(aa,ba){let ca=[];if(1<ba.length)for(let ea=1;ea<ba.length;ea++){var da=ba[ea-1];3>e(da)||(da=[ba[ea][0],da[1]],
3<e(da)&&(da=this.splitOnIntersections(aa,da),ca.push(...da)))}return ca}midPointInPolygon(aa,ba){return n(aa,(ba[0][0]+ba[1][0])/2,(ba[0][1]+ba[1][1])/2)}splitOnIntersections(aa,ba){var ca=Math.max(5,.1*e(ba)),da=[];for(var ea=0;ea<aa.length;ea++){var fa=aa[ea],ia=aa[(ea+1)%aa.length];if(r(fa,ia,...ba)&&(fa=s(fa,ia,ba[0],ba[1]))){ia=e([fa,ba[0]]);let aa=e([fa,ba[1]]);ia>ca&&aa>ca&&da.push({point:fa,distance:ia})}}if(1<da.length){ca=da.sort((aa,ba)=>aa.distance-ba.distance).map(aa=>aa.point);if(n(aa,
...ba[0])||ca.shift(),n(aa,...ba[1])||ca.pop(),1>=ca.length)return this.midPointInPolygon(aa,ba)?[ba]:[];ba=[ba[0],...ca,ba[1]];ca=[];for(da=0;da<ba.length-1;da+=2)ea=[ba[da],ba[da+1]],this.midPointInPolygon(aa,ea)&&ca.push(ea);return ca}return this.midPointInPolygon(aa,ba)?[ba]:[]}}class c extends i{fillPolygon(aa,ba){return this._fillPolygon(aa,ba,!0)}}
class l extends i{fillPolygon(aa,ba){let ca=this._fillPolygon(aa,ba);ba=Object.assign({},ba,{hachureAngle:ba.hachureAngle+90});aa=this._fillPolygon(aa,ba);return ca.ops=ca.ops.concat(aa.ops),ca}}
class u{constructor(aa){this.helper=aa}fillPolygon(aa,ba){aa=h(aa,ba=Object.assign({},ba,{curveStepCount:4,hachureAngle:0,roughness:1}));return this.dotsOnLines(aa,ba)}dotsOnLines(aa,ba){let ca=[],da=ba.hachureGap;0>da&&(da=4*ba.strokeWidth);da=Math.max(da,.1);let ea=ba.fillWeight;0>ea&&(ea=ba.strokeWidth/2);let fa=da/4;for(let ka of aa){var ia=e(ka);aa=Math.ceil(ia/da)-1;ia-=aa*da;let la=(ka[0][0]+ka[1][0])/2-da/4,ma=Math.min(ka[0][1],ka[1][1]);for(let ka=0;ka<aa;ka++){var ha=ma+ia+ka*da,ja=this.helper.randOffsetWithRange(la-
fa,la+fa,ba);ha=this.helper.randOffsetWithRange(ha-fa,ha+fa,ba);ja=this.helper.ellipse(ja,ha,ea,ea,ba);ca.push(...ja.ops)}}return{type:"fillSketch",ops:ca}}}
class f{constructor(aa){this.helper=aa}fillPolygon(aa,ba){aa=h(aa,ba);return{type:"fillSketch",ops:this.dashedLine(aa,ba)}}dashedLine(aa,ba){let ca=0>ba.dashOffset?0>ba.hachureGap?4*ba.strokeWidth:ba.hachureGap:ba.dashOffset,da=0>ba.dashGap?0>ba.hachureGap?4*ba.strokeWidth:ba.hachureGap:ba.dashGap,ea=[];return aa.forEach(aa=>{var fa=e(aa);let ha=Math.floor(fa/(ca+da));fa=(fa+da-ha*(ca+da))/2;let ja=aa[0];var ka=aa[1];ja[0]>ka[0]&&(ja=aa[1],ka=aa[0]);aa=Math.atan((ka[1]-ja[1])/(ka[0]-ja[0]));for(ka=
0;ka<ha;ka++){var la=ka*(ca+da),ma=la+ca;la=[ja[0]+la*Math.cos(aa)+fa*Math.cos(aa),ja[1]+la*Math.sin(aa)+fa*Math.sin(aa)];ma=[ja[0]+ma*Math.cos(aa)+fa*Math.cos(aa),ja[1]+ma*Math.sin(aa)+fa*Math.sin(aa)];ea.push(...this.helper.doubleLineOps(la[0],la[1],ma[0],ma[1],ba))}}),ea}}
class p{constructor(aa){this.helper=aa}fillPolygon(aa,ba){let ca=0>ba.hachureGap?4*ba.strokeWidth:ba.hachureGap,da=0>ba.zigzagOffset?ca:ba.zigzagOffset;aa=h(aa,ba=Object.assign({},ba,{hachureGap:ca+da}));return{type:"fillSketch",ops:this.zigzagLines(aa,da,ba)}}zigzagLines(aa,ba,ca){let da=[];return aa.forEach(aa=>{var ea=e(aa);ea=Math.round(ea/(2*ba));let ia=aa[0];var ha=aa[1];ia[0]>ha[0]&&(ia=aa[1],ha=aa[0]);aa=Math.atan((ha[1]-ia[1])/(ha[0]-ia[0]));for(ha=0;ha<ea;ha++){var ja=2*ha*ba,ka=2*(ha+1)*
ba,la=Math.sqrt(2*Math.pow(ba,2));ja=[ia[0]+ja*Math.cos(aa),ia[1]+ja*Math.sin(aa)];ka=[ia[0]+ka*Math.cos(aa),ia[1]+ka*Math.sin(aa)];la=[ja[0]+la*Math.cos(aa+Math.PI/4),ja[1]+la*Math.sin(aa+Math.PI/4)];da.push(...this.helper.doubleLineOps(ja[0],ja[1],la[0],la[1],ca),...this.helper.doubleLineOps(la[0],la[1],ka[0],ka[1],ca))}}),da}}let d={};class g{constructor(aa){this.seed=aa}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}
let M={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function k(aa,ba){return aa.type===ba}
function b(aa){let ba=[];a:{var ca=aa;for(var da=[];""!==ca;){if(!ca.match(/^([ \t\r\n,]+)/))if(ca.match(/^([aAcChHlLmMqQsStTvVzZ])/))da[da.length]={type:0,text:RegExp.$1};else{if(!ca.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/)){ca=[];break a}da[da.length]={type:1,text:""+parseFloat(RegExp.$1)}}ca=ca.substr(RegExp.$1.length)}ca=(da[da.length]={type:2,text:""},da)}da="BOD";let ea=0;for(var fa=ca[ea];!k(fa,2);){let ia=0,ha=[];if("BOD"===da){if("M"!==fa.text&&"m"!==fa.text)return b("M0,0"+
aa);ea++;ia=M[fa.text];da=fa.text}else k(fa,1)?ia=M[da]:(ea++,ia=M[fa.text],da=fa.text);if(!(ea+ia<ca.length))throw Error("Path data ended short");for(fa=ea;fa<ea+ia;fa++){let aa=ca[fa];if(!k(aa,1))throw Error("Param not a number: "+da+","+aa.text);ha[ha.length]=+aa.text}if("number"!=typeof M[da])throw Error("Bad segment: "+da);ba.push({key:da,data:ha});ea+=ia;fa=ca[ea];"M"===da&&(da="L");"m"===da&&(da="l")}return ba}
function y$1(aa){let ba=0,ca=0,da=0,ea=0,fa=[];for(let {key:ia,data:ha}of aa)switch(ia){case "M":fa.push({key:"M",data:[...ha]});[ba,ca]=ha;[da,ea]=ha;break;case "m":ba+=ha[0];ca+=ha[1];fa.push({key:"M",data:[ba,ca]});da=ba;ea=ca;break;case "L":fa.push({key:"L",data:[...ha]});[ba,ca]=ha;break;case "l":ba+=ha[0];ca+=ha[1];fa.push({key:"L",data:[ba,ca]});break;case "C":fa.push({key:"C",data:[...ha]});ba=ha[4];ca=ha[5];break;case "c":aa=ha.map((aa,da)=>da%2?aa+ca:aa+ba);fa.push({key:"C",data:aa});ba=
aa[4];ca=aa[5];break;case "Q":fa.push({key:"Q",data:[...ha]});ba=ha[2];ca=ha[3];break;case "q":aa=ha.map((aa,da)=>da%2?aa+ca:aa+ba);fa.push({key:"Q",data:aa});ba=aa[2];ca=aa[3];break;case "A":fa.push({key:"A",data:[...ha]});ba=ha[5];ca=ha[6];break;case "a":ba+=ha[5];ca+=ha[6];fa.push({key:"A",data:[ha[0],ha[1],ha[2],ha[3],ha[4],ba,ca]});break;case "H":fa.push({key:"H",data:[...ha]});ba=ha[0];break;case "h":ba+=ha[0];fa.push({key:"H",data:[ba]});break;case "V":fa.push({key:"V",data:[...ha]});ca=ha[0];
break;case "v":ca+=ha[0];fa.push({key:"V",data:[ca]});break;case "S":fa.push({key:"S",data:[...ha]});ba=ha[2];ca=ha[3];break;case "s":aa=ha.map((aa,da)=>da%2?aa+ca:aa+ba);fa.push({key:"S",data:aa});ba=aa[2];ca=aa[3];break;case "T":fa.push({key:"T",data:[...ha]});ba=ha[0];ca=ha[1];break;case "t":ba+=ha[0];ca+=ha[1];fa.push({key:"T",data:[ba,ca]});break;case "Z":case "z":fa.push({key:"Z",data:[]}),ba=da,ca=ea}return fa}
function m(aa){let ba=[];var ca="";let da=0,ea=0,fa=0,ia=0,ha=0,ja=0;for(let {key:la,data:ma}of aa){switch(la){case "M":ba.push({key:"M",data:[...ma]});[da,ea]=ma;[fa,ia]=ma;break;case "C":ba.push({key:"C",data:[...ma]});da=ma[4];ea=ma[5];ha=ma[2];ja=ma[3];break;case "L":ba.push({key:"L",data:[...ma]});[da,ea]=ma;break;case "H":da=ma[0];ba.push({key:"L",data:[da,ea]});break;case "V":ea=ma[0];ba.push({key:"L",data:[da,ea]});break;case "S":var ka=aa=0;"C"===ca||"S"===ca?(aa=da+(da-ha),ka=ea+(ea-ja)):
(aa=da,ka=ea);ba.push({key:"C",data:[aa,ka,...ma]});ha=ma[0];ja=ma[1];da=ma[2];ea=ma[3];break;case "T":{let [fa,ia]=ma;ka=aa=0;"Q"===ca||"T"===ca?(aa=da+(da-ha),ka=ea+(ea-ja)):(aa=da,ka=ea);ba.push({key:"C",data:[da+2*(aa-da)/3,ea+2*(ka-ea)/3,fa+2*(aa-fa)/3,ia+2*(ka-ia)/3,fa,ia]});ha=aa;ja=ka;da=fa;ea=ia;break}case "Q":{let [aa,ca,fa,ia]=ma;ba.push({key:"C",data:[da+2*(aa-da)/3,ea+2*(ca-ea)/3,fa+2*(aa-fa)/3,ia+2*(ca-ia)/3,fa,ia]});ha=aa;ja=ca;da=fa;ea=ia;break}case "A":{ca=Math.abs(ma[0]);aa=Math.abs(ma[1]);
ka=ma[2];let fa=ma[3],ha=ma[4],ia=ma[5],ja=ma[6];if(0===ca||0===aa)ba.push({key:"C",data:[da,ea,ia,ja,ia,ja]}),da=ia,ea=ja;else if(da!==ia||ea!==ja)P(da,ea,ia,ja,ca,aa,ka,fa,ha).forEach(function(aa){ba.push({key:"C",data:aa})}),da=ia,ea=ja;break}case "Z":ba.push({key:"Z",data:[]}),da=fa,ea=ia}ca=la}return ba}function w(aa,ba,ca){return[aa*Math.cos(ca)-ba*Math.sin(ca),aa*Math.sin(ca)+ba*Math.cos(ca)]}
function P(aa,ba,ca,da,ea,fa,ia,ha,ja,ka){let la=(ma=ia,Math.PI*ma/180);var ma;ma=[];if(ka)[ha,na,pa,qa]=ka;else{[aa,ba]=w(aa,ba,-la);[ca,da]=w(ca,da,-la);var na=(aa-ca)/2;var pa=(ba-da)/2;var qa=na*na/(ea*ea)+pa*pa/(fa*fa);1<qa&&(qa=Math.sqrt(qa),ea*=qa,fa*=qa);qa=ea*ea;var ra=fa*fa;ha=(ha===ja?-1:1)*Math.sqrt(Math.abs((qa*ra-qa*pa*pa-ra*na*na)/(qa*pa*pa+ra*na*na)));pa=ha*ea*pa/fa+(aa+ca)/2;qa=ha*-fa*na/ea+(ba+da)/2;ha=Math.asin(parseFloat(((ba-qa)/fa).toFixed(9)));na=Math.asin(parseFloat(((da-qa)/
fa).toFixed(9)));aa<pa&&(ha=Math.PI-ha);ca<pa&&(na=Math.PI-na);0>ha&&(ha=2*Math.PI+ha);0>na&&(na=2*Math.PI+na);ja&&ha>na&&(ha-=2*Math.PI);!ja&&na>ha&&(na-=2*Math.PI)}if(Math.abs(na-ha)>120*Math.PI/180){ma=na;ra=ca;let aa=da;na=ja&&na>ha?ha+120*Math.PI/180:ha+120*Math.PI/180*-1;ma=P(ca=pa+ea*Math.cos(na),da=qa+fa*Math.sin(na),ra,aa,ea,fa,ia,0,ja,[na,ma,pa,qa])}ia=Math.tan((na-ha)/4);ea=4/3*ea*ia;ia*=4/3*fa;fa=[aa,ba];aa=[aa+ea*Math.sin(ha),ba-ia*Math.cos(ha)];ba=[ca+ea*Math.sin(na),da-ia*Math.cos(na)];
ca=[ca,da];if(aa[0]=2*fa[0]-aa[0],aa[1]=2*fa[1]-aa[1],ka)return[aa,ba,ca].concat(ma);ma=[aa,ba,ca].concat(ma);ka=[];for(ca=0;ca<ma.length;ca+=3)da=w(ma[ca][0],ma[ca][1],la),aa=w(ma[ca+1][0],ma[ca+1][1],la),ba=w(ma[ca+2][0],ma[ca+2][1],la),ka.push([da[0],da[1],aa[0],aa[1],ba[0],ba[1]]);return ka}
let x$1={randOffset:function(aa,ba){return W(aa,ba)},randOffsetWithRange:function(aa,ba,ca){return E(aa,ba,ca)},ellipse:function(aa,ba,ca,da,ea){ca=T(ca,da,ea);return I(aa,ba,ea,ca).opset},doubleLineOps:function(aa,ba,ca,da,ea){return z(aa,ba,ca,da,ea,!0)}};function v(aa,ba,ca,da,ea){return{type:"path",ops:z(aa,ba,ca,da,ea)}}
function O(aa,ba,ca){let da=(aa||[]).length;if(2<da){let ea=[];for(let ba=0;ba<da-1;ba++)ea.push(...z(aa[ba][0],aa[ba][1],aa[ba+1][0],aa[ba+1][1],ca));return ba&&ea.push(...z(aa[da-1][0],aa[da-1][1],aa[0][0],aa[0][1],ca)),{type:"path",ops:ea}}return 2===da?v(aa[0][0],aa[0][1],aa[1][0],aa[1][1],ca):{type:"path",ops:[]}}function S(aa,ba,ca,da,ea){return O([[aa,ba],[aa+ca,ba],[aa+ca,ba+da],[aa,ba+da]],!0,ea)}
function L(aa,ba){let ca=$(aa,1+.2*ba.roughness,ba);if(!ba.disableMultiStroke){var da=1.5*(1+.22*ba.roughness);{const aa=Object.assign({},ba);aa.randomizer=void 0;ba.seed&&(aa.seed=ba.seed+1);ba=aa}aa=$(aa,da,ba);ca=ca.concat(aa)}return{type:"path",ops:ca}}
function T(aa,ba,ca){let da=2*Math.PI/Math.max(ca.curveStepCount,ca.curveStepCount/Math.sqrt(200)*Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(aa/2,2)+Math.pow(ba/2,2))/2)));aa=Math.abs(aa/2);ba=Math.abs(ba/2);let ea=1-ca.curveFitting;return aa+=W(aa*ea,ca),ba+=W(ba*ea,ca),{increment:da,rx:aa,ry:ba}}
function I(aa,ba,ca,da){let [ea,fa]=q(da.increment,aa,ba,da.rx,da.ry,1,da.increment*E(.1,E(.4,1,ca),ca),ca),ia=G(ea,null,ca);ca.disableMultiStroke||([aa]=q(da.increment,aa,ba,da.rx,da.ry,1.5,0,ca),ca=G(aa,null,ca),ia=ia.concat(ca));return{estimatedPoints:fa,opset:{type:"path",ops:ia}}}
function A(aa,ba,ca,da,ea,fa,ia,ha,ja){ca=Math.abs(ca/2);da=Math.abs(da/2);ca+=W(.01*ca,ja);for(da+=W(.01*da,ja);0>ea;)ea+=2*Math.PI,fa+=2*Math.PI;fa-ea>2*Math.PI&&(ea=0,fa=2*Math.PI);var ka=Math.min(2*Math.PI/ja.curveStepCount/2,(fa-ea)/2);let la=F(ka,aa,ba,ca,da,ea,fa,1,ja);ja.disableMultiStroke||(ka=F(ka,aa,ba,ca,da,ea,fa,1.5,ja),la.push(...ka));return ia&&(ha?la.push(...z(aa,ba,aa+ca*Math.cos(ea),ba+da*Math.sin(ea),ja),...z(aa,ba,aa+ca*Math.cos(fa),ba+da*Math.sin(fa),ja)):la.push({op:"lineTo",
data:[aa,ba]},{op:"lineTo",data:[aa+ca*Math.cos(ea),ba+da*Math.sin(ea)]})),{type:"path",ops:la}}function _(aa,ba){let ca=[];if(aa.length){let da=ba.maxRandomnessOffset||0,ea=aa.length;if(2<ea){ca.push({op:"move",data:[aa[0][0]+W(da,ba),aa[0][1]+W(da,ba)]});for(let fa=1;fa<ea;fa++)ca.push({op:"lineTo",data:[aa[fa][0]+W(da,ba),aa[fa][1]+W(da,ba)]})}}return{type:"fillPath",ops:ca}}
function C(aa,ba){{var ca=x$1;let aa=ba.fillStyle||"hachure";if(!d[aa])switch(aa){case "zigzag":d[aa]||(d[aa]=new c(ca));break;case "cross-hatch":d[aa]||(d[aa]=new l(ca));break;case "dots":d[aa]||(d[aa]=new u(ca));break;case "dashed":d[aa]||(d[aa]=new f(ca));break;case "zigzag-line":d[aa]||(d[aa]=new p(ca));break;default:aa="hachure",d[aa]||(d[aa]=new i(ca))}ca=d[aa]}return ca.fillPolygon(aa,ba)}function D(aa){return aa.randomizer||(aa.randomizer=new g(aa.seed||0)),aa.randomizer.next()}
function E(aa,ba,ca,da=1){return ca.roughness*da*(D(ca)*(ba-aa)+aa)}function W(aa,ba,ca=1){return E(-aa,aa,ba,ca)}function z(aa,ba,ca,da,ea,fa=!1){let ia=fa?ea.disableMultiStrokeFill:ea.disableMultiStroke;fa=R(aa,ba,ca,da,ea,!0,!1);if(ia)return fa;aa=R(aa,ba,ca,da,ea,!0,!0);return fa.concat(aa)}
function R(aa,ba,ca,da,ea,fa,ia){var ha=Math.pow(aa-ca,2)+Math.pow(ba-da,2),ja=Math.sqrt(ha);let ka;ka=200>ja?1:500<ja?.4:-.0016668*ja+1.233334;let la=ea.maxRandomnessOffset||0;la*la*100>ha&&(la=ja/10);ha=la/2;ja=.2+.2*D(ea);let ma=ea.bowing*ea.maxRandomnessOffset*(da-ba)/200,na=ea.bowing*ea.maxRandomnessOffset*(aa-ca)/200;ma=W(ma,ea,ka);na=W(na,ea,ka);let pa=[];return fa&&(ia?pa.push({op:"move",data:[aa+W(ha,ea,ka),ba+W(ha,ea,ka)]}):pa.push({op:"move",data:[aa+W(la,ea,ka),ba+W(la,ea,ka)]})),ia?pa.push({op:"bcurveTo",
data:[ma+aa+(ca-aa)*ja+W(ha,ea,ka),na+ba+(da-ba)*ja+W(ha,ea,ka),ma+aa+2*(ca-aa)*ja+W(ha,ea,ka),na+ba+2*(da-ba)*ja+W(ha,ea,ka),ca+W(ha,ea,ka),da+W(ha,ea,ka)]}):pa.push({op:"bcurveTo",data:[ma+aa+(ca-aa)*ja+W(la,ea,ka),na+ba+(da-ba)*ja+W(la,ea,ka),ma+aa+2*(ca-aa)*ja+W(la,ea,ka),na+ba+2*(da-ba)*ja+W(la,ea,ka),ca+W(la,ea,ka),da+W(la,ea,ka)]}),pa}
function $(aa,ba,ca){let da=[];da.push([aa[0][0]+W(ba,ca),aa[0][1]+W(ba,ca)]);da.push([aa[0][0]+W(ba,ca),aa[0][1]+W(ba,ca)]);for(let ea=1;ea<aa.length;ea++)da.push([aa[ea][0]+W(ba,ca),aa[ea][1]+W(ba,ca)]),ea===aa.length-1&&da.push([aa[ea][0]+W(ba,ca),aa[ea][1]+W(ba,ca)]);return G(da,null,ca)}
function G(aa,ba,ca){let da=aa.length,ea=[];if(3<da){let fa=[],ia=1-ca.curveTightness;ea.push({op:"move",data:[aa[1][0],aa[1][1]]});for(let ba=1;ba+2<da;ba++){let ca=aa[ba];fa[0]=[ca[0],ca[1]];fa[1]=[ca[0]+(ia*aa[ba+1][0]-ia*aa[ba-1][0])/6,ca[1]+(ia*aa[ba+1][1]-ia*aa[ba-1][1])/6];fa[2]=[aa[ba+1][0]+(ia*aa[ba][0]-ia*aa[ba+2][0])/6,aa[ba+1][1]+(ia*aa[ba][1]-ia*aa[ba+2][1])/6];fa[3]=[aa[ba+1][0],aa[ba+1][1]];ea.push({op:"bcurveTo",data:[fa[1][0],fa[1][1],fa[2][0],fa[2][1],fa[3][0],fa[3][1]]})}ba&&2===
ba.length&&(aa=ca.maxRandomnessOffset,ea.push({op:"lineTo",data:[ba[0]+W(aa,ca),ba[1]+W(aa,ca)]}))}else 3===da?(ea.push({op:"move",data:[aa[1][0],aa[1][1]]}),ea.push({op:"bcurveTo",data:[aa[1][0],aa[1][1],aa[2][0],aa[2][1],aa[2][0],aa[2][1]]})):2===da&&ea.push(...z(aa[0][0],aa[0][1],aa[1][0],aa[1][1],ca));return ea}
function q(aa,ba,ca,da,ea,fa,ia,ha){let ja=[],ka=[],la=W(.5,ha)-Math.PI/2;ka.push([W(fa,ha)+ba+.9*da*Math.cos(la-aa),W(fa,ha)+ca+.9*ea*Math.sin(la-aa)]);for(let ia=la;ia<2*Math.PI+la-.01;ia+=aa){let aa=[W(fa,ha)+ba+da*Math.cos(ia),W(fa,ha)+ca+ea*Math.sin(ia)];ja.push(aa);ka.push(aa)}return ka.push([W(fa,ha)+ba+da*Math.cos(la+2*Math.PI+.5*ia),W(fa,ha)+ca+ea*Math.sin(la+2*Math.PI+.5*ia)]),ka.push([W(fa,ha)+ba+.98*da*Math.cos(la+ia),W(fa,ha)+ca+.98*ea*Math.sin(la+ia)]),ka.push([W(fa,ha)+ba+.9*da*Math.cos(la+
.5*ia),W(fa,ha)+ca+.9*ea*Math.sin(la+.5*ia)]),[ka,ja]}function F(aa,ba,ca,da,ea,fa,ia,ha,ja){var ka=fa+W(.1,ja);fa=[];for(fa.push([W(ha,ja)+ba+.9*da*Math.cos(ka-aa),W(ha,ja)+ca+.9*ea*Math.sin(ka-aa)]);ka<=ia;ka+=aa)fa.push([W(ha,ja)+ba+da*Math.cos(ka),W(ha,ja)+ca+ea*Math.sin(ka)]);return fa.push([ba+da*Math.cos(ia),ca+ea*Math.sin(ia)]),fa.push([ba+da*Math.cos(ia),ca+ea*Math.sin(ia)]),G(fa,null,ja)}
function j(aa,ba,ca,da,ea,fa,ia,ha){let ja=[],ka=[ha.maxRandomnessOffset||1,(ha.maxRandomnessOffset||1)+.3],la,ma=ha.disableMultiStroke?1:2;for(let na=0;na<ma;na++)0===na?ja.push({op:"move",data:[ia[0],ia[1]]}):ja.push({op:"move",data:[ia[0]+W(ka[0],ha),ia[1]+W(ka[0],ha)]}),la=[ea+W(ka[na],ha),fa+W(ka[na],ha)],ja.push({op:"bcurveTo",data:[aa+W(ka[na],ha),ba+W(ka[na],ha),ca+W(ka[na],ha),da+W(ka[na],ha),la[0],la[1]]});return ja}function N(aa){return[...aa]}
function Z(aa,ba){return Math.pow(aa[0]-ba[0],2)+Math.pow(aa[1]-ba[1],2)}function Q(aa,ba,ca){var da=Z(ba,ca);if(0===da)return Z(aa,ba);da=((aa[0]-ba[0])*(ca[0]-ba[0])+(aa[1]-ba[1])*(ca[1]-ba[1]))/da;return da=Math.max(0,Math.min(1,da)),Z(aa,H(ba,ca,da))}function H(aa,ba,ca){return[aa[0]+(ba[0]-aa[0])*ca,aa[1]+(ba[1]-aa[1])*ca]}
function V(aa,ba,ca,da){da=da||[];{var ea=aa[ba+0],fa=aa[ba+1];var ia=aa[ba+2];let ca=aa[ba+3];var ha=3*fa[0]-2*ea[0]-ca[0];ha*=ha;fa=3*fa[1]-2*ea[1]-ca[1];fa*=fa;let da=3*ia[0]-2*ca[0]-ea[0];da*=da;ea=3*ia[1]-2*ca[1]-ea[1];ia=(ea*=ea,ha<da&&(ha=da),fa<ea&&(fa=ea),ha+fa)}ia<ca?(ca=aa[ba+0],da.length?1<(ja=da[da.length-1],ka=ca,Math.sqrt(Z(ja,ka)))&&da.push(ca):da.push(ca),da.push(aa[ba+3])):(ja=aa[ba+0],ha=aa[ba+1],ka=aa[ba+2],aa=aa[ba+3],ba=H(ja,ha,.5),fa=H(ha,ka,.5),ka=H(ka,aa,.5),ha=H(ba,fa,.5),
fa=H(fa,ka,.5),ea=H(ha,fa,.5),V([ja,ba,ha,ea],0,ca,da),V([ea,fa,ka,aa],0,ca,da));var ja,ka;return da}function B(aa,ba){return X(aa,0,aa.length,ba)}function X(aa,ba,ca,da,ea){ea=ea||[];let fa=aa[ba],ia=aa[ca-1],ha=0,ja=1;for(let da=ba+1;da<ca-1;++da){let ba=Q(aa[da],fa,ia);ba>ha&&(ha=ba,ja=da)}return Math.sqrt(ha)>da?(X(aa,ba,ja+1,da,ea),X(aa,ja,ca,da,ea)):(ea.length||ea.push(fa),ea.push(ia)),ea}
function J(aa,ba=.15,ca){let da=[],ea=(aa.length-1)/3;for(let ca=0;ca<ea;ca++)V(aa,3*ca,ba,da);return ca&&0<ca?X(da,0,da.length,ca):da}let K="none";
class U{constructor(aa){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,combineNestedSvgPaths:!1,disableMultiStroke:!1,disableMultiStrokeFill:!1};this.config=aa||{};this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(aa){return aa?
Object.assign({},this.defaultOptions,aa):this.defaultOptions}_d(aa,ba,ca){return{shape:aa,sets:ba||[],options:ca||this.defaultOptions}}line(aa,ba,ca,da,ea){ea=this._o(ea);return this._d("line",[v(aa,ba,ca,da,ea)],ea)}rectangle(aa,ba,ca,da,ea){ea=this._o(ea);let fa=[],ia=S(aa,ba,ca,da,ea);ea.fill&&(aa=[[aa,ba],[aa+ca,ba],[aa+ca,ba+da],[aa,ba+da]],"solid"===ea.fillStyle?fa.push(_(aa,ea)):fa.push(C(aa,ea)));return ea.stroke!==K&&fa.push(ia),this._d("rectangle",fa,ea)}ellipse(aa,ba,ca,da,ea){ea=this._o(ea);
let fa=[];da=T(ca,da,ea);ca=I(aa,ba,ea,da);ea.fill&&("solid"===ea.fillStyle?(aa=I(aa,ba,ea,da).opset,aa.type="fillPath",fa.push(aa)):fa.push(C(ca.estimatedPoints,ea)));return ea.stroke!==K&&fa.push(ca.opset),this._d("ellipse",fa,ea)}circle(aa,ba,ca,da){aa=this.ellipse(aa,ba,ca,ca,da);return aa.shape="circle",aa}linearPath(aa,ba){ba=this._o(ba);return this._d("linearPath",[O(aa,!1,ba)],ba)}arc(aa,ba,ca,da,ea,fa,ia=!1,ha){ha=this._o(ha);let ja=[],ka=A(aa,ba,ca,da,ea,fa,ia,!0,ha);ia&&ha.fill&&("solid"===
ha.fillStyle?(aa=A(aa,ba,ca,da,ea,fa,!0,!1,ha),aa.type="fillPath",ja.push(aa)):ja.push(function(aa,ba,ca,da,ea,fa,ia){ca=Math.abs(ca/2);da=Math.abs(da/2);ca+=W(.01*ca,ia);for(da+=W(.01*da,ia);0>ea;)ea+=2*Math.PI,fa+=2*Math.PI;fa-ea>2*Math.PI&&(ea=0,fa=2*Math.PI);let ha=(fa-ea)/ia.curveStepCount,ja=[];for(;ea<=fa;ea+=ha)ja.push([aa+ca*Math.cos(ea),ba+da*Math.sin(ea)]);return ja.push([aa+ca*Math.cos(fa),ba+da*Math.sin(fa)]),ja.push([aa,ba]),C(ja,ia)}(aa,ba,ca,da,ea,fa,ha)));return ha.stroke!==K&&ja.push(ka),
this._d("arc",ja,ha)}curve(aa,ba){ba=this._o(ba);let ca=[],da=L(aa,ba);ba.fill&&ba.fill!==K&&3<=aa.length&&(aa=J(function(aa,ba=0){var ca=aa.length;if(3>ca)throw Error("A curve must have at least three points.");const da=[];if(3===ca)da.push(N(aa[0]),N(aa[1]),N(aa[2]),N(aa[2]));else{ca=[];ca.push(aa[0],aa[0]);for(var ea=1;ea<aa.length;ea++)ca.push(aa[ea]),ea===aa.length-1&&ca.push(aa[ea]);aa=[];ba=1-ba;da.push(N(ca[0]));for(ea=1;ea+2<ca.length;ea++){const fa=ca[ea];aa[0]=[fa[0],fa[1]];aa[1]=[fa[0]+
(ba*ca[ea+1][0]-ba*ca[ea-1][0])/6,fa[1]+(ba*ca[ea+1][1]-ba*ca[ea-1][1])/6];aa[2]=[ca[ea+1][0]+(ba*ca[ea][0]-ba*ca[ea+2][0])/6,ca[ea+1][1]+(ba*ca[ea][1]-ba*ca[ea+2][1])/6];aa[3]=[ca[ea+1][0],ca[ea+1][1]];da.push(aa[1],aa[2],aa[3])}}return da}(aa),10,(1+ba.roughness)/2),"solid"===ba.fillStyle?ca.push(_(aa,ba)):ca.push(C(aa,ba)));return ba.stroke!==K&&ca.push(da),this._d("curve",ca,ba)}polygon(aa,ba){ba=this._o(ba);let ca=[],da=O(aa,!0,ba);return ba.fill&&("solid"===ba.fillStyle?ca.push(_(aa,ba)):ca.push(C(aa,
ba))),ba.stroke!==K&&ca.push(da),this._d("polygon",ca,ba)}path(aa,ba){let ca=this._o(ba),da=[];if(!aa)return this._d("path",da,ca);aa=(aa||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");ba=ca.fill&&"transparent"!==ca.fill&&ca.fill!==K;let ea=ca.stroke!==K,fa=!!(ca.simplification&&1>ca.simplification),ia=function(aa,ba,ca){var da=m(y$1(b(aa)));aa=[];let ea=[];var fa=[0,0];let ia=[];const ha=()=>{4<=ia.length&&ea.push(...J(ia,ba));ia=[]};for(const {key:ba,data:ca}of da)switch(ba){case "M":ha();
ea.length&&(aa.push(ea),ea=[]);fa=[ca[0],ca[1]];ea.push(fa);break;case "L":ha();ea.push([ca[0],ca[1]]);break;case "C":ia.length||(da=ea.length?ea[ea.length-1]:fa,ia.push([da[0],da[1]]));ia.push([ca[0],ca[1]]);ia.push([ca[2],ca[3]]);ia.push([ca[4],ca[5]]);break;case "Z":ha(),ea.push([fa[0],fa[1]])}ha();ea.length&&(aa.push(ea),ea=[]);if(!ca)return aa;fa=[];for(const ba of aa)aa=B(ba,ca),aa.length&&fa.push(aa);return fa}(aa,1,fa?4-4*ca.simplification:(1+ca.roughness)/2);if(ba)if(ca.combineNestedSvgPaths){let aa=
[];ia.forEach(ba=>aa.push(...ba));"solid"===ca.fillStyle?da.push(_(aa,ca)):da.push(C(aa,ca))}else ia.forEach(aa=>{"solid"===ca.fillStyle?da.push(_(aa,ca)):da.push(C(aa,ca))});return ea&&(fa?ia.forEach(aa=>{da.push(O(aa,!1,ca))}):da.push(function(aa,ba){aa=m(y$1(b(aa)));let ca=[],da=[0,0],ea=[0,0];for(let {key:fa,data:ia}of aa)switch(fa){case "M":{let aa=1*(ba.maxRandomnessOffset||0);ca.push({op:"move",data:ia.map(ca=>ca+W(aa,ba))});ea=[ia[0],ia[1]];da=[ia[0],ia[1]];break}case "L":ca.push(...z(ea[0],
ea[1],ia[0],ia[1],ba));ea=[ia[0],ia[1]];break;case "C":{let [aa,da,fa,ha,ja,ka]=ia;ca.push(...j(aa,da,fa,ha,ja,ka,ea,ba));ea=[ja,ka];break}case "Z":ca.push(...z(ea[0],ea[1],da[0],da[1],ba)),ea=[da[0],da[1]]}return{type:"path",ops:ca}}(aa,ca))),this._d("path",da,ca)}opsToPath(aa){let ba="";for(let ca of aa.ops)switch(aa=ca.data,ca.op){case "move":ba+=`M${aa[0]} ${aa[1]} `;break;case "bcurveTo":ba+=`C${aa[0]} ${aa[1]}, ${aa[2]} ${aa[3]}, ${aa[4]} ${aa[5]} `;break;case "lineTo":ba+=`L${aa[0]} ${aa[1]} `}return ba.trim()}toPaths(aa){var ba=
aa.sets||[];aa=aa.options||this.defaultOptions;let ca=[];for(let da of ba){ba=null;switch(da.type){case "path":ba={d:this.opsToPath(da),stroke:aa.stroke,strokeWidth:aa.strokeWidth,fill:K};break;case "fillPath":ba={d:this.opsToPath(da),stroke:K,strokeWidth:0,fill:aa.fill||K};break;case "fillSketch":ba=this.fillSketch(da,aa)}ba&&ca.push(ba)}return ca}fillSketch(aa,ba){let ca=ba.fillWeight;return 0>ca&&(ca=ba.strokeWidth/2),{d:this.opsToPath(aa),stroke:ba.fill||K,strokeWidth:ca,fill:K}}}
class Y{constructor(aa,ba){this.canvas=aa;this.ctx=this.canvas.getContext("2d");this.gen=new U(ba)}draw(aa){let ba=aa.sets||[],ca=aa.options||this.getDefaultOptions(),da=this.ctx;for(let ea of ba)switch(ea.type){case "path":da.save();da.strokeStyle="none"===ca.stroke?"transparent":ca.stroke;da.lineWidth=ca.strokeWidth;ca.strokeLineDash&&da.setLineDash(ca.strokeLineDash);ca.strokeLineDashOffset&&(da.lineDashOffset=ca.strokeLineDashOffset);this._drawToContext(da,ea);da.restore();break;case "fillPath":da.save();
da.fillStyle=ca.fill||"";this._drawToContext(da,ea,"curve"===aa.shape||"polygon"===aa.shape?"evenodd":"nonzero");da.restore();break;case "fillSketch":this.fillSketch(da,ea,ca)}}fillSketch(aa,ba,ca){let da=ca.fillWeight;0>da&&(da=ca.strokeWidth/2);aa.save();ca.fillLineDash&&aa.setLineDash(ca.fillLineDash);ca.fillLineDashOffset&&(aa.lineDashOffset=ca.fillLineDashOffset);aa.strokeStyle=ca.fill||"";aa.lineWidth=da;this._drawToContext(aa,ba);aa.restore()}_drawToContext(aa,ba,ca="nonzero"){aa.beginPath();
for(let ca of ba.ops){let ba=ca.data;switch(ca.op){case "move":aa.moveTo(ba[0],ba[1]);break;case "bcurveTo":aa.bezierCurveTo(ba[0],ba[1],ba[2],ba[3],ba[4],ba[5]);break;case "lineTo":aa.lineTo(ba[0],ba[1])}}"fillPath"===ba.type?aa.fill(ca):aa.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(aa,ba,ca,da,ea){aa=this.gen.line(aa,ba,ca,da,ea);return this.draw(aa),aa}rectangle(aa,ba,ca,da,ea){aa=this.gen.rectangle(aa,ba,ca,da,ea);return this.draw(aa),aa}ellipse(aa,
ba,ca,da,ea){aa=this.gen.ellipse(aa,ba,ca,da,ea);return this.draw(aa),aa}circle(aa,ba,ca,da){aa=this.gen.circle(aa,ba,ca,da);return this.draw(aa),aa}linearPath(aa,ba){aa=this.gen.linearPath(aa,ba);return this.draw(aa),aa}polygon(aa,ba){aa=this.gen.polygon(aa,ba);return this.draw(aa),aa}arc(aa,ba,ca,da,ea,fa,ia=!1,ha){aa=this.gen.arc(aa,ba,ca,da,ea,fa,ia,ha);return this.draw(aa),aa}curve(aa,ba){aa=this.gen.curve(aa,ba);return this.draw(aa),aa}path(aa,ba){aa=this.gen.path(aa,ba);return this.draw(aa),
aa}}let tt="http://www.w3.org/2000/svg";
class et{constructor(aa,ba){this.svg=aa;this.gen=new U(ba)}draw(aa){var ba=aa.sets||[];let ca=aa.options||this.getDefaultOptions(),da=this.svg.ownerDocument||window.document,ea=da.createElementNS(tt,"g");for(let fa of ba){ba=null;switch(fa.type){case "path":ba=da.createElementNS(tt,"path");ba.setAttribute("d",this.opsToPath(fa));ba.setAttribute("stroke",ca.stroke);ba.setAttribute("stroke-width",ca.strokeWidth+"");ba.setAttribute("fill","none");ca.strokeLineDash&&ba.setAttribute("stroke-dasharray",
ca.strokeLineDash.join(" ").trim());ca.strokeLineDashOffset&&ba.setAttribute("stroke-dashoffset",""+ca.strokeLineDashOffset);break;case "fillPath":ba=da.createElementNS(tt,"path");ba.setAttribute("d",this.opsToPath(fa));ba.setAttribute("stroke","none");ba.setAttribute("stroke-width","0");ba.setAttribute("fill",ca.fill||"");"curve"!==aa.shape&&"polygon"!==aa.shape||ba.setAttribute("fill-rule","evenodd");break;case "fillSketch":ba=this.fillSketch(da,fa,ca)}ba&&ea.appendChild(ba)}return ea}fillSketch(aa,
ba,ca){let da=ca.fillWeight;0>da&&(da=ca.strokeWidth/2);aa=aa.createElementNS(tt,"path");return aa.setAttribute("d",this.opsToPath(ba)),aa.setAttribute("stroke",ca.fill||""),aa.setAttribute("stroke-width",da+""),aa.setAttribute("fill","none"),ca.fillLineDash&&aa.setAttribute("stroke-dasharray",ca.fillLineDash.join(" ").trim()),ca.fillLineDashOffset&&aa.setAttribute("stroke-dashoffset",""+ca.fillLineDashOffset),aa}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(aa){return this.gen.opsToPath(aa)}line(aa,
ba,ca,da,ea){aa=this.gen.line(aa,ba,ca,da,ea);return this.draw(aa)}rectangle(aa,ba,ca,da,ea){aa=this.gen.rectangle(aa,ba,ca,da,ea);return this.draw(aa)}ellipse(aa,ba,ca,da,ea){aa=this.gen.ellipse(aa,ba,ca,da,ea);return this.draw(aa)}circle(aa,ba,ca,da){aa=this.gen.circle(aa,ba,ca,da);return this.draw(aa)}linearPath(aa,ba){aa=this.gen.linearPath(aa,ba);return this.draw(aa)}polygon(aa,ba){aa=this.gen.polygon(aa,ba);return this.draw(aa)}arc(aa,ba,ca,da,ea,fa,ia=!1,ha){aa=this.gen.arc(aa,ba,ca,da,ea,
fa,ia,ha);return this.draw(aa)}curve(aa,ba){aa=this.gen.curve(aa,ba);return this.draw(aa)}path(aa,ba){aa=this.gen.path(aa,ba);return this.draw(aa)}}var st={canvas:(aa,ba)=>new Y(aa,ba),svg:(aa,ba)=>new et(aa,ba),generator:aa=>new U(aa),newSeed:()=>U.newSeed()};function get$2(aa,ba,ca){ba=ba.split(".");let da=aa;ba.forEach(aa=>{da="object"===typeof da&&Object.keys(da).includes(aa)?da[aa]:void 0});return da?da:ca}
let familyLoader=([aa])=>`https://fonts.googleapis.com/css2?family=${aa.replace(/ /g,"+")}&display=swap`,requestedFonts=[],loadFont=aa=>{let ba=document.createElement("link");ba.id=`rough-viz-font-${aa}`;ba.rel="stylesheet";ba.href=familyLoader(aa);ba.crossorigin=!0;document.querySelector("head").appendChild(ba);requestedFonts.push(aa)},useFont=aa=>{Array.isArray(aa)||(aa=aa?[aa]:[]);aa.filter(aa=>!requestedFonts.includes(aa)).forEach(ba=>loadFont(aa))};
class Chart{constructor(aa){this.element=this.el=aa.element;this.title=aa.title;this.titleFontSize=aa.titleFontSize;this.font=get$2(aa,"font",0);this.fillStyle=aa.fillStyle;this.tooltipFontSize=get$2(aa,"tooltipFontSize","0.95rem");this.bowing=get$2(aa,"bowing",0);this.simplification=get$2(aa,"simplification",.2);this.interactive=!1!==aa.interactive;this.dataFormat="object"===typeof aa.data?"object":"file"}setSvg(){this.svg=select(this.el).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",
this.height+this.margin.top+this.margin.bottom).append("g").attr("id",this.roughId).attr("transform","translate("+this.margin.left+","+this.margin.top+")")}resolveFont(){0===this.font||void 0===this.font||"gaegu"===this.font.toString().toLowerCase()?(useFont("Gaegu"),this.fontFamily="Gaegu"):1===this.font||"indie flower"===this.font.toString().toLowerCase()?(useFont("Indie Flower"),this.fontFamily="Indie Flower"):this.fontFamily=this.font}}
let DEFAULT_CEILING=20,DEFAULT_VALUE=1,roughCeiling=({roughness:aa,ceiling:ba=DEFAULT_CEILING,defaultValue:ca=DEFAULT_VALUE})=>void 0===aa||"number"!==typeof aa?ca:aa>ba?ba:aa;
class Bar extends Chart{constructor(aa){super(aa);this.data=aa.data;this.margin=aa.margin||{top:50,right:20,bottom:70,left:100};this.color=get$2(aa,"color","skyblue");this.highlight=get$2(aa,"highlight","coral");this.roughness=roughCeiling({roughness:aa.roughness});this.stroke=get$2(aa,"stroke","black");this.strokeWidth=get$2(aa,"strokeWidth",1);this.axisStrokeWidth=get$2(aa,"axisStrokeWidth",.5);this.axisRoughness=get$2(aa,"axisRoughness",.5);this.innerStrokeWidth=get$2(aa,"innerStrokeWidth",1);
this.fillWeight=get$2(aa,"fillWeight",.5);this.axisFontSize=aa.axisFontSize;this.labels="object"===this.dataFormat?"labels":aa.labels;this.values="object"===this.dataFormat?"values":aa.values;this.xValueFormat=aa.xValueFormat;this.yValueFormat=aa.yValueFormat;this.padding=get$2(aa,"padding",.1);this.xLabel=get$2(aa,"xLabel","");this.yLabel=get$2(aa,"yLabel","");this.labelFontSize=get$2(aa,"labelFontSize","1rem");this.initChartValues(aa);this.resolveFont();this.drawChart=this.resolveData(aa.data);
this.drawChart();"undefined"!==aa.title&&this.setTitle(aa.title)}initChartValues(aa){let ba=aa.height?aa.height:450;this.width=(aa.width?aa.width:350)-this.margin.left-this.margin.right;this.height=ba-this.margin.top-this.margin.bottom;this.roughId=this.el+"_svg";this.graphClass=this.el.substring(1,this.el.length);this.interactionG="g."+this.graphClass;this.setSvg()}resolveData(aa){if("string"===typeof aa){if(aa.includes(".csv"))return()=>{csv$1(aa).then(aa=>{this.data=aa;this.drawFromFile()})};if(aa.includes(".tsv"))return()=>
{tsv$1(aa).then(aa=>{this.data=aa;this.drawFromFile()})}}else return()=>{this.data=aa;this.drawFromObject()}}addScales(){let aa=this;this.xScale=band().rangeRound([0,this.width]).padding(this.padding).domain("file"===this.dataFormat?this.data.map(ba=>ba[aa.labels]):this.data[aa.labels]);this.yScale=linear$1().rangeRound([this.height,0]).domain("file"===this.dataFormat?[0,max(this.data,ba=>+ba[aa.values])]:[0,max(this.data[aa.values])])}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",
this.width/2).attr("y",this.height+this.margin.bottom/2).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel);""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-(this.margin.left/1.4)).attr("x",-(this.height/2)).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){let aa=
axisBottom(this.xScale).tickSize(0).tickFormat(aa=>this.xValueFormat?format(this.xValueFormat)(aa):aa),ba=axisLeft(this.yScale).tickSize(0).tickFormat(aa=>this.yValueFormat?format(this.yValueFormat)(aa):aa);this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(aa).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?
`${Math.min(.8,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.9);this.svg.append("g").call(ba).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.9);selectAll("path.domain").attr("stroke","transparent")}makeAxesRough(aa,ba){let ca=`xAxis${this.graphClass}`,da=`yAxis${this.graphClass}`,
ea=`rough-${ca}`,fa=`rough-${da}`;select(`.${ca}`).selectAll("path.domain").each(function(ca,da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{fillStyle:"hachure"});ca.setAttribute("class",ea);aa.appendChild(ca)});selectAll(`.${ea}`).attr("transform",`translate(0, ${this.height})`);select(`.${da}`).selectAll("path.domain").each(function(ca,da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{fillStyle:"hachure"});ca.setAttribute("class",fa);aa.appendChild(ca)})}setTitle(aa){this.svg.append("text").attr("x",
this.width/2).attr("y",-(this.margin.top/2)).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/5)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(aa)}addInteraction(){selectAll(this.interactionG).data("file"===this.dataFormat?this.data:this.data.values).append("rect").attr("x",(aa,ba)=>"file"===this.dataFormat?this.xScale(aa[this.labels]):this.xScale(this.data[this.labels][ba])).attr("y",
(aa,ba)=>"file"===this.dataFormat?this.yScale(+aa[this.values]):this.yScale(this.data[this.values][ba])).attr("width",this.xScale.bandwidth()).attr("height",(aa,ba)=>"file"===this.dataFormat?this.height-this.yScale(+aa[this.values]):this.height-this.yScale(this.data[this.values][ba])).attr("fill","transparent");let aa=select(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width",
"1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none"),ba=this;selectAll(this.interactionG).on("mouseover",function(){aa.style("opacity",1);select(this).select("path").style("stroke",ba.highlight);select(this).selectAll("path:nth-child(2)").style("stroke-width",ba.strokeWidth+1.2)});selectAll(this.interactionG).on("mouseout",function(){aa.style("opacity",0);select(this).select("path").style("stroke",
ba.color);select(this).selectAll("path:nth-child(2)").style("stroke-width",ba.strokeWidth)});selectAll(this.interactionG).on("mousemove",function(ca,da){da=select(this).attr("attrX");let ea=select(this).attr("attrY");ca=pointer(ca);aa.html(`<b>${da}</b>: ${ea}`).style("opacity",.95).attr("class",function(aa){}).style("transform",`translate(${ca[0]+ba.margin.left}px,
          ${ca[1]-(ba.height+ba.margin.top+ba.margin.bottom)}px)`)})}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId);this.rcAxis=st.svg(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}});this.rc=st.svg(this.roughSvg,{options:{fill:this.color,stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){this.initRoughObjects();this.addScales();
this.addAxes();this.makeAxesRough(this.roughSvg,this.rcAxis);this.addLabels();this.data.values.forEach((aa,ba)=>{var ca=this.rc.rectangle(this.xScale(this.data[this.labels][ba]),this.yScale(+aa),this.xScale.bandwidth(),this.height-this.yScale(+aa),{simplification:this.simplification,fillWeight:this.fillWeight});ca=this.roughSvg.appendChild(ca);ca.setAttribute("class",this.graphClass);ca.setAttribute("attrX",this.data[this.labels][ba]);ca.setAttribute("attrY",+aa)});selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",
this.strokeWidth);!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects();this.addScales();this.addAxes();this.makeAxesRough(this.roughSvg,this.rcAxis);this.addLabels();this.data.forEach(aa=>{var ba=this.rc.rectangle(this.xScale(aa[this.labels]),this.yScale(+aa[this.values]),this.xScale.bandwidth(),this.height-this.yScale(+aa[this.values]),{simplification:this.simplification,fillWeight:this.fillWeight});ba=this.roughSvg.appendChild(ba);ba.setAttribute("class",this.graphClass);
ba.setAttribute("attrX",aa[this.labels]);ba.setAttribute("attrY",+aa[this.values])});selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);!0===this.interactive&&this.addInteraction()}}
class BarH extends Chart{constructor(aa){super(aa);this.margin=aa.margin||{top:50,right:20,bottom:50,left:100};this.color=get$2(aa,"color","skyblue");this.highlight=get$2(aa,"highlight","coral");this.roughness=roughCeiling({roughness:aa.roughness});this.stroke=get$2(aa,"stroke","black");this.strokeWidth=get$2(aa,"strokeWidth",1);this.axisStrokeWidth=get$2(aa,"axisStrokeWidth",.5);this.axisRoughness=get$2(aa,"axisRoughness",.5);this.innerStrokeWidth=get$2(aa,"innerStrokeWidth",1);this.fillWeight=get$2(aa,
"fillWeight",.5);this.axisFontSize=aa.axisFontSize;this.labels="object"===this.dataFormat?"labels":aa.labels;this.values="object"===this.dataFormat?"values":aa.values;this.xValueFormat=aa.xValueFormat;this.yValueFormat=aa.yValueFormat;this.padding=get$2(aa,"padding",.1);this.xLabel=get$2(aa,"xLabel","");this.yLabel=get$2(aa,"yLabel","");this.labelFontSize=get$2(aa,"labelFontSize","1rem");this.initChartValues(aa);this.resolveFont();this.drawChart=this.resolveData(aa.data);this.drawChart();"undefined"!==
aa.title&&this.setTitle(aa.title)}initChartValues(aa){let ba=aa.height?aa.height:450;this.width=(aa.width?aa.width:350)-this.margin.left-this.margin.right;this.height=ba-this.margin.top-this.margin.bottom;this.roughId=this.el+"_svg";this.graphClass=this.el.substring(1,this.el.length);this.interactionG="g."+this.graphClass;this.setSvg()}resolveData(aa){if("string"===typeof aa){if(aa.includes(".csv"))return()=>{csv$1(aa).then(aa=>{console.log(aa);this.data=aa;this.drawFromFile()})};if(aa.includes(".tsv"))return()=>
{tsv$1(aa).then(aa=>{this.data=aa;this.drawFromFile()})}}else return()=>{this.data=aa;this.drawFromObject()}}addScales(){let aa=this;this.yScale=band().rangeRound([0,this.height]).padding(this.padding).domain("file"===this.dataFormat?this.data.map(ba=>ba[aa.labels]):this.data[aa.labels]);this.xScale=linear$1().rangeRound([0,this.width]).domain("file"===this.dataFormat?[0,max(this.data,ba=>+ba[aa.values])]:[0,max(this.data[aa.values])])}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",
this.width/2).attr("y",this.height+this.margin.bottom/2.4).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel);""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-(this.margin.left/1.5)).attr("x",-(this.height/2)).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){let aa=
axisBottom(this.xScale).tickSize(0).tickFormat(aa=>this.xValueFormat?format(this.xValueFormat)(aa):aa),ba=axisLeft(this.yScale).tickSize(0).tickFormat(aa=>this.yValueFormat?format(this.yValueFormat)(aa):aa);this.svg.append("g").attr("transform",`translate(0, ${this.height})`).call(aa).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?
`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.85);this.svg.append("g").call(ba).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.85);selectAll("path.domain").attr("stroke","transparent")}makeAxesRough(aa,ba){let ca=`xAxis${this.graphClass}`,da=`yAxis${this.graphClass}`,
ea=`rough-${ca}`,fa=`rough-${da}`;select(`.${ca}`).selectAll("path.domain").each(function(ca,da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{stroke:"black",fillStyle:"hachure"});ca.setAttribute("class",ea);aa.appendChild(ca)});selectAll(`.${ea}`).attr("transform",`translate(0, ${this.height})`);select(`.${da}`).selectAll("path.domain").each(function(ca,da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{stroke:"black",fillStyle:"hachure"});ca.setAttribute("class",fa);aa.appendChild(ca)})}setTitle(aa){this.svg.append("text").attr("x",
this.width/2).attr("y",-(this.margin.top/2)).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/5)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(aa)}addInteraction(){selectAll(this.interactionG).data("file"===this.dataFormat?this.data:this.data.values).append("rect").attr("x",0).attr("y",(aa,ba)=>"file"===this.dataFormat?this.yScale(aa[this.labels]):this.yScale(this.data[this.labels][ba])).attr("width",
(aa,ba)=>"file"===this.dataFormat?this.xScale(+aa[this.values]):this.xScale(this.data[this.values][ba])).attr("height",this.yScale.bandwidth()).attr("fill","transparent");let aa=select(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events",
"none"),ba=this;selectAll(this.interactionG).on("mouseover",function(){aa.style("opacity",1);select(this).select("path").style("stroke",ba.highlight);select(this).selectAll("path:nth-child(2)").style("stroke-width",ba.strokeWidth+1.2)});selectAll(this.interactionG).on("mouseout",function(){aa.style("opacity",0);select(this).select("path").style("stroke",ba.color);select(this).selectAll("path:nth-child(2)").style("stroke-width",ba.strokeWidth)});selectAll(this.interactionG).on("mousemove",function(ca,
da){da=select(this).attr("attrX");let ea=select(this).attr("attrY");ca=pointer(ca);aa.html(`<b>${da}</b>: ${ea}`).style("opacity",.95).attr("class",function(aa){}).style("transform",`translate(${ca[0]+ba.margin.left}px,
              ${ca[1]-(ba.height+ba.margin.top+ba.margin.bottom)}px)`)})}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId);this.rcAxis=st.svg(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}});this.rc=st.svg(this.roughSvg,{options:{fill:this.color,stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){this.initRoughObjects();
this.addScales();this.addAxes();this.makeAxesRough(this.roughSvg,this.rcAxis);this.addLabels();this.data.values.forEach((aa,ba)=>{var ca=this.rc.rectangle(0,this.yScale(this.data[this.labels][ba]),this.xScale(aa),this.yScale.bandwidth(),{simplification:this.simplification,fillWeight:this.fillWeight});ca=this.roughSvg.appendChild(ca);ca.setAttribute("class",this.graphClass);ca.setAttribute("attrX",this.data[this.labels][ba]);ca.setAttribute("attrY",+aa)});selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",
this.strokeWidth);!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects();this.addScales();this.addAxes();this.makeAxesRough(this.roughSvg,this.rcAxis);this.addLabels();this.data.forEach(aa=>{var ba=this.rc.rectangle(0,this.yScale(aa[this.labels]),this.xScale(+aa[this.values]),this.yScale.bandwidth(),{simplification:this.simplification,fillWeight:this.fillWeight});ba=this.roughSvg.appendChild(ba);ba.setAttribute("class",this.graphClass);ba.setAttribute("attrX",aa[this.labels]);
ba.setAttribute("attrY",+aa[this.values])});selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);!0===this.interactive&&this.addInteraction()}}
let colors="coral skyblue #66c2a5 tan #8da0cb #e78ac3 #a6d854 #ffd92f coral skyblue tan orange".split(" "),addLegend=(aa,ba,ca,da,ea)=>{aa.svg.append("svg").attr("x","left"===aa.legendPosition?5:aa.width-(ca+2)).attr("y",0);const fa=void 0===ea?-aa.margin.left+5:ea;da=aa.rc.rectangle("left"===aa.legendPosition?fa:aa.width+aa.margin.right-2-ca,-(aa.margin.top/3),ca,da,{fill:"white",fillWeight:.1,strokeWidth:.75,roughness:2});da=aa.roughSvg.appendChild(da);const ia="rough"+aa.el.substring(1,aa.el.length);
da.setAttribute("class",ia);ba.forEach((ba,da)=>{const ea=select("."+ia).append("g").attr("transform",`translate(
        ${"left"===aa.legendPosition?5:aa.width-(ca+2)},
        ${0})`);ea.append("rect").style("fill",aa.colors[da]).attr("width",20).attr("height",8).attr("x","left"===aa.legendPosition?fa:aa.margin.right+5).attr("y",6+11*da-aa.margin.top/3);ea.append("text").style("font-size",".8rem").style("font-family",aa.fontFamily).attr("x","left"===aa.legendPosition?fa+25:aa.margin.right+30).attr("y",11*da+14-aa.margin.top/3).text(ba.text)})};
class Donut extends Chart{constructor(aa){super(aa);this.margin=aa.margin||{top:50,right:20,bottom:10,left:20};this.colors=get$2(aa,"colors",colors);this.highlight=aa.highlight;this.roughness=roughCeiling({roughness:aa.roughness,ceiling:30});this.strokeWidth=get$2(aa,"strokeWidth",.75);this.innerStrokeWidth=get$2(aa,"innerStrokeWidth",.75);this.fillWeight=get$2(aa,"fillWeight",.85);this.labels="object"===this.dataFormat?"labels":aa.labels;this.values="object"===this.dataFormat?"values":aa.values;
void 0===this.labels||void 0===this.values?console.log(`Error for ${this.el}: Must include labels and values when \
       instantiating Donut chart. Skipping chart.`):(this.legend=!1!==aa.legend,this.legendPosition=get$2(aa,"legendPosition","right"),this.initChartValues(aa),this.resolveFont(),this.drawChart=this.resolveData(aa.data),this.drawChart(),"undefined"!==aa.title&&this.setTitle(aa.title))}initChartValues(aa){let ba=aa.height?aa.height:300;this.width=(aa.width?aa.width:300)-this.margin.left-this.margin.right;this.height=ba-this.margin.top-this.margin.bottom;this.roughId=this.el+"_svg";this.graphClass=
this.el.substring(1,this.el.length);this.interactionG="g."+this.graphClass;this.radius=Math.min(this.width,this.height)/2;this.setSvg()}resolveData(aa){if("string"===typeof aa){if(aa.includes(".csv"))return()=>{csv$1(aa).then(aa=>{this.data=aa;this.drawFromFile()})};if(aa.includes(".tsv"))return()=>{tsv$1(aa).then(aa=>{this.data=aa;this.drawFromFile()})};if(aa.includes(".json"))return()=>{json(aa).then(aa=>{this.data=aa;this.drawFromFile()})}}else return()=>{this.data=aa;this.drawFromObject()}}setTitle(aa){this.svg.append("text").attr("x",
this.width/2).attr("y",-(this.margin.top/3)).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/4)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(aa)}addInteraction(){selectAll(this.interactionG).append("g").attr("transform",`translate(${this.width/2}, ${this.height/2})`).data("object"===this.dataFormat?this.makePie(this.data[this.values]):this.makePie(this.data)).append("path").attr("d",
this.makeArc).attr("stroke-width","0px").attr("fill","transparent");let aa=select(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none"),ba=this,ca;selectAll(this.interactionG).on("mouseover",function(){aa.style("opacity",
1);ca=select(this).selectAll("path").style("stroke");void 0===ba.highlight?select(this).selectAll("path").style("opacity",.5):select(this).selectAll("path").style("stroke",ba.highlight)});selectAll(this.interactionG).on("mouseout",function(){aa.style("opacity",0);select(this).selectAll("path").style("stroke",ca);select(this).selectAll("path").style("opacity",1)});selectAll(this.interactionG).on("mousemove",function(ca,ea){ea=select(this).attr("attrX");let da=select(this).attr("attrY");ca=pointer(ca);
aa.html(`<b>${ea}</b>: ${da}`).style("opacity",.95).attr("class",function(aa){}).style("transform",`translate(${ca[0]+ba.margin.left}px,
                            ${ca[1]-ba.height-ba.margin.bottom}px)`)})}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId);this.rcAxis=st.svg(this.roughSvg,{options:{strokeWidth:3<=this.strokeWidth?3:this.strokeWidth}});this.rc=st.svg(this.roughSvg,{options:{fill:this.color,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle,fillWeight:this.fillWeight}})}drawFromObject(){this.initRoughObjects();this.makePie=pie();this.makeArc=arc().innerRadius(0).outerRadius(this.radius);
this.arcs=this.makePie(this.data[this.values]);this.arcs.forEach((aa,ba)=>{0!==aa.value&&(aa=this.rc.arc(this.width/2,this.height/2,2*this.radius,2*this.radius,aa.startAngle-Math.PI/2,aa.endAngle-Math.PI/2,!0,{fill:this.colors[ba],stroke:this.colors[ba]}),aa.setAttribute("class",this.graphClass),aa=this.roughSvg.appendChild(aa),aa.setAttribute("attrY",this.data[this.values][ba]),aa.setAttribute("attrX",this.data[this.labels][ba]))});var aa=this.rc.circle(this.width/2,this.height/2,this.radius,{fill:"white",
strokeWidth:.05,fillWeight:10,fillStyle:"solid"});this.roughSvg.appendChild(aa);selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);aa=this.data.labels.map((aa,ba)=>({color:this.colors[ba],text:aa}));let ba=6*aa.reduce((aa,ba)=>aa>ba.text.length?aa:ba.text.length,0)+35,ca=11*aa.length+8;!0===this.legend&&addLegend(this,aa,ba,ca);!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects();this.makePie=pie().value(aa=>aa[this.values]).sort(null);
let aa=[];this.makeArc=arc().innerRadius(0).outerRadius(this.radius);this.arcs=this.makePie(this.data);this.arcs.forEach((ba,ca)=>{0!==ba.value&&(ca=this.rc.arc(this.width/2,this.height/2,2*this.radius,2*this.radius,ba.startAngle-Math.PI/2,ba.endAngle-Math.PI/2,!0,{fill:this.colors[ca],stroke:this.colors[ca]}),ca.setAttribute("class",this.graphClass),ca=this.roughSvg.appendChild(ca),ca.setAttribute("attrY",ba.data[this.values]),ca.setAttribute("attrX",ba.data[this.labels]));aa.push(ba.data[this.labels])});
var ba=this.rc.circle(this.width/2,this.height/2,this.radius,{fill:"white",strokeWidth:.05,fillWeight:10,fillStyle:"solid"});this.roughSvg.appendChild(ba);selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);ba=aa.map((aa,ba)=>({color:this.colors[ba],text:aa}));let ca=6*ba.reduce((aa,ba)=>aa>ba.text.length?aa:ba.text.length,0)+35,da=11*ba.length+8;!0===this.legend&&addLegend(this,ba,ca,da);!0===this.interactive&&this.addInteraction()}}
let allDataExtent=aa=>{var ba=Object.keys(aa).map(ba=>extent(aa[ba]));const ca=min(ba,aa=>aa[0]);ba=max(ba,aa=>aa[1]);return[ca,ba]};
class Line extends Chart{constructor(aa){super(aa);this.margin=aa.margin||{top:50,right:20,bottom:50,left:100};this.roughness=roughCeiling({roughness:aa.roughness,defaultValue:2.2});this.axisStrokeWidth=get$2(aa,"axisStrokeWidth",.4);this.axisRoughness=get$2(aa,"axisRoughness",.9);this.stroke=get$2(aa,"stroke","black");this.fillWeight=get$2(aa,"fillWeight",.85);this.colors=aa.colors;this.strokeWidth=get$2(aa,"strokeWidth",8);this.axisFontSize=aa.axisFontSize;this.x=aa.x;this.y="object"===this.dataFormat?
"y":aa.y;this.xValueFormat=aa.xValueFormat;this.yValueFormat=aa.yValueFormat;this.legend=!1!==aa.legend;this.legendPosition=get$2(aa,"legendPosition","right");this.circle=!1!==aa.circle;this.circleRadius=get$2(aa,"circleRadius",10);this.circleRoughness=roughCeiling({roughness:aa.circleRoughness,defaultValue:2});this.xLabel=get$2(aa,"xLabel","");this.yLabel=get$2(aa,"yLabel","");this.labelFontSize=get$2(aa,"labelFontSize","1rem");"file"===this.dataFormat&&(this.dataSources=[],this.yKeys=Object.keys(aa).filter(aa=>
/y/.test(aa)),this.yKeys.map((ba,ca)=>{"yLabel"!==ba&&this.dataSources.push(aa[ba])}));this.initChartValues(aa);this.resolveFont();this.drawChart=this.resolveData(aa.data);this.drawChart();"undefined"!==aa.title&&this.setTitle(aa.title)}initChartValues(aa){let ba=aa.height?aa.height:400;this.width=(aa.width?aa.width:300)-this.margin.left-this.margin.right;this.height=ba-this.margin.top-this.margin.bottom;this.roughId=this.el+"_svg";this.graphClass=this.el.substring(1,this.el.length);this.interactionG=
"g."+this.graphClass;this.setSvg()}resolveData(aa){if("string"===typeof aa){if(aa.includes(".csv"))return()=>{csv$1(aa).then(aa=>{this.data=aa;this.drawFromFile()})};if(aa.includes(".tsv"))return()=>{tsv$1(aa).then(aa=>{this.data=aa;this.drawFromFile()})}}else return()=>{this.data=aa;this.drawFromObject()}}addScales(){if("file"!==this.dataFormat)var aa=allDataExtent(this.data);else{var ba=this.dataSources.map(aa=>extent(this.data,ba=>+ba[aa]));aa=min(ba,aa=>aa[0]);ba=max(ba,aa=>aa[1]);aa=[aa,ba]}void 0===
this.x?(ba=Object.keys(this.data).map(aa=>this.data[aa].length),ba=max(ba),ba="file"===this.dataFormat?[0,this.data.length]:[0,ba]):ba=extent(this.x);let ca=aa[1]-aa[0];this.xScale=void 0===this.x?point().range([0,this.width]).domain([...Array(ba[1]).keys()]):point().range([0,this.width]).domain(this.x);this.yScale=linear$1().range([this.height,0]).domain([0,aa[1]+.05*ca])}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",this.width/2).attr("y",this.height+this.margin.bottom/1.3).attr("dx",
"1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel);""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-(this.margin.left/2)).attr("x",-(this.height/2)).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){let aa=axisBottom(this.xScale).tickSize(0).tickFormat(aa=>
this.xValueFormat?format(this.xValueFormat)(aa):aa),ba=axisLeft(this.yScale).tickSize(0).tickFormat(aa=>this.yValueFormat?format(this.yValueFormat)(aa):aa);this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(aa).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10, 0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:
this.axisFontSize);this.svg.append("g").call(ba).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize);selectAll("path.domain").attr("stroke","transparent");selectAll("g.tick").style("opacity",1)}makeAxesRough(aa,ba){let ca=`xAxis${this.graphClass}`,da=`yAxis${this.graphClass}`,ea=`rough-${ca}`,fa=`rough-${da}`;select(`.${ca}`).selectAll("path.domain").each(function(ca,
da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{stroke:"black",fillStyle:"hachure"});ca.setAttribute("class",ea);aa.appendChild(ca)});selectAll(`.${ea}`).attr("transform",`translate(0, ${this.height})`);select(`.${da}`).selectAll("path.domain").each(function(ca,da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{stroke:"black",fillStyle:"hachure"});ca.setAttribute("class",fa);aa.appendChild(ca)})}setTitle(aa){this.svg.append("text").attr("x",this.width/2).attr("y",-(this.margin.top/
2)).attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(20,Math.min(this.width,this.height)/4)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(aa)}addInteraction(){let aa=this;this.chartScreen=this.svg.append("g").attr("pointer-events","all");this.dataSources.map((aa,ca)=>{ca=("file"===this.dataFormat?this.data:this.data[aa]).map((ba,ca)=>void 0===this.x?[this.xScale(ca),this.yScale(ba[aa])]:[this.xScale(this.x[ca]),this.yScale(+ba[aa])]).filter(aa=>
void 0!==aa[0]);let ba=line().x(aa=>aa[0]).y(aa=>aa[1]);this.svg.append("path").datum(ca).attr("fill","none").attr("stroke","blue").attr("stroke-width",1.5).attr("d",ba).attr("visibility","hidden");ca=aa+"class";this.svg.append("g").attr("class",ca+"text").append("text").style("font-size",this.tooltipFontSize).style("opacity",0).style("font-family",this.fontFamily).attr("text-anchor","middle").attr("alignment-baseline","middle")});this.chartScreen.append("rect").attr("width",this.width).attr("height",
this.height).attr("fill","none").on("mousemove",function(ba,ca){ba=pointer(ba)[0];ca=aa.xScale.domain();var da=aa.xScale.range();da=range(da[0],da[1]+1,aa.xScale.step());const ea=bisectRight(da,ba),fa=ca[ea];aa.dataSources.map((ba,ca)=>{ca="file"===aa.dataFormat?void 0===aa.x?aa.data[fa]:aa.data[ea]:aa.data[ba][ea];const da="."+ba+"classtext";"file"===aa.dataFormat?select(da).selectAll("text").style("opacity",1).html(void 0===aa.x?`(${ea},${ca[ba]})`:`(${aa.x[ea]}, ${ca[ba]})`).attr("x",void 0===
aa.x?aa.xScale(ea):aa.xScale(aa.x[ea])).attr("y",aa.yScale(ca[ba])-6):select(da).selectAll("text").style("opacity",1).html(void 0===aa.x?`(${ea}, ${ca})`:`(${aa.x[ea]}, ${ca})`).attr("x",void 0===aa.x?aa.xScale(ea):aa.xScale(aa.x[ea])).attr("y",aa.yScale(ca))})}).on("mouseout",()=>{aa.dataSources.map(aa=>{select("."+aa+"classtext").selectAll("text").style("opacity",0)})})}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId);this.rcAxis=st.svg(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,
roughness:this.axisRoughness}});this.rc=st.svg(this.roughSvg,{options:{stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.strokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){void 0===this.colors&&(this.colors=colors);this.dataSources=Object.keys(this.data);this.initRoughObjects();this.addScales();this.dataSources.map((aa,ba)=>{aa=this.data[aa].map((aa,ba)=>void 0===this.x?[this.xScale(ba),this.yScale(+aa)]:[this.xScale(this.x[ba]),this.yScale(aa)]);
var ca=aa.filter(aa=>void 0!==aa[0]);ca=this.rc.curve(ca,{stroke:1===this.colors.length?this.colors[0]:this.colors[ba],roughness:this.roughness,bowing:this.bowing});this.roughSvg.appendChild(ca).setAttribute("class",this.graphClass);!0===this.circle&&aa.forEach((aa,ca)=>{aa=this.rc.circle(aa[0],aa[1],this.circleRadius,{stroke:this.colors[ba],fill:this.colors[ba],fillStyle:"solid",strokeWidth:1,roughness:this.circleRoughness});this.roughSvg.appendChild(aa)})});let aa=this.dataSources.map((aa,ba)=>
({color:this.colors[ba],text:aa})),ba=6*aa.reduce((aa,ba)=>aa>ba.text.length?aa:ba.text.length,0)+35,ca=11*aa.length+8;!0===this.legend&&addLegend(this,aa,ba,ca,2);this.addAxes();this.addLabels();this.makeAxesRough(this.roughSvg,this.rcAxis);!0===this.interactive&&this.addInteraction()}drawFromFile(){void 0===this.colors&&(this.colors=colors);this.initRoughObjects();this.addScales();this.dataSources.map((aa,ba)=>{let ca=this.data.map((ba,ca)=>void 0===this.x?[this.xScale(ca),this.yScale(ba[aa])]:
[this.xScale(this.x[ca]),this.yScale(+ba[aa])]).filter(aa=>void 0!==aa[0]),da=this.rc.curve(ca,{stroke:this.colors[ba],strokeWidth:this.strokeWidth,roughness:1,bowing:10});this.roughSvg.appendChild(da);!0===this.circle&&ca.forEach((aa,ca)=>{aa=this.rc.circle(aa[0],aa[1],this.circleRadius,{stroke:this.colors[ba],fill:this.colors[ba],fillStyle:"solid",strokeWidth:1,roughness:this.circleRoughness});this.roughSvg.appendChild(aa)})});let aa=this.dataSources.map((aa,ba)=>({color:this.colors[ba],text:aa})),
ba=6*aa.reduce((aa,ba)=>aa>ba.text.length?aa:ba.text.length,0)+35,ca=11*aa.length+8;!0===this.legend&&addLegend(this,aa,ba,ca,2);this.addAxes();this.addLabels();this.makeAxesRough(this.roughSvg,this.rcAxis);!0===this.interactive&&this.addInteraction()}}
class Pie extends Chart{constructor(aa){super(aa);this.margin=aa.margin||{top:50,right:20,bottom:10,left:20};this.colors=get$2(aa,"colors",colors);this.highlight=aa.highlight;this.roughness=roughCeiling({roughness:aa.roughness,ceiling:30,defaultValue:0});this.strokeWidth=get$2(aa,"strokeWidth",.75);this.innerStrokeWidth=get$2(aa,"innerStrokeWidth",1);this.fillWeight=get$2(aa,"fillWeight",.5);this.labels="object"===this.dataFormat?"labels":aa.labels;this.values="object"===this.dataFormat?"values":
aa.values;void 0===this.labels||void 0===this.values?console.log(`Error for ${this.el}: Must include labels and values when \
       instantiating Donut chart. Skipping chart.`):(this.legend=!1!==aa.legend,this.legendPosition=get$2(aa,"legendPosition","right"),this.initChartValues(aa),this.resolveFont(),this.drawChart=this.resolveData(aa.data),this.drawChart(),"undefined"!==aa.title&&this.setTitle(aa.title))}initChartValues(aa){let ba=aa.height?aa.height:450;this.width=(aa.width?aa.width:350)-this.margin.left-this.margin.right;this.height=ba-this.margin.top-this.margin.bottom;this.roughId=this.el+"_svg";this.graphClass=
this.el.substring(1,this.el.length);this.interactionG="g."+this.graphClass;this.radius=Math.min(this.width,this.height)/2;this.setSvg()}resolveData(aa){if("string"===typeof aa){if(aa.includes(".csv"))return()=>{csv$1(aa).then(aa=>{console.log(aa);this.data=aa;this.drawFromFile()})};if(aa.includes(".tsv"))return()=>{tsv$1(aa).then(aa=>{console.log(aa);this.data=aa;this.drawFromFile()})};if(aa.includes(".json"))return()=>{json(aa).then(aa=>{console.log(aa);this.data=aa;this.drawFromFile()})}}else return()=>
{this.data=aa;this.drawFromObject()}}setTitle(aa){this.svg.append("text").attr("x",this.width/2).attr("y",-(this.margin.top/3)).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/4)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(aa)}addInteraction(){selectAll(this.interactionG).append("g").attr("transform",`translate(${this.width/2}, ${this.height/2})`).data("object"===
this.dataFormat?this.makePie(this.data[this.values]):this.makePie(this.data)).append("path").attr("d",this.makeArc).attr("stroke-width","0px").attr("fill","transparent");let aa=select(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events",
"none"),ba=this,ca;selectAll(this.interactionG).on("mouseover",function(){aa.style("opacity",1);ca=select(this).selectAll("path").style("stroke");void 0===ba.highlight?select(this).selectAll("path").style("opacity",.5):select(this).selectAll("path").style("stroke",ba.highlight)});selectAll(this.interactionG).on("mouseout",function(){aa.style("opacity",0);select(this).selectAll("path").style("stroke",ca);select(this).selectAll("path").style("opacity",1)});selectAll(this.interactionG).on("mousemove",
function(ca,ea){ea=select(this).attr("attrX");let da=select(this).attr("attrY");ca=pointer(ca);aa.html(`<b>${ea}</b>: ${da}`).style("opacity",.95).attr("class",function(aa){}).style("transform",`translate(${ca[0]+ba.margin.left}px,
                            ${ca[1]-ba.height-ba.margin.bottom}px)`)})}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId);this.rcAxis=st.svg(this.roughSvg,{options:{strokeWidth:3<=this.strokeWidth?3:this.strokeWidth}});this.rc=st.svg(this.roughSvg,{options:{fill:this.color,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){this.initRoughObjects();this.makePie=pie();this.makeArc=arc().innerRadius(0).outerRadius(this.radius);
this.arcs=this.makePie(this.data[this.values]);this.arcs.forEach((aa,ba)=>{0!==aa.value&&(aa=this.rc.arc(this.width/2,this.height/2,2*this.radius,2*this.radius,aa.startAngle-Math.PI/2,aa.endAngle-Math.PI/2,!0,{fill:this.colors[ba],stroke:this.colors[ba]}),aa.setAttribute("class",this.graphClass),aa=this.roughSvg.appendChild(aa),aa.setAttribute("attrY",this.data[this.values][ba]),aa.setAttribute("attrX",this.data[this.labels][ba]))});selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",
this.strokeWidth);let aa=this.data.labels.map((aa,ba)=>({color:this.colors[ba],text:aa})),ba=6*aa.reduce((aa,ba)=>aa>ba.text.length?aa:ba.text.length,0)+35,ca=11*aa.length+8;!0===this.legend&&addLegend(this,aa,ba,ca);!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects();this.makePie=pie().value(aa=>aa[this.values]).sort(null);let aa=[];this.makeArc=arc().innerRadius(0).outerRadius(this.radius);this.arcs=this.makePie(this.data);this.arcs.forEach((ba,ca)=>{0!==ba.value&&
(ca=this.rc.arc(this.width/2,this.height/2,2*this.radius,2*this.radius,ba.startAngle-Math.PI/2,ba.endAngle-Math.PI/2,!0,{fill:this.colors[ca],stroke:this.colors[ca]}),ca.setAttribute("class",this.graphClass),ca=this.roughSvg.appendChild(ca),ca.setAttribute("attrY",ba.data[this.values]),ca.setAttribute("attrX",ba.data[this.labels]));aa.push(ba.data[this.labels])});selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);let ba=aa.map((aa,ba)=>({color:this.colors[ba],
text:aa})),ca=6*ba.reduce((aa,ba)=>aa>ba.text.length?aa:ba.text.length,0)+35,da=11*ba.length+8;!0===this.legend&&addLegend(this,ba,ca,da);!0===this.interactive&&this.addInteraction()}}let defaultColors="pink skyblue coral gold teal grey darkgreen pink brown slateblue grey1 orange".split(" ");
class Scatter extends Chart{constructor(aa){super(aa);this.margin=aa.margin||{top:50,right:20,bottom:50,left:100};this.colorVar=aa.colorVar;this.roughness=roughCeiling({roughness:aa.roughness});this.highlight=aa.highlight;this.highlightLabel=get$2(aa,"highlightLabel","xy");this.radius=get$2(aa,"radius",8);this.axisStrokeWidth=get$2(aa,"axisStrokeWidth",.4);this.axisRoughness=get$2(aa,"axisRoughness",.9);this.curbZero=!0===aa.curbZero;this.innerStrokeWidth=get$2(aa,"innerStrokeWidth",1);this.stroke=
get$2(aa,"stroke","black");this.fillWeight=get$2(aa,"fillWeight",.85);this.colors=aa.colors;this.strokeWidth=get$2(aa,"strokeWidth",1);this.axisFontSize=aa.axisFontSize;this.x="object"===this.dataFormat?"x":aa.x;this.y="object"===this.dataFormat?"y":aa.y;this.xValueFormat=aa.xValueFormat;this.yValueFormat=aa.yValueFormat;this.xLabel=get$2(aa,"xLabel","");this.yLabel=get$2(aa,"yLabel","");this.labelFontSize=get$2(aa,"labelFontSize","1rem");this.initChartValues(aa);this.resolveFont();this.drawChart=
this.resolveData(aa.data);this.drawChart();"undefined"!==aa.title&&this.setTitle(aa.title)}initChartValues(aa){let ba=aa.height?aa.height:400;this.width=(aa.width?aa.width:300)-this.margin.left-this.margin.right;this.height=ba-this.margin.top-this.margin.bottom;this.roughId=this.el+"_svg";this.graphClass=this.el.substring(1,this.el.length);this.interactionG="g."+this.graphClass;this.setSvg()}resolveData(aa){if("string"===typeof aa){if(aa.includes(".csv"))return()=>{csv$1(aa).then(aa=>{console.log(aa);
this.data=aa;this.drawFromFile()})};if(aa.includes(".tsv"))return()=>{tsv$1(aa).then(aa=>{this.data=aa;this.drawFromFile()})}}else return()=>{this.data=aa;this.drawFromObject()}}addScales(){let aa="file"===this.dataFormat?extent(this.data,aa=>+aa[this.x]):extent(this.data[this.x]),ba=aa[1]-aa[0],ca="file"===this.dataFormat?extent(this.data,aa=>+aa[this.y]):extent(this.data[this.y]),da=ca[1]-ca[0],ea="file"===this.dataFormat?extent(this.data,aa=>aa[this.colorVar]):[1,1];if("file"===this.dataFormat){let aa=
extent(this.data,aa=>+aa[this.radius]),ba=Math.min(this.width,this.height)/2/2;this.radiusScale=linear$1().range([8,ba]).domain(aa)}!0===this.curbZero&&(0<ca[0]&&(ca[0]=0),0<aa[0]&&(aa[0]=0));this.xScale=linear$1().range([0,this.width]).domain([aa[0]-.05*ba,aa[1]+.05*ba]);this.yScale=linear$1().range([this.height,0]).domain([ca[0]-.05*da,ca[1]+.05*da]);this.colorScale=ordinal().range(this.colors).domain(ea)}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",this.width/2).attr("y",this.height+
this.margin.bottom/1.3).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel);""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-(this.margin.left/2)).attr("x",-(this.height/2)).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){let aa=
axisBottom(this.xScale).tickSize(0).tickFormat(aa=>this.xValueFormat?format(this.xValueFormat)(aa):aa),ba=axisLeft(this.yScale).tickSize(0).tickFormat(aa=>this.yValueFormat?format(this.yValueFormat)(aa):aa);this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(aa).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10, 0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?
`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize);this.svg.append("g").call(ba).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize);selectAll("path.domain").attr("stroke","transparent");selectAll("g.tick").style("opacity",1)}makeAxesRough(aa,ba){let ca=`xAxis${this.graphClass}`,da=`yAxis${this.graphClass}`,
ea=`rough-${ca}`,fa=`rough-${da}`;select(`.${ca}`).selectAll("path.domain").each(function(ca,da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{stroke:"black",fillStyle:"hachure"});ca.setAttribute("class",ea);aa.appendChild(ca)});selectAll(`.${ea}`).attr("transform",`translate(0, ${this.height})`);select(`.${da}`).selectAll("path.domain").each(function(ca,da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{stroke:"black",fillStyle:"hachure"});ca.setAttribute("class",fa);aa.appendChild(ca)})}setTitle(aa){this.svg.append("text").attr("x",
this.width/2).attr("y",-(this.margin.top/2)).attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(20,Math.min(this.width,this.height)/4)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(aa)}addInteraction(){let aa=selectAll(this.interactionG).data("file"===this.dataFormat?this.data:this.data.x).append("circle").attr("cx",(aa,ba)=>"file"===this.dataFormat?this.xScale(+aa[this.x]):this.xScale(+this.data[this.x][ba])).attr("cy",(aa,
ba)=>"file"===this.dataFormat?this.yScale(+aa[this.y]):this.yScale(+this.data[this.y][ba]));"file"===this.dataFormat?aa.attr("r",aa=>"number"===typeof this.radius?.7*this.radius:.6*this.radiusScale(+aa[this.radius])).attr("fill","transparent"):aa.attr("r",(aa,ba)=>"number"===typeof this.radius?.7*this.radius:.6*this.radius[ba]).attr("fill","transparent");var ba=select(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border",
"solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none");let ca=this,da;selectAll(this.interactionG).on("mouseover",function(){ba.style("opacity",1);da=select(this).selectAll("path").style("stroke");void 0===ca.highlight?select(this).selectAll("path:nth-child(1)").style("opacity",.4):select(this).selectAll("path:nth-child(1)").style("stroke",ca.highlight);select(this).selectAll("path:nth-child(2)").style("stroke-width",
ca.strokeWidth+1.2)});selectAll(this.interactionG).on("mouseout",function(){ba.style("opacity",0);select(this).selectAll("path").style("opacity",1);select(this).selectAll("path:nth-child(1)").style("stroke",da);select(this).selectAll("path:nth-child(2)").style("stroke",ca.stroke);select(this).selectAll("path:nth-child(2)").style("stroke-width",ca.strokeWidth)});selectAll(this.interactionG).on("mousemove",function(aa,da){da=select(this).attr("attrX");let ea=select(this).attr("attrY"),fa=select(this).attr("attrHighlightLabel");
aa=pointer(aa);ba.html("xy"===ca.highlightLabel?`<b>x</b>: ${da} <br><b>y</b>: ${ea}`:`<b>${fa}</b>`).attr("class",function(aa){}).style("transform",`translate(${aa[0]+ca.margin.left}px,
          ${aa[1]-(ca.height+ca.margin.top+ca.margin.bottom)}px)`)})}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId);this.rcAxis=st.svg(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}});this.rc=st.svg(this.roughSvg,{options:{stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){void 0===this.colors&&(this.colors=defaultColors[0]);
this.initRoughObjects();this.addScales();this.addAxes();this.makeAxesRough(this.roughSvg,this.rcAxis);this.addLabels();this.data.x.forEach((aa,ba)=>{var ca=this.rc.circle(this.xScale(+aa),this.yScale(+this.data[this.y][ba]),"number"===typeof this.radius?this.radius:this.radius[ba],{fill:"string"===typeof this.colors?this.colors:1===this.colors.length?this.colors[0]:this.colors[ba],simplification:this.simplification,fillWeight:this.fillWeight});ca=this.roughSvg.appendChild(ca);ca.setAttribute("class",
this.graphClass);ca.setAttribute("attrX",aa);ca.setAttribute("attrY",this.data[this.y][ba]);ca.setAttribute("attrHighlightLabel",this.data[this.highlightLabel])});selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);!0===this.interactive&&this.addInteraction()}drawFromFile(){void 0===this.colors&&(this.colors=defaultColors);this.initRoughObjects();this.addScales();this.addAxes();this.makeAxesRough(this.roughSvg,this.rcAxis);this.addLabels();this.data.forEach((aa,
ba)=>{ba=this.rc.circle(this.xScale(+aa[this.x]),this.yScale(+aa[this.y]),"number"===typeof this.radius?this.radius:this.radiusScale(+aa[this.radius]),{fill:void 0===this.colorVar?this.colors[0]:this.colorScale(aa[this.colorVar]),simplification:this.simplification,fillWeight:this.fillWeight});ba=this.roughSvg.appendChild(ba);ba.setAttribute("class",this.graphClass);ba.setAttribute("attrX",aa[this.x]);ba.setAttribute("attrY",aa[this.y]);ba.setAttribute("attrHighlightLabel",aa[this.highlightLabel])});
selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);!0===this.interactive&&this.addInteraction()}}
class StackedBar extends Chart{constructor(aa){super(aa);this.data=aa.data;this.margin=aa.margin||{top:50,right:20,bottom:70,left:100};this.colors=get$2(aa,"colors",colors);this.highlight=get$2(aa,"highlight","coral");this.roughness=roughCeiling({roughness:aa.roughness});this.stroke=get$2(aa,"stroke","black");this.strokeWidth=get$2(aa,"strokeWidth",1);this.axisStrokeWidth=get$2(aa,"axisStrokeWidth",.5);this.axisRoughness=get$2(aa,"axisRoughness",.5);this.innerStrokeWidth=get$2(aa,"innerStrokeWidth",
1);this.fillWeight=get$2(aa,"fillWeight",.5);this.axisFontSize=aa.axisFontSize;this.labels=aa.labels;this.values=aa.values;this.stackColorMapping={};this.padding=get$2(aa,"padding",.1);this.xLabel=get$2(aa,"xLabel","");this.yLabel=get$2(aa,"yLabel","");this.labelFontSize=get$2(aa,"labelFontSize","1rem");this.initChartValues(aa);this.resolveFont();this.drawChart=this.resolveData(aa.data);this.drawChart();"undefined"!==aa.title&&this.setTitle(aa.title)}initChartValues(aa){let ba=aa.height?aa.height:
450;this.width=(aa.width?aa.width:350)-this.margin.left-this.margin.right;this.height=ba-this.margin.top-this.margin.bottom;this.roughId=this.el+"_svg";this.graphClass=this.el.substring(1,this.el.length);this.interactionG="g."+this.graphClass;this.setSvg()}getTotal(aa){for(let ba=0;ba<aa.length;ba++){let ca=0;for(let da=0;da<aa.columns.length;++da)aa.columns[da]!==this.labels&&(ca+=aa[ba][aa.columns[da]]=+aa[ba][aa.columns[da]]);aa[ba].total=ca}return aa}updateColorMapping(aa){this.stackColorMapping[aa]||
(this.stackColorMapping[aa]=colors[Object.keys(this.stackColorMapping).length])}resolveData(aa){if("string"===typeof aa){if(aa.includes(".csv"))return()=>{csv$1(aa).then(aa=>{this.getTotal(aa);this.data=aa;this.drawFromFile()})};if(aa.includes(".tsv"))return()=>{tsv$1(aa).then(aa=>{this.getTotal(aa);this.data=aa;this.drawFromFile()})}}else return()=>{this.data=aa;for(let ba=0;ba<aa.length;++ba){let ca=0;Object.keys(aa[ba]).forEach(da=>{da!==this.labels&&(this.updateColorMapping(da),ca+=aa[ba][da],
aa[ba].total=ca)})}this.drawFromObject()}}addScales(){this.xScale=band().rangeRound([0,this.width]).padding(this.padding).domain(this.data.map(aa=>aa[this.labels]));this.data.sort(function(aa,ca){return ca.total-aa.total});this.yScale=linear$1().rangeRound([this.height,0]).domain([0,max(this.data,aa=>aa.total)]).nice();let aa="object"===this.dataFormat?this.data.map(aa=>aa[this.labels]):this.data.columns;this.zScale=ordinal().range("#98abc5 #8a89a6 #7b6888 #6b486b #a05d56 #d0743c #ff8c00".split(" ")).domain(aa)}addLabels(){""!==
this.xLabel&&this.svg.append("text").attr("x",this.width/2).attr("y",this.height+this.margin.bottom/2).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel);""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-(this.margin.left/1.4)).attr("x",-(this.height/2)).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",
this.labelFontSize).text(this.yLabel)}addAxes(){var aa=axisBottom(this.xScale).tickSize(0);this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(aa).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.8,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.9);aa=axisLeft(this.yScale).tickSize(0);
this.svg.append("g").call(aa).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.9);selectAll("path.domain").attr("stroke","transparent")}makeAxesRough(aa,ba){let ca=`xAxis${this.graphClass}`,da=`yAxis${this.graphClass}`,ea=`rough-${ca}`,fa=`rough-${da}`;select(`.${ca}`).selectAll("path.domain").each(function(ca,da){ca=
select(this).node().getAttribute("d");ca=ba.path(ca,{fillStyle:"hachure"});ca.setAttribute("class",ea);aa.appendChild(ca)});selectAll(`.${ea}`).attr("transform",`translate(0, ${this.height})`);select(`.${da}`).selectAll("path.domain").each(function(ca,da){ca=select(this).node().getAttribute("d");ca=ba.path(ca,{fillStyle:"hachure"});ca.setAttribute("class",fa);aa.appendChild(ca)})}setTitle(aa){this.svg.append("text").attr("x",this.width/2).attr("y",-(this.margin.top/2)).attr("class","title").attr("text-anchor",
"middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/5)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(aa)}addInteraction(){selectAll(this.interactionG).each(function(aa,ba){aa=this.attributes;select(this).append("rect").attr("x",aa.x.value).attr("y",aa.y.value).attr("width",aa.width.value).attr("height",aa.height.value).attr("fill","transparent")});let aa=select(this.el).append("div").style("opacity",0).attr("class",
"tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none"),ba=this,ca;selectAll(this.interactionG).on("mouseover",function(){aa.style("opacity",1);ca=select(this).selectAll("path").style("stroke");select(this).select("path").style("stroke",ba.highlight);select(this).selectAll("path:nth-child(2)").style("stroke-width",
ba.strokeWidth+1.2)});selectAll(this.interactionG).on("mouseout",function(){aa.style("opacity",0);select(this).select("path").style("stroke",ca);select(this).selectAll("path:nth-child(2)").style("stroke-width",ba.strokeWidth)});selectAll(this.interactionG).on("mousemove",function(ca,ea){ea=select(this).attr("attrX");const da=select(this).attr("attrY"),ia=select(this).attr("keyY");ca=pointer(ca);aa.html(`<h4>${ea}</h4> <b>${ia}</b>: ${da}`).style("opacity",.95).attr("class",function(aa){}).style("transform",
`translate(${ca[0]+ba.margin.left}px,
          ${ca[1]-(ba.height+ba.margin.top+ba.margin.bottom)}px)`)})}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId);this.rcAxis=st.svg(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}});this.rc=st.svg(this.roughSvg,{options:{stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}stacking(){this.data.forEach(aa=>{let ba=0;Object.keys(aa).forEach((ca,
da)=>{if(0<da&&"total"!==ca){ba+=parseInt(aa[ca],10);let ea=this.xScale(aa[this.labels]),fa=this.yScale(ba),ia=this.xScale.bandwidth(),ha=this.height-this.yScale(+aa[ca]);da=this.rc.rectangle(ea,fa,ia,ha,{fill:this.stackColorMapping[ca]||this.colors[da],stroke:this.stackColorMapping[ca]||this.colors[da],simplification:this.simplification,fillWeight:this.fillWeight});da=this.roughSvg.appendChild(da);da.setAttribute("class",this.graphClass);da.setAttribute("attrX",aa[this.labels]);da.setAttribute("keyY",
ca);da.setAttribute("attrY",+aa[ca]);da.setAttribute("x",ea);da.setAttribute("y",fa);da.setAttribute("width",ia);da.setAttribute("height",ha)}})})}drawFromObject(){this.initRoughObjects();this.addScales();this.addAxes();this.makeAxesRough(this.roughSvg,this.rcAxis);this.addLabels();this.stacking();selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects();this.addScales();this.addAxes();
this.makeAxesRough(this.roughSvg,this.rcAxis);this.addLabels();this.stacking();selectAll(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);!0===this.interactive&&this.addInteraction()}}
let DEFAULT_LABEL_FONT_SIZE="1rem",DEFAULT_HIGHLIGHT="coral",DEFAULT_PADDING=.1,DEFAULT_STROKE="black",DEFAULT_COLORS="coral skyblue #66c2a5 tan #8da0cb #e78ac3 #a6d854 #ffd92f tan orange".split(" "),axisOptions={axisFontSize:{type:String,default:"1rem"},axisRoughness:{type:Number,default:.5},axisStrokeWidth:{type:Number,default:.5},xLabel:String,yLabel:String},legendOptions={legend:{type:Boolean,default:!0},legendPosition:{type:String,default:"right"}},commonChartOptions={chartData:{type:[Object,
String],required:!0},title:String,titleFontSize:{type:String,default:"1rem"},tooltipFontSize:{type:String,default:"0.95rem"},font:{type:[String,Number],default:"gaegu"},fillStyle:{type:String,default:"hachure"},fillWeight:Number,roughness:{type:Number,default:1},bowing:{type:Number,default:0},simplification:{type:Number,default:.2},interactive:{type:Boolean,default:!0},width:Number,height:Number,margin:{type:Object},strokeWidth:{type:Number,default:1}},commonBarChartOptions=Object.assign(Object.assign({},
axisOptions),{labels:String,values:String,highlight:{type:String,default:DEFAULT_HIGHLIGHT},innerStrokeWidth:{type:Number,default:1},labelFontSize:{type:String,default:DEFAULT_LABEL_FONT_SIZE},padding:{type:Number,default:DEFAULT_PADDING},stroke:{type:String,default:DEFAULT_STROKE}}),commonPieChartOptions=Object.assign(Object.assign({},legendOptions),{labels:String,values:String,colors:{type:Array,default:DEFAULT_COLORS},highlight:{type:String,default:DEFAULT_HIGHLIGHT},innerStrokeWidth:{type:Number,
default:.75},padding:{type:Number,default:DEFAULT_PADDING}}),commonLineScatterChartOptions=Object.assign(Object.assign({},axisOptions),{colors:{type:[Array,String],default:DEFAULT_COLORS},labelFontSize:{type:String,default:DEFAULT_LABEL_FONT_SIZE},stroke:{type:String,default:DEFAULT_STROKE}}),barChartOptions=Object.assign(Object.assign(Object.assign({},commonChartOptions),commonBarChartOptions),{color:{type:String,default:"skyblue"}}),stackedBarChartOptions=Object.assign(Object.assign(Object.assign({},
commonChartOptions),commonBarChartOptions),{colors:Array,chartData:{type:Array,required:!0},labels:{type:String,required:!0}}),pieChartOptions=Object.assign(Object.assign({},commonChartOptions),commonPieChartOptions),lineChartOptions=Object.assign(Object.assign(Object.assign(Object.assign({},commonChartOptions),commonLineScatterChartOptions),legendOptions),{chartData:{type:String,required:!0},y:String,circle:{type:Boolean,default:!0},circleRadius:{type:Number,default:10},circleRoughness:{type:Number,
default:2}}),scatterChartOptions=Object.assign(Object.assign(Object.assign({},commonChartOptions),commonLineScatterChartOptions),{x:String,y:String,colorVar:String,curbZero:{type:Boolean,default:!1},highlight:{type:String,default:DEFAULT_HIGHLIGHT},highlightLabel:String,innerStrokeWidth:{type:Number,default:1},radius:{type:[Number,Array]}});
function __rest(aa,ba){var ca={},da;for(da in aa)Object.prototype.hasOwnProperty.call(aa,da)&&0>ba.indexOf(da)&&(ca[da]=aa[da]);if(null!=aa&&"function"===typeof Object.getOwnPropertySymbols){var ea=0;for(da=Object.getOwnPropertySymbols(aa);ea<da.length;ea++)0>ba.indexOf(da[ea])&&Object.prototype.propertyIsEnumerable.call(aa,da[ea])&&(ca[da[ea]]=aa[da[ea]])}return ca}for(var IDX=256,HEX=[],SIZE=256,BUFFER;IDX--;)HEX[IDX]=(IDX+256).toString(16).substring(1);
function uid(aa){var ba=0;aa=aa||11;if(!BUFFER||IDX+aa>2*SIZE)for(BUFFER="",IDX=0;ba<SIZE;ba++)BUFFER+=HEX[256*Math.random()|0];return BUFFER.substring(IDX,IDX++ +aa)}let useSetupRoughVizChart=(aa,ba)=>{const ca=vue.ref(null),da="chartdiv"+uid();vue.onMounted(()=>{const ea=ca.value;ea.id=da;vue.watchEffect(()=>{const {chartData:ca}=ba,da=__rest(ba,["chartData"]);ea.innerHTML="";new aa(Object.assign({element:`#${ea.id}`},Object.assign({data:ca},da)))})});return ca};
var script=vue.defineComponent({props:Object.assign({},barChartOptions),setup(aa){return{chartdiv:useSetupRoughVizChart(Bar,aa)}}});let _hoisted_1={ref:"chartdiv"};function render(aa,ba,ca,da,ea,fa){return vue.openBlock(),vue.createBlock("div",_hoisted_1,null,512)}script.render=render;script.__file="src/components/Bar.vue";var script$1=vue.defineComponent({props:Object.assign({},pieChartOptions),setup(aa){return{chartdiv:useSetupRoughVizChart(Donut,aa)}}});let _hoisted_1$1={ref:"chartdiv"};
function render$1(aa,ba,ca,da,ea,fa){return vue.openBlock(),vue.createBlock("div",_hoisted_1$1,null,512)}script$1.render=render$1;script$1.__file="src/components/Donut.vue";var script$2=vue.defineComponent({props:Object.assign({},barChartOptions),setup(aa){return{chartdiv:useSetupRoughVizChart(BarH,aa)}}});let _hoisted_1$2={ref:"chartdiv"};function render$2(aa,ba,ca,da,ea,fa){return vue.openBlock(),vue.createBlock("div",_hoisted_1$2,null,512)}script$2.render=render$2;script$2.__file="src/components/BarH.vue";
var script$3=vue.defineComponent({props:Object.assign({},lineChartOptions),setup(aa,ba){let ca=vue.computed(()=>{const ca=ba.attrs,ea={};Object.keys(ca).forEach(aa=>{const ba=ca[aa];/^y\d+$/.test(aa)&&"string"===typeof ba&&(ea[aa]=ba)});return Object.assign(Object.assign({},aa),ea)});return{chartdiv:useSetupRoughVizChart(Line,ca.value)}}});let _hoisted_1$3={ref:"chartdiv"};function render$3(aa,ba,ca,da,ea,fa){return vue.openBlock(),vue.createBlock("div",_hoisted_1$3,null,512)}script$3.render=render$3;
script$3.__file="src/components/Line.vue";var script$4=vue.defineComponent({props:Object.assign({},pieChartOptions),setup(aa){return{chartdiv:useSetupRoughVizChart(Pie,aa)}}});let _hoisted_1$4={ref:"chartdiv"};function render$4(aa,ba,ca,da,ea,fa){return vue.openBlock(),vue.createBlock("div",_hoisted_1$4,null,512)}script$4.render=render$4;script$4.__file="src/components/Pie.vue";
var script$5=vue.defineComponent({props:Object.assign({},scatterChartOptions),setup(aa){return{chartdiv:useSetupRoughVizChart(Scatter,aa)}}});let _hoisted_1$5={ref:"chartdiv"};function render$5(aa,ba,ca,da,ea,fa){return vue.openBlock(),vue.createBlock("div",_hoisted_1$5,null,512)}script$5.render=render$5;script$5.__file="src/components/Scatter.vue";var script$6=vue.defineComponent({props:Object.assign({},stackedBarChartOptions),setup(aa){return{chartdiv:useSetupRoughVizChart(StackedBar,aa)}}});
let _hoisted_1$6={ref:"chartdiv"};function render$6(aa,ba,ca,da,ea,fa){return vue.openBlock(),vue.createBlock("div",_hoisted_1$6,null,512)}script$6.render=render$6;script$6.__file="src/components/StackedBar.vue";exports.Bar=script;exports.BarH=script$2;exports.Donut=script$1;exports.Line=script$3;exports.Pie=script$4;exports.Scatter=script$5;exports.StackedBar=script$6
