"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("vue");function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function i(t){function i(t,e,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){let r=i+n>>>1;0>s(t[r],e)?i=r+1:n=r}return i}let n=t,s=t;return 1===t.length&&(n=(e,i)=>t(e)-i,s=function(t){return(i,n)=>e(t(i),n)}(t)),{left:i,center:function(t,e,s,r){return null==s&&(s=0),null==r&&(r=t.length),(r=i(t,e,s,r-1))>s&&n(t[r-1],e)>-n(t[r],e)?r-1:r},right:function(t,e,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){let r=i+n>>>1;0<s(t[r],e)?n=r:i=r+1}return i}}}let n=i(e).right;i((function(t){return null===t?NaN:+t})).center;function s(t,e){let i,n;if(void 0===e)for(var s of t)null!=s&&(void 0===i?s>=s&&(i=n=s):(i>s&&(i=s),n<s&&(n=s)));else{s=-1;for(let r of t)null!=(r=e(r,++s,t))&&(void 0===i?r>=r&&(i=n=r):(i>r&&(i=r),n<r&&(n=r)))}return[i,n]}var r=Math.sqrt(50),a=Math.sqrt(10),h=Math.sqrt(2);function o(t,e,i){return e=(e-t)/Math.max(0,i),t=Math.floor(Math.log(e)/Math.LN10),e/=Math.pow(10,t),0<=t?(e>=r?10:e>=a?5:e>=h?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(e>=r?10:e>=a?5:e>=h?2:1)}function l(t,e){let i;if(void 0===e)for(var n of t)null!=n&&(i<n||void 0===i&&n>=n)&&(i=n);else{n=-1;for(let s of t)null!=(s=e(s,++n,t))&&(i<s||void 0===i&&s>=s)&&(i=s)}return i}function u(t,e){let i;if(void 0===e)for(var n of t)null!=n&&(i>n||void 0===i&&n>=n)&&(i=n);else{n=-1;for(let s of t)null!=(s=e(s,++n,t))&&(i>s||void 0===i&&s>=s)&&(i=s)}return i}function c(t,e,i){t=+t,e=+e,i=2>(s=arguments.length)?(e=t,t=0,1):3>s?1:+i;for(var n=-1,s=0|Math.max(0,Math.ceil((e-t)/i)),r=Array(s);++n<s;)r[n]=t+n*i;return r}var d=Array.prototype.slice;function f(t){return t}function p(t){return"translate("+(t+.5)+",0)"}function g(t){return"translate(0,"+(t+.5)+")"}function y(t){return e=>+t(e)}function m(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(i){return+t(i)+e}}function v(){return!this.__axis}function b(t,e){function i(i){var d=null==s?e.ticks?e.ticks.apply(e,n):e.domain():s,p=null==r?e.tickFormat?e.tickFormat.apply(e,n):f:r,g=Math.max(a,0)+o,b=e.range(),x=+b[0]+.5;b=+b[b.length-1]+.5;var k=(e.bandwidth?m:y)(e.copy()),w=i.selection?i.selection():i,S=w.selectAll(".domain").data([null]),_=(d=w.selectAll(".tick").data(d,e).order()).exit(),M=d.enter().append("g").attr("class","tick"),A=d.select("line"),F=d.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),d=d.merge(M),A=A.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",l*a)),F=F.merge(M.append("text").attr("fill","currentColor").attr(u,l*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),i!==w&&(S=S.transition(i),d=d.transition(i),A=A.transition(i),F=F.transition(i),_=_.transition(i).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=k(t))?c(t):this.getAttribute("transform")})),M.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return c(e&&isFinite(e=e(t))?e:k(t))}))),_.remove(),S.attr("d",4===t||2==t?h?"M"+l*h+","+x+"H0.5V"+b+"H"+l*h:"M0.5,"+x+"V"+b:h?"M"+x+","+l*h+"V0.5H"+b+"V"+l*h:"M"+x+",0.5H"+b),d.attr("opacity",1).attr("transform",(function(t){return c(k(t))})),A.attr(u+"2",l*a),F.attr(u,l*g).text(p),w.filter(v).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),w.each((function(){this.__axis=k}))}var n=[],s=null,r=null,a=6,h=6,o=3,l=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",c=1===t||3===t?p:g;return i.scale=function(t){return arguments.length?(e=t,i):e},i.ticks=function(){return n=d.call(arguments),i},i.tickArguments=function(t){return arguments.length?(n=null==t?[]:d.call(t),i):n.slice()},i.tickValues=function(t){return arguments.length?(s=null==t?null:d.call(t),i):s&&s.slice()},i.tickFormat=function(t){return arguments.length?(r=t,i):r},i.tickSize=function(t){return arguments.length?(a=h=+t,i):a},i.tickSizeInner=function(t){return arguments.length?(a=+t,i):a},i.tickSizeOuter=function(t){return arguments.length?(h=+t,i):h},i.tickPadding=function(t){return arguments.length?(o=+t,i):o},i}function x(t){return b(3,t)}function k(t){return b(4,t)}var w={value:()=>{}};function S(){for(var t,e=0,i=arguments.length,n={};e<i;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw Error("illegal type: "+t);n[t]=[]}return new _(n)}function _(t){this._=t}function M(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");if(0<=n&&(i=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw Error("unknown type: "+t);return{type:t,name:i}}))}function A(t,e){for(var i,n=0,s=t.length;n<s;++n)if((i=t[n]).name===e)return i.value}function F(t,e,i){for(var n=0,s=t.length;n<s;++n)if(t[n].name===e){t[n]=w,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=i&&t.push({name:e,value:i}),t}_.prototype=S.prototype={constructor:_,on:function(t,e){var i,n=this._,s=M(t+"",n),r=-1,a=s.length;if(!(2>arguments.length)){if(null!=e&&"function"!=typeof e)throw Error("invalid callback: "+e);for(;++r<a;)if(i=(t=s[r]).type)n[i]=F(n[i],t.name,e);else if(null==e)for(i in n)n[i]=F(n[i],t.name,null);return this}for(;++r<a;)if((i=(t=s[r]).type)&&(i=A(n[i],t.name)))return i},copy:function(){var t,e={},i=this._;for(t in i)e[t]=i[t].slice();return new _(e)},call:function(t,e){if(0<(i=arguments.length-2))for(var i,n,s=Array(i),r=0;r<i;++r)s[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(r=0,i=(n=this._[t]).length;r<i;++r)n[r].value.apply(e,s)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(var n=0,s=(t=this._[t]).length;n<s;++n)t[n].value.apply(e,i)}};var C="http://www.w3.org/1999/xhtml",z={svg:"http://www.w3.org/2000/svg",xhtml:C,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function O(t){var e=t+="",i=e.indexOf(":");return 0<=i&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),z.hasOwnProperty(e)?{space:z[e],local:t}:t}function W(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===C&&e.documentElement.namespaceURI===C?e.createElement(t):e.createElementNS(i,t)}}function j(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function P(t){return((t=O(t)).local?j:W)(t)}function $(){}function L(t){return null==t?$:function(){return this.querySelector(t)}}function E(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function R(){return[]}function N(t){return null==t?R:function(){return this.querySelectorAll(t)}}function I(t){return function(){return this.matches(t)}}function T(t){return function(e){return e.matches(t)}}var V=Array.prototype.find;function G(){return this.firstElementChild}var D=Array.prototype.filter;function q(){return this.children}function B(t){return Array(t.length)}function X(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Y(t){return function(){return t}}function H(t,e,i,n,s,r){for(var a,h=0,o=e.length,l=r.length;h<l;++h)(a=e[h])?(a.__data__=r[h],n[h]=a):i[h]=new X(t,r[h]);for(;h<o;++h)(a=e[h])&&(s[h]=a)}function Z(t,e,i,n,s,r,a){var h,o,l,u=new Map,c=e.length,d=r.length,f=Array(c);for(h=0;h<c;++h)(o=e[h])&&(f[h]=l=a.call(o,o.__data__,h,e)+"",u.has(l)?s[h]=o:u.set(l,o));for(h=0;h<d;++h)l=a.call(t,r[h],h,r)+"",(o=u.get(l))?(n[h]=o,o.__data__=r[h],u.delete(l)):i[h]=new X(t,r[h]);for(h=0;h<c;++h)(o=e[h])&&u.get(f[h])===o&&(s[h]=o)}function U(t){return t.__data__}function Q(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function K(t){return function(){this.removeAttribute(t)}}function J(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tt(t,e){return function(){this.setAttribute(t,e)}}function et(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function it(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}function nt(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function st(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function rt(t){return function(){this.style.removeProperty(t)}}function at(t,e,i){return function(){this.style.setProperty(t,e,i)}}function ht(t,e,i){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function ot(t,e){return t.style.getPropertyValue(e)||st(t).getComputedStyle(t,null).getPropertyValue(e)}function lt(t){return function(){delete this[t]}}function ut(t,e){return function(){this[t]=e}}function ct(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}function dt(t){return t.trim().split(/^|\s+/)}function ft(t){return t.classList||new pt(t)}function pt(t){this._node=t,this._names=dt(t.getAttribute("class")||"")}function gt(t,e){t=ft(t);for(var i=-1,n=e.length;++i<n;)t.add(e[i])}function yt(t,e){t=ft(t);for(var i=-1,n=e.length;++i<n;)t.remove(e[i])}function mt(t){return function(){gt(this,t)}}function vt(t){return function(){yt(this,t)}}function bt(t,e){return function(){(e.apply(this,arguments)?gt:yt)(this,t)}}function xt(){this.textContent=""}function kt(t){return function(){this.textContent=t}}function wt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function St(){this.innerHTML=""}function _t(t){return function(){this.innerHTML=t}}function Mt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function At(){this.nextSibling&&this.parentNode.appendChild(this)}function Ft(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ct(){return null}function zt(){var t=this.parentNode;t&&t.removeChild(this)}function Ot(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");return 0<=i&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}))}function Pt(t){return function(){var e=this.__on;if(e){for(var i,n=0,s=-1,r=e.length;n<r;++n)i=e[n],t.type&&i.type!==t.type||i.name!==t.name?e[++s]=i:this.removeEventListener(i.type,i.listener,i.options);++s?e.length=s:delete this.__on}}}function $t(t,e,i){return function(){var n,s=this.__on,r=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var a=0,h=s.length;a<h;++a)if((n=s[a]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=r,n.options=i),void(n.value=e);this.addEventListener(t.type,r,i),n={type:t.type,name:t.name,value:e,listener:r,options:i},s?s.push(n):this.__on=[n]}}function Lt(t,e,i){var n=st(t),s=n.CustomEvent;"function"==typeof s?s=new s(e,i):(s=n.document.createEvent("Event"),i?(s.initEvent(e,i.bubbles,i.cancelable),s.detail=i.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function Et(t,e){return function(){return Lt(this,t,e)}}function Rt(t,e){return function(){return Lt(this,t,e.apply(this,arguments))}}X.prototype={constructor:X,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},pt.prototype={add:function(t){0>this._names.indexOf(t)&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){0<=(t=this._names.indexOf(t))&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var Nt=[null];function It(t,e){this._groups=t,this._parents=e}function Tt(){return new It([[document.documentElement]],Nt)}function Vt(t){return"string"==typeof t?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],Nt)}function Gt(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint)return(i=i.createSVGPoint()).x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y];if(e.getBoundingClientRect)return i=e.getBoundingClientRect(),[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}return[t.pageX,t.pageY]}function Dt(t){return"string"==typeof t?new It([document.querySelectorAll(t)],[document.documentElement]):new It([null==t?[]:E(t)],Nt)}function qt(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Bt(t,e){for(var i in t=Object.create(t.prototype),e)t[i]=e[i];return t}function Xt(){}It.prototype=Tt.prototype={constructor:It,select:function(t){"function"!=typeof t&&(t=L(t));for(var e=this._groups,i=e.length,n=Array(i),s=0;s<i;++s)for(var r,a,h=e[s],o=h.length,l=n[s]=Array(o),u=0;u<o;++u)(r=h[u])&&(a=t.call(r,r.__data__,u,h))&&("__data__"in r&&(a.__data__=r.__data__),l[u]=a);return new It(n,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:E(e)}}(t):N(t);for(var e=this._groups,i=e.length,n=[],s=[],r=0;r<i;++r)for(var a,h=e[r],o=h.length,l=0;l<o;++l)(a=h[l])&&(n.push(t.call(a,a.__data__,l,h)),s.push(a));return new It(n,s)},selectChild:function(t){return this.select(null==t?G:function(t){return function(){return V.call(this.children,t)}}("function"==typeof t?t:T(t)))},selectChildren:function(t){return this.selectAll(null==t?q:function(t){return function(){return D.call(this.children,t)}}("function"==typeof t?t:T(t)))},filter:function(t){"function"!=typeof t&&(t=I(t));for(var e=this._groups,i=e.length,n=Array(i),s=0;s<i;++s)for(var r,a=e[s],h=a.length,o=n[s]=[],l=0;l<h;++l)(r=a[l])&&t.call(r,r.__data__,l,a)&&o.push(r);return new It(n,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,U);var i=e?Z:H,n=this._parents,s=this._groups;"function"!=typeof t&&(t=Y(t));for(var r=s.length,a=Array(r),h=Array(r),o=Array(r),l=0;l<r;++l){var u=n[l],c=s[l],d=c.length,f=E(t.call(u,u&&u.__data__,l,n)),p=f.length,g=h[l]=Array(p),y=a[l]=Array(p);for(i(u,c,g,y,d=o[l]=Array(d),f,e),c=u=0;u<p;++u)if(f=g[u]){for(u>=c&&(c=u+1);!(d=y[c])&&++c<p;);f._next=d||null}}return(a=new It(a,n))._enter=h,a._exit=o,a},enter:function(){return new It(this._enter||this._groups.map(B),this._parents)},exit:function(){return new It(this._exit||this._groups.map(B),this._parents)},join:function(t,e,i){var n=this.enter(),s=this,r=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=e&&(s=e(s)),null==i?r.remove():i(r),n&&s?n.merge(s).order():s},merge:function(t){if(!(t instanceof It))throw Error("invalid merge");var e=this._groups;t=t._groups;for(var i=e.length,n=Math.min(i,t.length),s=Array(i),r=0;r<n;++r)for(var a,h=e[r],o=t[r],l=h.length,u=s[r]=Array(l),c=0;c<l;++c)(a=h[c]||o[c])&&(u[c]=a);for(;r<i;++r)s[r]=e[r];return new It(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,s=t[e],r=s.length-1,a=s[r];0<=--r;)(n=s[r])&&(a&&4^n.compareDocumentPosition(a)&&a.parentNode.insertBefore(n,a),a=n);return this},sort:function(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=Q);for(var i=this._groups,n=i.length,s=Array(n),r=0;r<n;++r){for(var a,h=i[r],o=h.length,l=s[r]=Array(o),u=0;u<o;++u)(a=h[u])&&(l[u]=a);l.sort(e)}return new It(s,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],s=0,r=n.length;s<r;++s){var a=n[s];if(a)return a}return null},size:function(){let t=0;for(let e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var s,r=e[i],a=0,h=r.length;a<h;++a)(s=r[a])&&t.call(s,s.__data__,a,r);return this},attr:function(t,e){var i=O(t);if(2>arguments.length){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==e?i.local?J:K:"function"==typeof e?i.local?nt:it:i.local?et:tt)(i,e))},style:function(t,e,i){return 1<arguments.length?this.each((null==e?rt:"function"==typeof e?ht:at)(t,e,null==i?"":i)):ot(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?lt:"function"==typeof e?ct:ut)(t,e)):this.node()[t]},classed:function(t,e){var i=dt(t+"");if(2>arguments.length){for(var n=ft(this.node()),s=-1,r=i.length;++s<r;)if(!n.contains(i[s]))return!1;return!0}return this.each(("function"==typeof e?bt:e?mt:vt)(i,e))},text:function(t){return arguments.length?this.each(null==t?xt:("function"==typeof t?wt:kt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?St:("function"==typeof t?Mt:_t)(t)):this.node().innerHTML},raise:function(){return this.each(At)},lower:function(){return this.each(Ft)},append:function(t){var e="function"==typeof t?t:P(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var i="function"==typeof t?t:P(t),n=null==e?Ct:"function"==typeof e?e:L(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(zt)},clone:function(t){return this.select(t?Wt:Ot)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,i){var n,s=jt(t+""),r=s.length;if(!(2>arguments.length)){for(a=e?$t:Pt,u=0;u<r;++u)this.each(a(s[u],e,i));return this}var a=this.node().__on;if(a)for(var h,o=0,l=a.length;o<l;++o){var u=0;for(h=a[o];u<r;++u)if((n=s[u]).type===h.type&&n.name===h.name)return h.value}},dispatch:function(t,e){return this.each(("function"==typeof e?Rt:Et)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n,s=t[e],r=0,a=s.length;r<a;++r)(n=s[r])&&(yield n)}};var Yt=1/.7,Ht="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ut="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qt=/^#([0-9a-f]{3,8})$/,Kt=new RegExp("^rgb\\("+[Ht,Ht,Ht]+"\\)$"),Jt=new RegExp("^rgb\\("+[Ut,Ut,Ut]+"\\)$"),te=new RegExp("^rgba\\("+[Ht,Ht,Ht,Zt]+"\\)$"),ee=new RegExp("^rgba\\("+[Ut,Ut,Ut,Zt]+"\\)$"),ie=new RegExp("^hsl\\("+[Zt,Ut,Ut]+"\\)$"),ne=new RegExp("^hsla\\("+[Zt,Ut,Ut,Zt]+"\\)$"),se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function re(){return this.rgb().formatHex()}function ae(){return this.rgb().formatRgb()}function he(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Qt.exec(t))?(i=e[1].length,e=parseInt(e[1],16),6===i?oe(e):3===i?new de(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===i?le(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===i?le(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Kt.exec(t))?new de(e[1],e[2],e[3],1):(e=Jt.exec(t))?new de(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=te.exec(t))?le(e[1],e[2],e[3],e[4]):(e=ee.exec(t))?le(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ie.exec(t))?ye(e[1],e[2]/100,e[3]/100,1):(e=ne.exec(t))?ye(e[1],e[2]/100,e[3]/100,e[4]):se.hasOwnProperty(t)?oe(se[t]):"transparent"===t?new de(NaN,NaN,NaN,0):null}function oe(t){return new de(t>>16&255,t>>8&255,255&t,1)}function le(t,e,i,n){return 0>=n&&(t=e=i=NaN),new de(t,e,i,n)}function ue(t){return t instanceof Xt||(t=he(t)),t?new de((t=t.rgb()).r,t.g,t.b,t.opacity):new de}function ce(t,e,i,n){return 1===arguments.length?ue(t):new de(t,e,i,null==n?1:n)}function de(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function fe(){return"#"+ge(this.r)+ge(this.g)+ge(this.b)}function pe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ge(t){return(16>(t=Math.max(0,Math.min(255,Math.round(t)||0)))?"0":"")+t.toString(16)}function ye(t,e,i,n){return 0>=n?t=e=i=NaN:0>=i||1<=i?t=e=NaN:0>=e&&(t=NaN),new ve(t,e,i,n)}function me(t){if(t instanceof ve)return new ve(t.h,t.s,t.l,t.opacity);if(t instanceof Xt||(t=he(t)),!t)return new ve;if(t instanceof ve)return t;var e=(t=t.rgb()).r/255,i=t.g/255,n=t.b/255,s=Math.min(e,i,n),r=Math.max(e,i,n),a=NaN,h=r-s,o=(r+s)/2;return h?(a=e===r?(i-n)/h+6*(i<n):i===r?(n-e)/h+2:(e-i)/h+4,h/=.5>o?r+s:2-r-s,a*=60):h=0<o&&1>o?0:a,new ve(a,h,o,t.opacity)}function ve(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function be(t,e,i){return 255*(60>t?e+(i-e)*t/60:180>t?i:240>t?e+(i-e)*(240-t)/60:e)}qt(Xt,he,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:re,formatHex:re,formatHsl:function(){return me(this).formatHsl()},formatRgb:ae,toString:ae}),qt(de,ce,Bt(Xt,{brighter:function(t){return t=null==t?Yt:Math.pow(Yt,t),new de(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new de(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:fe,formatHex:fe,formatRgb:pe,toString:pe})),qt(ve,(function(t,e,i,n){return 1===arguments.length?me(t):new ve(t,e,i,null==n?1:n)}),Bt(Xt,{brighter:function(t){return t=null==t?Yt:Math.pow(Yt,t),new ve(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ve(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(0>this.h),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l;return new de(be(240<=t?t-240:t+120,i=2*i-(e=i+(.5>i?i:1-i)*e),e),be(t,i,e),be(120>t?t+240:t-120,i,e),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var xe=t=>()=>t;function ke(t){return 1==(t=+t)?we:function(e,i){return i-e?function(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}(e,i,t):xe(isNaN(e)?i:e)}}function we(t,e){var i=e-t;return i?function(t,e){return function(i){return t+i*e}}(t,i):xe(isNaN(t)?e:t)}var Se=function t(e){function i(t,e){var i=n((t=ce(t)).r,(e=ce(e)).r),s=n(t.g,e.g),r=n(t.b,e.b),a=we(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=s(e),t.b=r(e),t.opacity=a(e),t+""}}var n=ke(e);return i.gamma=t,i}(1);function _e(t,e){e||(e=[]);var i,n=t?Math.min(e.length,t.length):0,s=e.slice();return function(r){for(i=0;i<n;++i)s[i]=t[i]*(1-r)+e[i]*r;return s}}function Me(t,e){var i,n=e?e.length:0,s=t?Math.min(n,t.length):0,r=Array(s),a=Array(n);for(i=0;i<s;++i)r[i]=je(t[i],e[i]);for(;i<n;++i)a[i]=e[i];return function(t){for(i=0;i<s;++i)a[i]=r[i](t);return a}}function Ae(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function Fe(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function Ce(t,e){var i,n={},s={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=je(t[i],e[i]):s[i]=e[i];return function(t){for(i in n)s[i]=n[i](t);return s}}var ze=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oe=new RegExp(ze.source,"g");function We(t,e){var i,n,s,r=ze.lastIndex=Oe.lastIndex=0,a=-1,h=[],o=[];for(t+="",e+="";(i=ze.exec(t))&&(n=Oe.exec(e));)(s=n.index)>r&&(s=e.slice(r,s),h[a]?h[a]+=s:h[++a]=s),(i=i[0])===(n=n[0])?h[a]?h[a]+=n:h[++a]=n:(h[++a]=null,o.push({i:a,x:Fe(i,n)})),r=Oe.lastIndex;return r<e.length&&(s=e.slice(r),h[a]?h[a]+=s:h[++a]=s),2>h.length?o[0]?function(t){return function(e){return t(e)+""}}(o[0].x):function(t){return function(){return t}}(e):(e=o.length,function(t){for(var i,n=0;n<e;++n)h[(i=o[n]).i]=i.x(t);return h.join("")})}function je(t,e){var i,n=typeof e;return null==e||"boolean"===n?xe(e):("number"===n?Fe:"string"===n?(i=he(e))?(e=i,Se):We:e instanceof he?Se:e instanceof Date?Ae:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?_e:Array.isArray(e)?Me:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ce:Fe)(t,e)}function Pe(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var $e,Le=180/Math.PI,Ee={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Re(t,e,i,n,s,r){var a,h,o;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(o=t*i+e*n)&&(i-=t*o,n-=e*o),(h=Math.sqrt(i*i+n*n))&&(i/=h,n/=h,o/=h),t*n<e*i&&(t=-t,e=-e,o=-o,a=-a),{translateX:s,translateY:r,rotate:Math.atan2(e,t)*Le,skewX:Math.atan(o)*Le,scaleX:a,scaleY:h}}function Ne(t,e,i,n){function s(t){return t.length?t.pop()+" ":""}function r(t,n,s,r,a,h){t!==s||n!==r?(a=a.push("translate(",null,e,null,i),h.push({i:a-4,x:Fe(t,s)},{i:a-2,x:Fe(n,r)})):(s||r)&&a.push("translate("+s+e+r+i)}function a(t,e,i,r){t!==e?(180<t-e?e+=360:180<e-t&&(t+=360),r.push({i:i.push(s(i)+"rotate(",null,n)-2,x:Fe(t,e)})):e&&i.push(s(i)+"rotate("+e+n)}function h(t,e,i,r){t!==e?r.push({i:i.push(s(i)+"skewX(",null,n)-2,x:Fe(t,e)}):e&&i.push(s(i)+"skewX("+e+n)}function o(t,e,i,n,r,a){t!==i||e!==n?(r=r.push(s(r)+"scale(",null,",",null,")"),a.push({i:r-4,x:Fe(t,i)},{i:r-2,x:Fe(e,n)})):1===i&&1===n||r.push(s(r)+"scale("+i+","+n+")")}return function(e,i){var n=[],s=[];return e=t(e),i=t(i),r(e.translateX,e.translateY,i.translateX,i.translateY,n,s),a(e.rotate,i.rotate,n,s),h(e.skewX,i.skewX,n,s),o(e.scaleX,e.scaleY,i.scaleX,i.scaleY,n,s),e=i=null,function(t){for(var e,i=-1,r=s.length;++i<r;)n[(e=s[i]).i]=e.x(t);return n.join("")}}}var Ie,Te,Ve=Ne((function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?Ee:Re(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Ge=Ne((function(t){return null==t?Ee:($e||($e=document.createElementNS("http://www.w3.org/2000/svg","g")),$e.setAttribute("transform",t),(t=$e.transform.baseVal.consolidate())?Re((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ee)}),", ",")",")"),De=0,qe=0,Be=0,Xe=0,Ye=0,He=0,Ze="object"==typeof performance&&performance.now?performance:Date,Ue="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qe(){return Ye||(Ue(Ke),Ye=Ze.now()+He)}function Ke(){Ye=0}function Je(){this._call=this._time=this._next=null}function ti(t,e,i){var n=new Je;return n.restart(t,e,i),n}function ei(){Ye=(Xe=Ze.now())+He,De=qe=0;try{!function(){Qe(),++De;for(var t,e=Ie;e;)0<=(t=Ye-e._time)&&e._call.call(null,t),e=e._next;--De}()}finally{De=0,function(){for(var t,e,i=Ie,n=1/0;i;)i._call?(n>i._time&&(n=i._time),t=i,i=i._next):(e=i._next,i._next=null,i=t?t._next=e:Ie=e);Te=t,ni(n)}(),Ye=0}}function ii(){var t=Ze.now(),e=t-Xe;e>1e3&&(He-=e,Xe=t)}function ni(t){De||(qe&&(qe=clearTimeout(qe)),24<t-Ye?(1/0>t&&(qe=setTimeout(ei,t-Ze.now()-He)),Be&&(Be=clearInterval(Be))):(Be||(Xe=Ze.now(),Be=setInterval(ii,1e3)),De=1,Ue(ei)))}function si(t,e,i){var n=new Je;return e=null==e?0:+e,n.restart((i=>{n.stop(),t(i+e)}),e,i),n}Je.prototype=ti.prototype={constructor:Je,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?Qe():+i)+(null==e?0:+e),this._next||Te===this||(Te?Te._next=this:Ie=this,Te=this),this._call=t,this._time=i,ni()},stop:function(){this._call&&(this._call=null,this._time=1/0,ni())}};var ri=S("start","end","cancel","interrupt"),ai=[];function hi(t,e,i,n,s,r){var a=t.__transition;if(a){if(i in a)return}else t.__transition={};!function(t,e,i){function n(o){var l,u;if(1!==i.state)return r();for(d in h){var c=h[d];if(c.name===i.name){if(3===c.state)return si(n);4===c.state?(c.state=6,c.timer.stop(),c.on.call("interrupt",t,t.__data__,c.index,c.group),delete h[d]):+d<e&&(c.state=6,c.timer.stop(),c.on.call("cancel",t,t.__data__,c.index,c.group),delete h[d])}}if(si((function(){3===i.state&&(i.state=4,i.timer.restart(s,i.delay,i.time),s(o))})),i.state=2,i.on.call("start",t,t.__data__,i.index,i.group),2===i.state){i.state=3,a=Array(u=i.tween.length);var d=0;for(l=-1;d<u;++d)(c=i.tween[d].value.call(t,t.__data__,i.index,i.group))&&(a[++l]=c);a.length=l+1}}function s(e){e=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(r),i.state=5,1);for(var n=-1,s=a.length;++n<s;)a[n].call(t,e);5===i.state&&(i.on.call("end",t,t.__data__,i.index,i.group),r())}function r(){for(var n in i.state=6,i.timer.stop(),delete h[e],h)return;delete t.__transition}var a,h=t.__transition;h[e]=i,i.timer=ti((function(t){i.state=1,i.timer.restart(n,i.delay,i.time),i.delay<=t&&n(t-i.delay)}),0,i.time)}(t,i,{name:e,index:n,group:s,on:ri,tween:ai,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function oi(t,e){if((t=ui(t,e)).state>0)throw Error("too late; already scheduled");return t}function li(t,e){if((t=ui(t,e)).state>3)throw Error("too late; already running");return t}function ui(t,e){if(!(t=t.__transition)||!(t=t[e]))throw Error("transition not found");return t}function ci(t,e){var i,n;return function(){var s=li(this,t),r=s.tween;if(r!==i){n=i=r,r=0;for(var a=n.length;r<a;++r)if(n[r].name===e){(n=n.slice()).splice(r,1);break}}s.tween=n}}function di(t,e,i){var n,s;if("function"!=typeof i)throw Error();return function(){var r=li(this,t),a=r.tween;if(a!==n){s=(n=a).slice(),a={name:e,value:i};for(var h=0,o=s.length;h<o;++h)if(s[h].name===e){s[h]=a;break}h===o&&s.push(a)}r.tween=s}}function fi(t,e,i){var n=t._id;return t.each((function(){var t=li(this,n);(t.value||(t.value={}))[e]=i.apply(this,arguments)})),function(t){return ui(t,n).value[e]}}function pi(t,e){var i;return("number"==typeof e?Fe:e instanceof he?Se:(i=he(e))?(e=i,Se):We)(t,e)}function gi(t){return function(){this.removeAttribute(t)}}function yi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mi(t,e,i){var n,s,r=i+"";return function(){var a=this.getAttribute(t);return a===r?null:a===n?s:s=e(n=a,i)}}function vi(t,e,i){var n,s,r=i+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===n?s:s=e(n=a,i)}}function bi(t,e,i){var n,s,r;return function(){var a=i(this);if(null!=a){var h=this.getAttribute(t),o=a+"";return h===o?null:h===n&&o===s?r:(s=o,r=e(n=h,a))}this.removeAttribute(t)}}function xi(t,e,i){var n,s,r;return function(){var a=i(this);if(null!=a){var h=this.getAttributeNS(t.space,t.local),o=a+"";return h===o?null:h===n&&o===s?r:(s=o,r=e(n=h,a))}this.removeAttributeNS(t.space,t.local)}}function ki(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function wi(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function Si(t,e){function i(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&wi(t,i)),n}var n,s;return i._value=e,i}function _i(t,e){function i(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&ki(t,i)),n}var n,s;return i._value=e,i}function Mi(t,e){return function(){oi(this,t).delay=+e.apply(this,arguments)}}function Ai(t,e){return e=+e,function(){oi(this,t).delay=e}}function Fi(t,e){return function(){li(this,t).duration=+e.apply(this,arguments)}}function Ci(t,e){return e=+e,function(){li(this,t).duration=e}}function zi(t,e){if("function"!=typeof e)throw Error();return function(){li(this,t).ease=e}}function Oi(t,e,i){var n,s,r=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?oi:li;return function(){var a=r(this,t),h=a.on;h!==n&&(s=(n=h).copy()).on(e,i),a.on=s}}var Wi=Tt.prototype.constructor;function ji(t){return function(){this.style.removeProperty(t)}}function Pi(t,e,i){return function(n){this.style.setProperty(t,e.call(this,n),i)}}function $i(t,e,i){function n(){var n=e.apply(this,arguments);return n!==r&&(s=(r=n)&&Pi(t,n,i)),s}var s,r;return n._value=e,n}function Li(t){return function(e){this.textContent=t.call(this,e)}}function Ei(t){function e(){var e=t.apply(this,arguments);return e!==n&&(i=(n=e)&&Li(e)),i}var i,n;return e._value=t,e}var Ri=0;function Ni(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function Ii(){return++Ri}var Ti=Tt.prototype;Ni.prototype=function(t){return Tt().transition(t)}.prototype={constructor:Ni,select:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=L(t));for(var n=this._groups,s=n.length,r=Array(s),a=0;a<s;++a)for(var h,o,l=n[a],u=l.length,c=r[a]=Array(u),d=0;d<u;++d)(h=l[d])&&(o=t.call(h,h.__data__,d,l))&&("__data__"in h&&(o.__data__=h.__data__),c[d]=o,hi(c[d],e,i,d,c,ui(h,i)));return new Ni(r,this._parents,e,i)},selectAll:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=N(t));for(var n=this._groups,s=n.length,r=[],a=[],h=0;h<s;++h)for(var o,l=n[h],u=l.length,c=0;c<u;++c)if(o=l[c]){for(var d,f=t.call(o,o.__data__,c,l),p=ui(o,i),g=0,y=f.length;g<y;++g)(d=f[g])&&hi(d,e,i,g,f,p);r.push(f),a.push(o)}return new Ni(r,a,e,i)},filter:function(t){"function"!=typeof t&&(t=I(t));for(var e=this._groups,i=e.length,n=Array(i),s=0;s<i;++s)for(var r,a=e[s],h=a.length,o=n[s]=[],l=0;l<h;++l)(r=a[l])&&t.call(r,r.__data__,l,a)&&o.push(r);return new Ni(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw Error();var e=this._groups;t=t._groups;for(var i=e.length,n=Math.min(i,t.length),s=Array(i),r=0;r<n;++r)for(var a,h=e[r],o=t[r],l=h.length,u=s[r]=Array(l),c=0;c<l;++c)(a=h[c]||o[c])&&(u[c]=a);for(;r<i;++r)s[r]=e[r];return new Ni(s,this._parents,this._name,this._id)},selection:function(){return new Wi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,i=Ii(),n=this._groups,s=n.length,r=0;r<s;++r)for(var a,h=n[r],o=h.length,l=0;l<o;++l)if(a=h[l]){var u=ui(a,e);hi(a,t,i,l,h,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ni(n,this._parents,t,i)},call:Ti.call,nodes:Ti.nodes,node:Ti.node,size:Ti.size,empty:Ti.empty,each:Ti.each,on:function(t,e){var i=this._id;return 2>arguments.length?ui(this.node(),i).on.on(t):this.each(Oi(i,t,e))},attr:function(t,e){var i=O(t),n="transform"===i?Ge:pi;return this.attrTween(t,"function"==typeof e?(i.local?xi:bi)(i,n,fi(this,"attr."+t,e)):null==e?(i.local?yi:gi)(i):(i.local?vi:mi)(i,n,e))},attrTween:function(t,e){var i="attr."+t;if(2>arguments.length)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw Error();var n=O(t);return this.tween(i,(n.local?Si:_i)(n,e))},style:function(t,e,i){var n="transform"==(t+="")?Ve:pi;return null==e?this.styleTween(t,function(t,e){var i,n,s;return function(){var r=ot(this,t),a=(this.style.removeProperty(t),ot(this,t));return r===a?null:r===i&&a===n?s:s=e(i=r,n=a)}}(t,n)).on("end.style."+t,ji(t)):"function"==typeof e?this.styleTween(t,function(t,e,i){var n,s,r;return function(){var a=ot(this,t),h=i(this),o=h+"";return null==h&&(this.style.removeProperty(t),o=h=ot(this,t)),a===o?null:a===n&&o===s?r:(s=o,r=e(n=a,h))}}(t,n,fi(this,"style."+t,e))).each(function(t,e){var i,n,s,r,a="style."+e,h="end."+a;return function(){var o=li(this,t),l=o.on,u=null==o.value[a]?r||(r=ji(e)):void 0;l===i&&s===u||(n=(i=l).copy()).on(h,s=u),o.on=n}}(this._id,t)):this.styleTween(t,function(t,e,i){var n,s,r=i+"";return function(){var a=ot(this,t);return a===r?null:a===n?s:s=e(n=a,i)}}(t,n,e),i).on("end.style."+t,null)},styleTween:function(t,e,i){var n="style."+(t+="");if(2>arguments.length)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw Error();return this.tween(n,$i(t,e,null==i?"":i))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(fi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(1>arguments.length)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw Error();return this.tween(e,Ei(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e,i=this.parentNode;for(e in this.__transition)if(+e!==t)return;i&&i.removeChild(this)}));var t},tween:function(t,e){var i=this._id;if(t+="",2>arguments.length){for(var n,s=0,r=(i=ui(this.node(),i).tween).length;s<r;++s)if((n=i[s]).name===t)return n.value;return null}return this.each((null==e?ci:di)(i,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Mi:Ai)(e,t)):ui(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fi:Ci)(e,t)):ui(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(zi(e,t)):ui(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw Error();return this.each(function(t,e){return function(){var i=e.apply(this,arguments);if("function"!=typeof i)throw Error();li(this,t).ease=i}}(this._id,t))},end:function(){var t,e,i=this,n=i._id,s=i.size();return new Promise((function(r,a){var h={value:a},o={value:function(){0==--s&&r()}};i.each((function(){var i=li(this,n),s=i.on;s!==t&&((e=(t=s).copy())._.cancel.push(h),e._.interrupt.push(h),e._.end.push(o)),i.on=e})),0===s&&r()}))},[Symbol.iterator]:Ti[Symbol.iterator]};var Vi={time:null,delay:0,duration:250,ease:function(t){return(1>=(t*=2)?t*t*t:(t-=2)*t*t+2)/2}};function Gi(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw Error(`transition ${e} not found`);return i}Tt.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var i,n,s=t.__transition,r=!0;if(s){for(n in e=null==e?null:e+"",s)if((i=s[n]).name!==e)r=!1;else{var a=i.state>2&&i.state<5;i.state=6,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete s[n]}r&&delete t.__transition}}(this,t)}))},Tt.prototype.transition=function(t){var e;if(t instanceof Ni){var i=t._id;t=t._name}else i=Ii(),(e=Vi).time=Qe(),t=null==t?null:t+"";for(var n=this._groups,s=n.length,r=0;r<s;++r)for(var a,h=n[r],o=h.length,l=0;l<o;++l)(a=h[l])&&hi(a,t,i,l,h,e||Gi(a,i));return new Ni(n,this._parents,t,i)};let Di=Math.PI,qi=2*Di,Bi=qi-1e-6;function Xi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Yi(){return new Xi}Xi.prototype=Yi.prototype={constructor:Xi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(t,e,i,n,s,r){this._+="C"+ +t+","+ +e+","+ +i+","+ +n+","+(this._x1=+s)+","+(this._y1=+r)},arcTo:function(t,e,i,n,s){t=+t,e=+e,i=+i,n=+n,s=+s;var r=this._x1,a=this._y1,h=i-t,o=n-e,l=r-t,u=a-e,c=l*l+u*u;if(0>s)throw Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>1e-6)if(Math.abs(u*h-o*l)>1e-6&&s){i-=r,n-=a;var d=h*h+o*o;a=Math.sqrt(d),r=Math.sqrt(c),r=(c=s*Math.tan((Di-Math.acos((d+c-(i*i+n*n))/(2*a*r)))/2))/r,c/=a,Math.abs(r-1)>1e-6&&(this._+="L"+(t+r*l)+","+(e+r*u)),this._+="A"+s+","+s+",0,0,"+ +(u*i>l*n)+","+(this._x1=t+c*h)+","+(this._y1=e+c*o)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,i,n,s,r){t=+t,e=+e,r=!!r;var a=(i=+i)*Math.cos(n),h=i*Math.sin(n),o=t+a,l=e+h,u=1^r;if(n=r?n-s:s-n,0>i)throw Error("negative radius: "+i);null===this._x1?this._+="M"+o+","+l:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+o+","+l),i&&(0>n&&(n=n%qi+qi),n>Bi?this._+="A"+i+","+i+",0,1,"+u+","+(t-a)+","+(e-h)+"A"+i+","+i+",0,1,"+u+","+(this._x1=o)+","+(this._y1=l):n>1e-6&&(this._+="A"+i+","+i+",0,"+ +(n>=Di)+","+u+","+(this._x1=t+i*Math.cos(s))+","+(this._y1=e+i*Math.sin(s))))},rect:function(t,e,i,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};var Hi={},Zi={};function Ui(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Qi(t){var e=Object.create(null),i=[];return t.forEach((function(t){for(var n in t)n in e||i.push(e[n]=n)})),i}function Ki(t,e){var i=(t+="").length;return i<e?Array(e-i+1).join(0)+t:t}function Ji(t){var e=t.getUTCHours(),i=t.getUTCMinutes(),n=t.getUTCSeconds(),s=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return 0>t?"-"+Ki(-t,6):9999<t?"+"+Ki(t,6):Ki(t,4)}(t.getUTCFullYear())+"-"+Ki(t.getUTCMonth()+1,2)+"-"+Ki(t.getUTCDate(),2)+(s?"T"+Ki(e,2)+":"+Ki(i,2)+":"+Ki(n,2)+"."+Ki(s,3)+"Z":n?"T"+Ki(e,2)+":"+Ki(i,2)+":"+Ki(n,2)+"Z":i||e?"T"+Ki(e,2)+":"+Ki(i,2)+"Z":"")}function tn(t){function e(t,e){function i(){if(l)return Zi;if(u)return u=!1,Hi;var e,i,n=h;if(34===t.charCodeAt(n)){for(;h++<r&&34!==t.charCodeAt(h)||34===t.charCodeAt(++h););return(e=h)>=r?l=!0:10===(i=t.charCodeAt(h++))?u=!0:13===i&&(u=!0,10===t.charCodeAt(h)&&++h),t.slice(n+1,e-1).replace(/""/g,'"')}for(;h<r;){if(10===(i=t.charCodeAt(e=h++)))u=!0;else if(13===i)u=!0,10===t.charCodeAt(h)&&++h;else if(i!==a)continue;return t.slice(n,e)}return l=!0,t.slice(n,r)}var n,s=[],r=t.length,h=0,o=0,l=0>=r,u=!1;for(10===t.charCodeAt(r-1)&&--r,13===t.charCodeAt(r-1)&&--r;(n=i())!==Zi;){for(var c=[];n!==Hi&&n!==Zi;)c.push(n),n=i();e&&null==(c=e(c,o++))||s.push(c)}return s}function i(e,i){return e.map((function(e){return i.map((function(t){return s(e[t])})).join(t)}))}function n(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?Ji(t):r.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var r=new RegExp('["'+t+"\n\r]"),a=t.charCodeAt(0);return{parse:function(t,i){var n,s;return(t=e(t,(function(t,e){if(n)return n(t,e-1);s=t,n=i?function(t,e){var i=Ui(t);return function(n,s){return e(i(n),s,t)}}(t,i):Ui(t)}))).columns=s||[],t},parseRows:e,format:function(e,n){return null==n&&(n=Qi(e)),[n.map(s).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Qi(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(n).join("\n")},formatRow:n,formatValue:s}}var en=tn(",").parse,nn=tn("\t").parse;function sn(t){if(!t.ok)throw Error(t.status+" "+t.statusText);return t.text()}function rn(t,e){return fetch(t,e).then(sn)}function an(t){return function(e,i,n){return 2===arguments.length&&"function"==typeof i&&(n=i,i=void 0),rn(e,i).then((function(e){return t(e,n)}))}}var hn=an(en),on=an(nn);function ln(t){if(!t.ok)throw Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function un(t,e){return fetch(t,e).then(ln)}function cn(t,e){if(0>(e=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e")))return null;var i=t.slice(0,e);return[1<i.length?i[0]+i.slice(2):i,+t.slice(e+1)]}function dn(t){return(t=cn(Math.abs(t)))?t[1]:NaN}var fn,pn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gn(t){if(!(e=pn.exec(t)))throw Error("invalid format: "+t);var e;return new yn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function yn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function mn(t,e){return(e=cn(t,e))?(t=e[0],0>(e=e[1])?"0."+Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+Array(e-t.length+2).join("0")):t+""}gn.prototype=yn.prototype,yn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var vn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>mn(100*t,e),r:mn,s:function(t,e){var i=cn(t,e);if(!i)return t+"";var n=i[0];i=(i=i[1])-(fn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1;var s=n.length;return i===s?n:i>s?n+Array(i-s+1).join("0"):0<i?n.slice(0,i)+"."+n.slice(i):"0."+Array(1-i).join("0")+cn(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function bn(t){return t}var xn,kn,wn,Sn=Array.prototype.map,_n="y z a f p n µ m  k M G T P E Z Y".split(" ");function Mn(t){function e(t){function e(t){var e,n,s=x,h=k;if("c"===b)h=w(t)+h,t="";else{var f=0>(t=+t)||0>1/t;if(t=isNaN(t)?l:w(Math.abs(t),m),v&&(t=function(t){var e,i=t.length,n=1,s=-1;t:for(;n<i;++n)switch(t[n]){case".":s=e=n;break;case"0":0===s&&(s=n),e=n;break;default:if(!+t[n])break t;0<s&&(s=0)}return 0<s?t.slice(0,s)+t.slice(e+1):t}(t)),f&&0==+t&&"+"!==d&&(f=!1),s=(f?"("===d?d:o:"-"===d||"("===d?"":d)+s,h=("s"===b?_n[8+fn/3]:"")+h+(f&&"("===d?")":""),S)for(f=-1,e=t.length;++f<e;)if(48>(n=t.charCodeAt(f))||57<n){h=(46===n?r+t.slice(f+1):t.slice(f))+h,t=t.slice(0,f);break}}switch(y&&!p&&(t=i(t,1/0)),f=(n=s.length+t.length+h.length)<g?Array(g-n+1).join(u):"",y&&p&&(t=i(f+t,f.length?g-h.length:1/0),f=""),c){case"<":t=s+t+h+f;break;case"=":t=s+f+t+h;break;case"^":t=f.slice(0,n=f.length>>1)+s+t+h+f.slice(n);break;default:t=f+s+t+h}return a(t)}var u=(t=gn(t)).fill,c=t.align,d=t.sign,f=t.symbol,p=t.zero,g=t.width,y=t.comma,m=t.precision,v=t.trim,b=t.type;"n"===b?(y=!0,b="g"):vn[b]||(void 0===m&&(m=12),v=!0,b="g"),(p||"0"===u&&"="===c)&&(p=!0,u="0",c="=");var x="$"===f?n:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",k="$"===f?s:/[%p]/.test(b)?h:"",w=vn[b],S=/[defgprs%]/.test(b);return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),e.toString=function(){return t+""},e}var i=void 0===t.grouping||void 0===t.thousands?bn:function(t,e){return function(i,n){for(var s=i.length,r=[],a=0,h=t[0],o=0;0<s&&0<h&&(o+h+1>n&&(h=Math.max(1,n-o)),r.push(i.substring(s-=h,s+h)),!((o+=h+1)>n));)h=t[a=(a+1)%t.length];return r.reverse().join(e)}}(Sn.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?bn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Sn.call(t.numerals,String)),h=void 0===t.percent?"%":t.percent+"",o=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";return{format:e,formatPrefix:function(t,i){var n=e(((t=gn(t)).type="f",t));t=3*Math.max(-8,Math.min(8,Math.floor(dn(i)/3)));var s=Math.pow(10,-t),r=_n[8+t/3];return function(t){return n(s*t)+r}}}}function An(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}xn=Mn({thousands:",",grouping:[3],currency:["$",""]}),kn=xn.format,wn=xn.formatPrefix;let Fn=Symbol("implicit");function Cn(){function t(t){var r=t+"",a=e.get(r);if(!a){if(s!==Fn)return s;e.set(r,a=i.push(t))}return n[(a-1)%n.length]}var e=new Map,i=[],n=[],s=Fn;return t.domain=function(n){if(!arguments.length)return i.slice();i=[],e=new Map;for(let t of n){let n=t+"";e.has(n)||e.set(n,i.push(t))}return t},t.range=function(e){return arguments.length?(n=Array.from(e),t):n.slice()},t.unknown=function(e){return arguments.length?(s=e,t):s},t.copy=function(){return Cn(i,n).unknown(s)},An.apply(t,arguments),t}function zn(){function t(){var t=s().length,n=h<a,f=n?h:a,p=n?a:h;return e=(p-f)/Math.max(1,t-l+2*u),o&&(e=Math.floor(e)),f+=(p-f-e*(t-l))*d,i=e*(1-l),o&&(f=Math.round(f),i=Math.round(i)),t=c(t).map((function(t){return f+e*t})),r(n?t.reverse():t)}var e,i,n=Cn().unknown(void 0),s=n.domain,r=n.range,a=0,h=1,o=!1,l=0,u=0,d=.5;return delete n.unknown,n.domain=function(e){return arguments.length?(s(e),t()):s()},n.range=function(e){return arguments.length?([a,h]=e,a=+a,h=+h,t()):[a,h]},n.rangeRound=function(e){return[a,h]=e,a=+a,h=+h,o=!0,t()},n.bandwidth=function(){return i},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,t()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,u=+e),t()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),t()):l},n.paddingOuter=function(e){return arguments.length?(u=+e,t()):u},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),t()):d},n.copy=function(){return zn(s(),[a,h]).round(o).paddingInner(l).paddingOuter(u).align(d)},An.apply(t(),arguments)}function On(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return On(e())},t}function Wn(){return On(zn.apply(null,arguments).paddingInner(1))}function jn(t){return+t}var Pn=[0,1];function $n(t){return t}function Ln(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function En(t,e,i){var n=t[0];t=t[1];var s=e[0];return e=e[1],t<n?(n=Ln(t,n),s=i(e,s)):(n=Ln(n,t),s=i(s,e)),function(t){return s(n(t))}}function Rn(t,e,i){var s=Math.min(t.length,e.length)-1,r=Array(s),a=Array(s),h=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++h<s;)r[h]=Ln(t[h],t[h+1]),a[h]=i(e[h],e[h+1]);return function(e){var i=n(t,e,1,s)-1;return a[i](r[i](e))}}function Nn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function In(){function t(){var t=Math.min(o.length,l.length);return c!==$n&&(c=function(t,e){if(t>e){var i=t;t=e,e=i}return function(i){return Math.max(t,Math.min(e,i))}}(o[0],o[t-1])),r=2<t?Rn:En,a=h=null,e}function e(t){return isNaN(t=+t)?s:(a||(a=r(o.map(i),l,u)))(i(c(t)))}var i,n,s,r,a,h,o=Pn,l=Pn,u=je,c=$n;return e.invert=function(t){return c(n((h||(h=r(l,o.map(i),Fe)))(t)))},e.domain=function(e){return arguments.length?(o=Array.from(e,jn),t()):o.slice()},e.range=function(e){return arguments.length?(l=Array.from(e),t()):l.slice()},e.rangeRound=function(e){return l=Array.from(e),u=Pe,t()},e.clamp=function(e){return arguments.length?(c=!!e||$n,t()):c!==$n},e.interpolate=function(e){return arguments.length?(u=e,t()):u},e.unknown=function(t){return arguments.length?(s=t,e):s},function(e,s){return i=e,n=s,t()}}function Tn(){return In()($n,$n)}function Vn(t,e,i,n){var s;switch(i=function(t,e,i){var n=Math.abs(e-t)/Math.max(0,i);return(n/=i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)))>=r?i*=10:n>=a?i*=5:n>=h&&(i*=2),e<t?-i:i}(t,e,i),(n=gn(null==n?",f":n)).type){case"s":return t=Math.max(Math.abs(t),Math.abs(e)),null!=n.precision||isNaN(s=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(dn(e)/3)))-dn(Math.abs(t)))}(i,t))||(n.precision=s),wn(n,t);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(s=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,dn(e)-dn(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=s-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(s=function(t){return Math.max(0,-dn(Math.abs(t)))}(i))||(n.precision=s-2*("%"===n.type))}return kn(n)}function Gn(t){var e=t.domain;return t.ticks=function(t){var i=e();return function(t,e,i){var n,s,r=-1;if(i=+i,(t=+t)==(e=+e)&&0<i)return[t];if(n=e<t){var a=t;t=e,e=a}if(0===(s=o(t,e,i))||!isFinite(s))return[];if(0<s)for(t=Math.ceil(t/s),e=Math.floor(e/s),e=Array(a=Math.ceil(e-t+1));++r<a;)e[r]=(t+r)*s;else for(s=-s,t=Math.ceil(t*s),e=Math.floor(e*s),e=Array(a=Math.ceil(e-t+1));++r<a;)e[r]=(t+r)/s;return n&&e.reverse(),e}(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,i){var n=e();return Vn(n[0],n[n.length-1],null==t?10:t,i)},t.nice=function(i){null==i&&(i=10);var n=e(),s=0,r=n.length-1,a=n[s],h=n[r],l=10;if(h<a){var u=a;a=h,h=u,u=s,s=r,r=u}for(;0<l--;){if((u=o(a,h,i))===c)return n[s]=a,n[r]=h,e(n);if(0<u)a=Math.floor(a/u)*u,h=Math.ceil(h/u)*u;else{if(!(0>u))break;a=Math.ceil(a*u)/u,h=Math.floor(h*u)/u}var c=u}return t},t}function Dn(){var t=Tn();return t.copy=function(){return Nn(t,Dn())},An.apply(t,arguments),Gn(t)}function qn(t){return function(){return t}}var Bn=Math.abs,Xn=Math.atan2,Yn=Math.cos,Hn=Math.max,Zn=Math.min,Un=Math.sin,Qn=Math.sqrt,Kn=Math.PI,Jn=Kn/2,ts=2*Kn;function es(t){return 1<t?0:-1>t?Kn:Math.acos(t)}function is(t){return 1<=t?Jn:-1>=t?-Jn:Math.asin(t)}function ns(t){return t.innerRadius}function ss(t){return t.outerRadius}function rs(t){return t.startAngle}function as(t){return t.endAngle}function hs(t){return t&&t.padAngle}function os(t,e,i,n,s,r,a,h){var o=(h-=r)*(i-=t)-(a-=s)*(n-=e);if(!(o*o<1e-12))return[t+(o=(a*(e-r)-h*(t-s))/o)*i,e+o*n]}function ls(t,e,i,n,s,r,a){var h=t-i,o=e-n,l=t+(o*=a=(a?r:-r)/Qn(h*h+o*o)),u=e+(h*=-a),c=i+o,d=n+h;i=(l+c)/2,n=(u+d)/2;var f=(0>(t=d-u)?-1:1)*Qn(Hn(0,(r=s-r)*r*(a=(e=c-l)*e+t*t)-(d=l*d-c*u)*d));return l=(d*t-e*f)/a,u=(-d*e-t*f)/a,c=(d*t+e*f)/a,e=(-d*e+t*f)/a,(t=l-i)*t+(a=u-n)*a>(i=c-i)*i+(n=e-n)*n&&(l=c,u=e),{cx:l,cy:u,x01:-o,y01:-h,x11:l*(s/r-1),y11:u*(s/r-1)}}function us(){function t(){var t,l=+e.apply(this,arguments),u=+i.apply(this,arguments),c=r.apply(this,arguments)-Jn,d=a.apply(this,arguments)-Jn,f=Bn(d-c),p=d>c;if(o||(o=t=Yi()),u<l){var g=u;u=l,l=g}if(u>1e-12)if(f>ts-1e-12)o.moveTo(u*Yn(c),u*Un(c)),o.arc(0,0,u,c,d,!p),l>1e-12&&(o.moveTo(l*Yn(d),l*Un(d)),o.arc(0,0,l,d,c,p));else{var y=c,m=d;g=c;var v=d,b=f,x=f,k=h.apply(this,arguments)/2,w=k>1e-12&&(s?+s.apply(this,arguments):Qn(l*l+u*u)),S=Zn(Bn(u-l)/2,+n.apply(this,arguments)),_=S,M=S;if(w>1e-12){var A=is(w/l*Un(k));(b-=2*A)>1e-12?(g+=A*=p?1:-1,v-=A):(b=0,g=v=(c+d)/2),(x-=2*(k=is(w/u*Un(k))))>1e-12?(y+=k*=p?1:-1,m-=k):(x=0,y=m=(c+d)/2)}if(c=u*Yn(y),d=u*Un(y),A=l*Yn(v),k=l*Un(v),S>1e-12){var F,C=u*Yn(m),z=u*Un(m),O=l*Yn(g),W=l*Un(g);f<Kn&&(F=os(c,d,O,W,C,z,A,k))&&(_=c-F[0],M=d-F[1],f=C-F[0],w=z-F[1],M=1/Un(es((_*f+M*w)/(Qn(_*_+M*M)*Qn(f*f+w*w)))/2),F=Qn(F[0]*F[0]+F[1]*F[1]),_=Zn(S,(l-F)/(M-1)),M=Zn(S,(u-F)/(M+1)))}x>1e-12?M>1e-12?(y=ls(O,W,c,d,u,M,p),m=ls(C,z,A,k,u,M,p),o.moveTo(y.cx+y.x01,y.cy+y.y01),M<S?o.arc(y.cx,y.cy,M,Xn(y.y01,y.x01),Xn(m.y01,m.x01),!p):(o.arc(y.cx,y.cy,M,Xn(y.y01,y.x01),Xn(y.y11,y.x11),!p),o.arc(0,0,u,Xn(y.cy+y.y11,y.cx+y.x11),Xn(m.cy+m.y11,m.cx+m.x11),!p),o.arc(m.cx,m.cy,M,Xn(m.y11,m.x11),Xn(m.y01,m.x01),!p))):(o.moveTo(c,d),o.arc(0,0,u,y,m,!p)):o.moveTo(c,d),l>1e-12&&b>1e-12?_>1e-12?(y=ls(A,k,C,z,l,-_,p),m=ls(c,d,O,W,l,-_,p),o.lineTo(y.cx+y.x01,y.cy+y.y01),_<S?o.arc(y.cx,y.cy,_,Xn(y.y01,y.x01),Xn(m.y01,m.x01),!p):(o.arc(y.cx,y.cy,_,Xn(y.y01,y.x01),Xn(y.y11,y.x11),!p),o.arc(0,0,l,Xn(y.cy+y.y11,y.cx+y.x11),Xn(m.cy+m.y11,m.cx+m.x11),p),o.arc(m.cx,m.cy,_,Xn(m.y11,m.x11),Xn(m.y01,m.x01),!p))):o.arc(0,0,l,v,g,p):o.lineTo(A,k)}else o.moveTo(0,0);if(o.closePath(),t)return o=null,t+""||null}var e=ns,i=ss,n=qn(0),s=null,r=rs,a=as,h=hs,o=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +i.apply(this,arguments))/2,n=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Kn/2;return[Yn(n)*t,Un(n)*t]},t.innerRadius=function(i){return arguments.length?(e="function"==typeof i?i:qn(+i),t):e},t.outerRadius=function(e){return arguments.length?(i="function"==typeof e?e:qn(+e),t):i},t.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:qn(+e),t):n},t.padRadius=function(e){return arguments.length?(s=null==e?null:"function"==typeof e?e:qn(+e),t):s},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:qn(+e),t):r},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:qn(+e),t):a},t.padAngle=function(e){return arguments.length?(h="function"==typeof e?e:qn(+e),t):h},t.context=function(e){return arguments.length?(o=null==e?null:e,t):o},t}function cs(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ds(t){this._context=t}function fs(t){return new ds(t)}function ps(t){return t[0]}function gs(t){return t[1]}function ys(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function ms(t){return t}function vs(){function t(t){var h,o,l=(t=cs(t)).length,u=0,c=Array(l),d=Array(l),f=+s.apply(this,arguments),p=Math.min(ts,Math.max(-ts,r.apply(this,arguments)-f)),g=Math.min(Math.abs(p)/l,a.apply(this,arguments)),y=g*(0>p?-1:1);for(h=0;h<l;++h)0<(o=d[c[h]=h]=+e(t[h],h,t))&&(u+=o);for(null!=i?c.sort((function(t,e){return i(d[t],d[e])})):null!=n&&c.sort((function(e,i){return n(t[e],t[i])})),h=0,p=u?(p-l*y)/u:0;h<l;++h,f=m){u=c[h];var m=f+(0<(o=d[u])?o*p:0)+y;d[u]={data:t[u],index:h,value:o,startAngle:f,endAngle:m,padAngle:g}}return d}var e=ms,i=ys,n=null,s=qn(0),r=qn(ts),a=qn(0);return t.value=function(i){return arguments.length?(e="function"==typeof i?i:qn(+i),t):e},t.sortValues=function(e){return arguments.length?(i=e,n=null,t):i},t.sort=function(e){return arguments.length?(n=e,i=null,t):n},t.startAngle=function(e){return arguments.length?(s="function"==typeof e?e:qn(+e),t):s},t.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:qn(+e),t):r},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:qn(+e),t):a},t}function bs(t,e,i){if(t&&t.length){let[n,s]=e;e=Math.PI/180*i;let r=Math.cos(e),a=Math.sin(e);t.forEach((t=>{let[e,i]=t;t[0]=(e-n)*r-(i-s)*a+n,t[1]=(e-n)*a+(i-s)*r+s}))}}function xs(t){let e=t[0];return t=t[1],Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function ks(t,e,i,n){let s=e[1]-t[1];e=t[0]-e[0],t=s*t[0]+e*t[1];let r=n[1]-i[1];n=i[0]-n[0],i=r*i[0]+n*i[1];let a=s*n-r*e;return a?[(n*t-e*i)/a,(s*i-r*t)/a]:null}function ws(t,e,i){let n=t.length;if(3>n)return!1;let s=[Number.MAX_SAFE_INTEGER,i];e=[e,i],i=0;for(let r=0;r<n;r++){let a=t[r],h=t[(r+1)%n];if(Ms(a,h,e,s)){if(0===_s(a,e,h))return Ss(a,e,h);i++}}return 1==i%2}function Ss(t,e,i){return e[0]<=Math.max(t[0],i[0])&&e[0]>=Math.min(t[0],i[0])&&e[1]<=Math.max(t[1],i[1])&&e[1]>=Math.min(t[1],i[1])}function _s(t,e,i){return 0===(t=(e[1]-t[1])*(i[0]-e[0])-(e[0]-t[0])*(i[1]-e[1]))?0:0<t?1:2}function Ms(t,e,i,n){let s=_s(t,e,i),r=_s(t,e,n),a=_s(i,n,t),h=_s(i,n,e);return s!==r&&a!==h||!(0!==s||!Ss(t,i,e))||!(0!==r||!Ss(t,n,e))||!(0!==a||!Ss(i,t,n))||!(0!==h||!Ss(i,e,n))}function As(t,e){let i=[0,0],n=Math.round(e.hachureAngle+90);return n&&bs(t,i,n),e=function(t,e){var i=[...t];if(i[0].join(",")!==i[i.length-1].join(",")&&i.push([i[0][0],i[0][1]]),t=[],i&&2<i.length){let s=e.hachureGap;0>s&&(s=4*e.strokeWidth),s=Math.max(s,.1),e=[];for(var n=0;n<i.length-1;n++){const t=i[n],s=i[n+1];if(t[1]!==s[1]){const i=Math.min(t[1],s[1]);e.push({ymin:i,ymax:Math.max(t[1],s[1]),x:i===t[1]?t[0]:s[0],islope:(s[0]-t[0])/(s[1]-t[1])})}}if(e.sort(((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax))),!e.length)return t;let r=[],a=e[0].ymin;for(;r.length||e.length;){if(e.length){for(i=-1,n=0;n<e.length&&!(e[n].ymin>a);n++)i=n;e.splice(0,i+1).forEach((t=>{r.push({s:a,edge:t})}))}if(r=r.filter((t=>!(t.edge.ymax<=a))),r.sort(((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x))),1<r.length)for(i=0;i<r.length&&!((n=i+1)>=r.length);i+=2)t.push([[Math.round(r[i].edge.x),a],[Math.round(r[n].edge.x),a]]);a+=s,r.forEach((t=>{t.edge.x+=s*t.edge.islope}))}}return t}(t,e),n&&(bs(t,i,-n),function(t,e,i){let n=[];t.forEach((t=>n.push(...t))),bs(n,e,i)}(e,i,-n)),e}ds.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};class Fs{constructor(t){this.helper=t}fillPolygon(t,e){return this._fillPolygon(t,e)}_fillPolygon(t,e,i=!1){let n=As(t,e);return i&&(t=this.connectingLines(t,n),n=n.concat(t)),{type:"fillSketch",ops:this.renderLines(n,e)}}renderLines(t,e){let i=[];for(let n of t)i.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],e));return i}connectingLines(t,e){let i=[];if(1<e.length)for(let s=1;s<e.length;s++){var n=e[s-1];3>xs(n)||3<xs(n=[e[s][0],n[1]])&&(n=this.splitOnIntersections(t,n),i.push(...n))}return i}midPointInPolygon(t,e){return ws(t,(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2)}splitOnIntersections(t,e){for(var i=Math.max(5,.1*xs(e)),n=[],s=0;s<t.length;s++){var r=t[s],a=t[(s+1)%t.length];if(Ms(r,a,...e)&&(r=ks(r,a,e[0],e[1]))){a=xs([r,e[0]]);let t=xs([r,e[1]]);a>i&&t>i&&n.push({point:r,distance:a})}}if(1<n.length){if(i=n.sort(((t,e)=>t.distance-e.distance)).map((t=>t.point)),ws(t,...e[0])||i.shift(),ws(t,...e[1])||i.pop(),1>=i.length)return this.midPointInPolygon(t,e)?[e]:[];for(e=[e[0],...i,e[1]],i=[],n=0;n<e.length-1;n+=2)s=[e[n],e[n+1]],this.midPointInPolygon(t,s)&&i.push(s);return i}return this.midPointInPolygon(t,e)?[e]:[]}}class Cs extends Fs{fillPolygon(t,e){return this._fillPolygon(t,e,!0)}}class zs extends Fs{fillPolygon(t,e){let i=this._fillPolygon(t,e);return e=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),t=this._fillPolygon(t,e),i.ops=i.ops.concat(t.ops),i}}class Os{constructor(t){this.helper=t}fillPolygon(t,e){return t=As(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0,roughness:1})),this.dotsOnLines(t,e)}dotsOnLines(t,e){let i=[],n=e.hachureGap;0>n&&(n=4*e.strokeWidth),n=Math.max(n,.1);let s=e.fillWeight;0>s&&(s=e.strokeWidth/2);let r=n/4;for(let l of t){var a=xs(l);a-=(t=Math.ceil(a/n)-1)*n;let u=(l[0][0]+l[1][0])/2-n/4,c=Math.min(l[0][1],l[1][1]);for(let l=0;l<t;l++){var h=c+a+l*n,o=this.helper.randOffsetWithRange(u-r,u+r,e);h=this.helper.randOffsetWithRange(h-r,h+r,e),o=this.helper.ellipse(o,h,s,s,e),i.push(...o.ops)}}return{type:"fillSketch",ops:i}}}class Ws{constructor(t){this.helper=t}fillPolygon(t,e){return t=As(t,e),{type:"fillSketch",ops:this.dashedLine(t,e)}}dashedLine(t,e){let i=0>e.dashOffset?0>e.hachureGap?4*e.strokeWidth:e.hachureGap:e.dashOffset,n=0>e.dashGap?0>e.hachureGap?4*e.strokeWidth:e.hachureGap:e.dashGap,s=[];return t.forEach((t=>{var r=xs(t);let a=Math.floor(r/(i+n));r=(r+n-a*(i+n))/2;let h=t[0];var o=t[1];for(h[0]>o[0]&&(h=t[1],o=t[0]),t=Math.atan((o[1]-h[1])/(o[0]-h[0])),o=0;o<a;o++){var l=o*(i+n),u=l+i;l=[h[0]+l*Math.cos(t)+r*Math.cos(t),h[1]+l*Math.sin(t)+r*Math.sin(t)],u=[h[0]+u*Math.cos(t)+r*Math.cos(t),h[1]+u*Math.sin(t)+r*Math.sin(t)],s.push(...this.helper.doubleLineOps(l[0],l[1],u[0],u[1],e))}})),s}}class js{constructor(t){this.helper=t}fillPolygon(t,e){let i=0>e.hachureGap?4*e.strokeWidth:e.hachureGap,n=0>e.zigzagOffset?i:e.zigzagOffset;return t=As(t,e=Object.assign({},e,{hachureGap:i+n})),{type:"fillSketch",ops:this.zigzagLines(t,n,e)}}zigzagLines(t,e,i){let n=[];return t.forEach((t=>{var s=xs(t);s=Math.round(s/(2*e));let r=t[0];var a=t[1];for(r[0]>a[0]&&(r=t[1],a=t[0]),t=Math.atan((a[1]-r[1])/(a[0]-r[0])),a=0;a<s;a++){var h=2*a*e,o=2*(a+1)*e,l=Math.sqrt(2*Math.pow(e,2));h=[r[0]+h*Math.cos(t),r[1]+h*Math.sin(t)],o=[r[0]+o*Math.cos(t),r[1]+o*Math.sin(t)],l=[h[0]+l*Math.cos(t+Math.PI/4),h[1]+l*Math.sin(t+Math.PI/4)],n.push(...this.helper.doubleLineOps(h[0],h[1],l[0],l[1],i),...this.helper.doubleLineOps(l[0],l[1],o[0],o[1],i))}})),n}}let Ps={};class $s{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}let Ls={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Es(t,e){return t.type===e}function Rs(t){let e=[];t:{for(var i=t,n=[];""!==i;){if(!i.match(/^([ \t\r\n,]+)/))if(i.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]={type:0,text:RegExp.$1};else{if(!i.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/)){i=[];break t}n[n.length]={type:1,text:""+parseFloat(RegExp.$1)}}i=i.substr(RegExp.$1.length)}n[n.length]={type:2,text:""},i=n}n="BOD";let s=0;for(var r=i[s];!Es(r,2);){let a=0,h=[];if("BOD"===n){if("M"!==r.text&&"m"!==r.text)return Rs("M0,0"+t);s++,a=Ls[r.text],n=r.text}else Es(r,1)?a=Ls[n]:(s++,a=Ls[r.text],n=r.text);if(!(s+a<i.length))throw Error("Path data ended short");for(r=s;r<s+a;r++){let t=i[r];if(!Es(t,1))throw Error("Param not a number: "+n+","+t.text);h[h.length]=+t.text}if("number"!=typeof Ls[n])throw Error("Bad segment: "+n);e.push({key:n,data:h}),s+=a,r=i[s],"M"===n&&(n="L"),"m"===n&&(n="l")}return e}function Ns(t){let e=0,i=0,n=0,s=0,r=[];for(let{key:a,data:h}of t)switch(a){case"M":r.push({key:"M",data:[...h]}),[e,i]=h,[n,s]=h;break;case"m":e+=h[0],i+=h[1],r.push({key:"M",data:[e,i]}),n=e,s=i;break;case"L":r.push({key:"L",data:[...h]}),[e,i]=h;break;case"l":e+=h[0],i+=h[1],r.push({key:"L",data:[e,i]});break;case"C":r.push({key:"C",data:[...h]}),e=h[4],i=h[5];break;case"c":t=h.map(((t,n)=>n%2?t+i:t+e)),r.push({key:"C",data:t}),e=t[4],i=t[5];break;case"Q":r.push({key:"Q",data:[...h]}),e=h[2],i=h[3];break;case"q":t=h.map(((t,n)=>n%2?t+i:t+e)),r.push({key:"Q",data:t}),e=t[2],i=t[3];break;case"A":r.push({key:"A",data:[...h]}),e=h[5],i=h[6];break;case"a":e+=h[5],i+=h[6],r.push({key:"A",data:[h[0],h[1],h[2],h[3],h[4],e,i]});break;case"H":r.push({key:"H",data:[...h]}),e=h[0];break;case"h":e+=h[0],r.push({key:"H",data:[e]});break;case"V":r.push({key:"V",data:[...h]}),i=h[0];break;case"v":i+=h[0],r.push({key:"V",data:[i]});break;case"S":r.push({key:"S",data:[...h]}),e=h[2],i=h[3];break;case"s":t=h.map(((t,n)=>n%2?t+i:t+e)),r.push({key:"S",data:t}),e=t[2],i=t[3];break;case"T":r.push({key:"T",data:[...h]}),e=h[0],i=h[1];break;case"t":e+=h[0],i+=h[1],r.push({key:"T",data:[e,i]});break;case"Z":case"z":r.push({key:"Z",data:[]}),e=n,i=s}return r}function Is(t){let e=[];var i="";let n=0,s=0,r=0,a=0,h=0,o=0;for(let{key:u,data:c}of t){switch(u){case"M":e.push({key:"M",data:[...c]}),[n,s]=c,[r,a]=c;break;case"C":e.push({key:"C",data:[...c]}),n=c[4],s=c[5],h=c[2],o=c[3];break;case"L":e.push({key:"L",data:[...c]}),[n,s]=c;break;case"H":n=c[0],e.push({key:"L",data:[n,s]});break;case"V":s=c[0],e.push({key:"L",data:[n,s]});break;case"S":var l=t=0;"C"===i||"S"===i?(t=n+(n-h),l=s+(s-o)):(t=n,l=s),e.push({key:"C",data:[t,l,...c]}),h=c[0],o=c[1],n=c[2],s=c[3];break;case"T":{let[r,a]=c;l=t=0,"Q"===i||"T"===i?(t=n+(n-h),l=s+(s-o)):(t=n,l=s),e.push({key:"C",data:[n+2*(t-n)/3,s+2*(l-s)/3,r+2*(t-r)/3,a+2*(l-a)/3,r,a]}),h=t,o=l,n=r,s=a;break}case"Q":{let[t,i,r,a]=c;e.push({key:"C",data:[n+2*(t-n)/3,s+2*(i-s)/3,r+2*(t-r)/3,a+2*(i-a)/3,r,a]}),h=t,o=i,n=r,s=a;break}case"A":{i=Math.abs(c[0]),t=Math.abs(c[1]),l=c[2];let r=c[3],a=c[4],h=c[5],o=c[6];0===i||0===t?(e.push({key:"C",data:[n,s,h,o,h,o]}),n=h,s=o):n===h&&s===o||(Vs(n,s,h,o,i,t,l,r,a).forEach((function(t){e.push({key:"C",data:t})})),n=h,s=o);break}case"Z":e.push({key:"Z",data:[]}),n=r,s=a}i=u}return e}function Ts(t,e,i){return[t*Math.cos(i)-e*Math.sin(i),t*Math.sin(i)+e*Math.cos(i)]}function Vs(t,e,i,n,s,r,a,h,o,l){let u=(c=a,Math.PI*c/180);var c;if(c=[],l)[h,d,f,p]=l;else{[t,e]=Ts(t,e,-u),[i,n]=Ts(i,n,-u);var d=(t-i)/2,f=(e-n)/2,p=d*d/(s*s)+f*f/(r*r);1<p&&(s*=p=Math.sqrt(p),r*=p),p=s*s;var g=r*r;f=(h=(h===o?-1:1)*Math.sqrt(Math.abs((p*g-p*f*f-g*d*d)/(p*f*f+g*d*d))))*s*f/r+(t+i)/2,p=h*-r*d/s+(e+n)/2,h=Math.asin(parseFloat(((e-p)/r).toFixed(9))),d=Math.asin(parseFloat(((n-p)/r).toFixed(9))),t<f&&(h=Math.PI-h),i<f&&(d=Math.PI-d),0>h&&(h=2*Math.PI+h),0>d&&(d=2*Math.PI+d),o&&h>d&&(h-=2*Math.PI),!o&&d>h&&(d-=2*Math.PI)}if(Math.abs(d-h)>120*Math.PI/180){c=d,g=i;let t=n;d=o&&d>h?h+120*Math.PI/180:h+120*Math.PI/180*-1,c=Vs(i=f+s*Math.cos(d),n=p+r*Math.sin(d),g,t,s,r,a,0,o,[d,c,f,p])}if(s=4/3*s*(a=Math.tan((d-h)/4)),a*=4/3*r,r=[t,e],t=[t+s*Math.sin(h),e-a*Math.cos(h)],e=[i+s*Math.sin(d),n-a*Math.cos(d)],i=[i,n],t[0]=2*r[0]-t[0],t[1]=2*r[1]-t[1],l)return[t,e,i].concat(c);for(c=[t,e,i].concat(c),l=[],i=0;i<c.length;i+=3)n=Ts(c[i][0],c[i][1],u),t=Ts(c[i+1][0],c[i+1][1],u),e=Ts(c[i+2][0],c[i+2][1],u),l.push([n[0],n[1],t[0],t[1],e[0],e[1]]);return l}let Gs={randOffset:function(t,e){return Ks(t,e)},randOffsetWithRange:function(t,e,i){return Qs(t,e,i)},ellipse:function(t,e,i,n,s){return Xs(t,e,s,i=Bs(i,n,s)).opset},doubleLineOps:function(t,e,i,n,s){return Js(t,e,i,n,s,!0)}};function Ds(t,e,i,n,s){return{type:"path",ops:Js(t,e,i,n,s)}}function qs(t,e,i){let n=(t||[]).length;if(2<n){let s=[];for(let e=0;e<n-1;e++)s.push(...Js(t[e][0],t[e][1],t[e+1][0],t[e+1][1],i));return e&&s.push(...Js(t[n-1][0],t[n-1][1],t[0][0],t[0][1],i)),{type:"path",ops:s}}return 2===n?Ds(t[0][0],t[0][1],t[1][0],t[1][1],i):{type:"path",ops:[]}}function Bs(t,e,i){let n=2*Math.PI/Math.max(i.curveStepCount,i.curveStepCount/Math.sqrt(200)*Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)));t=Math.abs(t/2),e=Math.abs(e/2);let s=1-i.curveFitting;return{increment:n,rx:t+=Ks(t*s,i),ry:e+=Ks(e*s,i)}}function Xs(t,e,i,n){let[s,r]=nr(n.increment,t,e,n.rx,n.ry,1,n.increment*Qs(.1,Qs(.4,1,i),i),i),a=ir(s,null,i);return i.disableMultiStroke||([t]=nr(n.increment,t,e,n.rx,n.ry,1.5,0,i),i=ir(t,null,i),a=a.concat(i)),{estimatedPoints:r,opset:{type:"path",ops:a}}}function Ys(t,e,i,n,s,r,a,h,o){for(i=Math.abs(i/2),n=Math.abs(n/2),i+=Ks(.01*i,o),n+=Ks(.01*n,o);0>s;)s+=2*Math.PI,r+=2*Math.PI;r-s>2*Math.PI&&(s=0,r=2*Math.PI);var l=Math.min(2*Math.PI/o.curveStepCount/2,(r-s)/2);let u=sr(l,t,e,i,n,s,r,1,o);return o.disableMultiStroke||(l=sr(l,t,e,i,n,s,r,1.5,o),u.push(...l)),a&&(h?u.push(...Js(t,e,t+i*Math.cos(s),e+n*Math.sin(s),o),...Js(t,e,t+i*Math.cos(r),e+n*Math.sin(r),o)):u.push({op:"lineTo",data:[t,e]},{op:"lineTo",data:[t+i*Math.cos(s),e+n*Math.sin(s)]})),{type:"path",ops:u}}function Hs(t,e){let i=[];if(t.length){let n=e.maxRandomnessOffset||0,s=t.length;if(2<s){i.push({op:"move",data:[t[0][0]+Ks(n,e),t[0][1]+Ks(n,e)]});for(let r=1;r<s;r++)i.push({op:"lineTo",data:[t[r][0]+Ks(n,e),t[r][1]+Ks(n,e)]})}}return{type:"fillPath",ops:i}}function Zs(t,e){{var i=Gs;let t=e.fillStyle||"hachure";if(!Ps[t])switch(t){case"zigzag":Ps[t]||(Ps[t]=new Cs(i));break;case"cross-hatch":Ps[t]||(Ps[t]=new zs(i));break;case"dots":Ps[t]||(Ps[t]=new Os(i));break;case"dashed":Ps[t]||(Ps[t]=new Ws(i));break;case"zigzag-line":Ps[t]||(Ps[t]=new js(i));break;default:t="hachure",Ps[t]||(Ps[t]=new Fs(i))}i=Ps[t]}return i.fillPolygon(t,e)}function Us(t){return t.randomizer||(t.randomizer=new $s(t.seed||0)),t.randomizer.next()}function Qs(t,e,i,n=1){return i.roughness*n*(Us(i)*(e-t)+t)}function Ks(t,e,i=1){return Qs(-t,t,e,i)}function Js(t,e,i,n,s,r=!1){let a=r?s.disableMultiStrokeFill:s.disableMultiStroke;return r=tr(t,e,i,n,s,!0,!1),a?r:(t=tr(t,e,i,n,s,!0,!0),r.concat(t))}function tr(t,e,i,n,s,r,a){var h=Math.pow(t-i,2)+Math.pow(e-n,2),o=Math.sqrt(h);let l;l=200>o?1:500<o?.4:-.0016668*o+1.233334;let u=s.maxRandomnessOffset||0;u*u*100>h&&(u=o/10),h=u/2,o=.2+.2*Us(s);let c=s.bowing*s.maxRandomnessOffset*(n-e)/200,d=s.bowing*s.maxRandomnessOffset*(t-i)/200;c=Ks(c,s,l),d=Ks(d,s,l);let f=[];return r&&(a?f.push({op:"move",data:[t+Ks(h,s,l),e+Ks(h,s,l)]}):f.push({op:"move",data:[t+Ks(u,s,l),e+Ks(u,s,l)]})),a?f.push({op:"bcurveTo",data:[c+t+(i-t)*o+Ks(h,s,l),d+e+(n-e)*o+Ks(h,s,l),c+t+2*(i-t)*o+Ks(h,s,l),d+e+2*(n-e)*o+Ks(h,s,l),i+Ks(h,s,l),n+Ks(h,s,l)]}):f.push({op:"bcurveTo",data:[c+t+(i-t)*o+Ks(u,s,l),d+e+(n-e)*o+Ks(u,s,l),c+t+2*(i-t)*o+Ks(u,s,l),d+e+2*(n-e)*o+Ks(u,s,l),i+Ks(u,s,l),n+Ks(u,s,l)]}),f}function er(t,e,i){let n=[];n.push([t[0][0]+Ks(e,i),t[0][1]+Ks(e,i)]),n.push([t[0][0]+Ks(e,i),t[0][1]+Ks(e,i)]);for(let s=1;s<t.length;s++)n.push([t[s][0]+Ks(e,i),t[s][1]+Ks(e,i)]),s===t.length-1&&n.push([t[s][0]+Ks(e,i),t[s][1]+Ks(e,i)]);return ir(n,null,i)}function ir(t,e,i){let n=t.length,s=[];if(3<n){let r=[],a=1-i.curveTightness;s.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<n;e++){let i=t[e];r[0]=[i[0],i[1]],r[1]=[i[0]+(a*t[e+1][0]-a*t[e-1][0])/6,i[1]+(a*t[e+1][1]-a*t[e-1][1])/6],r[2]=[t[e+1][0]+(a*t[e][0]-a*t[e+2][0])/6,t[e+1][1]+(a*t[e][1]-a*t[e+2][1])/6],r[3]=[t[e+1][0],t[e+1][1]],s.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}e&&2===e.length&&(t=i.maxRandomnessOffset,s.push({op:"lineTo",data:[e[0]+Ks(t,i),e[1]+Ks(t,i)]}))}else 3===n?(s.push({op:"move",data:[t[1][0],t[1][1]]}),s.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===n&&s.push(...Js(t[0][0],t[0][1],t[1][0],t[1][1],i));return s}function nr(t,e,i,n,s,r,a,h){let o=[],l=[],u=Ks(.5,h)-Math.PI/2;l.push([Ks(r,h)+e+.9*n*Math.cos(u-t),Ks(r,h)+i+.9*s*Math.sin(u-t)]);for(let a=u;a<2*Math.PI+u-.01;a+=t){let t=[Ks(r,h)+e+n*Math.cos(a),Ks(r,h)+i+s*Math.sin(a)];o.push(t),l.push(t)}return l.push([Ks(r,h)+e+n*Math.cos(u+2*Math.PI+.5*a),Ks(r,h)+i+s*Math.sin(u+2*Math.PI+.5*a)]),l.push([Ks(r,h)+e+.98*n*Math.cos(u+a),Ks(r,h)+i+.98*s*Math.sin(u+a)]),l.push([Ks(r,h)+e+.9*n*Math.cos(u+.5*a),Ks(r,h)+i+.9*s*Math.sin(u+.5*a)]),[l,o]}function sr(t,e,i,n,s,r,a,h,o){var l=r+Ks(.1,o);for((r=[]).push([Ks(h,o)+e+.9*n*Math.cos(l-t),Ks(h,o)+i+.9*s*Math.sin(l-t)]);l<=a;l+=t)r.push([Ks(h,o)+e+n*Math.cos(l),Ks(h,o)+i+s*Math.sin(l)]);return r.push([e+n*Math.cos(a),i+s*Math.sin(a)]),r.push([e+n*Math.cos(a),i+s*Math.sin(a)]),ir(r,null,o)}function rr(t,e,i,n,s,r,a,h){let o,l=[],u=[h.maxRandomnessOffset||1,(h.maxRandomnessOffset||1)+.3],c=h.disableMultiStroke?1:2;for(let d=0;d<c;d++)0===d?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+Ks(u[0],h),a[1]+Ks(u[0],h)]}),o=[s+Ks(u[d],h),r+Ks(u[d],h)],l.push({op:"bcurveTo",data:[t+Ks(u[d],h),e+Ks(u[d],h),i+Ks(u[d],h),n+Ks(u[d],h),o[0],o[1]]});return l}function ar(t){return[...t]}function hr(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function or(t,e,i){var n=hr(e,i);return 0===n?hr(t,e):(n=((t[0]-e[0])*(i[0]-e[0])+(t[1]-e[1])*(i[1]-e[1]))/n,hr(t,lr(e,i,n=Math.max(0,Math.min(1,n)))))}function lr(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function ur(t,e,i,n){n=n||[];{var s=t[e+0],r=t[e+1],a=t[e+2];let i=t[e+3];var h=3*r[0]-2*s[0]-i[0];h*=h,r=3*r[1]-2*s[1]-i[1],r*=r;let n=3*a[0]-2*i[0]-s[0];n*=n,s=3*a[1]-2*i[1]-s[1],h<n&&(h=n),r<(s*=s)&&(r=s),a=h+r}var o,l;return a<i?(i=t[e+0],n.length?1<(o=n[n.length-1],l=i,Math.sqrt(hr(o,l)))&&n.push(i):n.push(i),n.push(t[e+3])):(o=t[e+0],h=t[e+1],l=t[e+2],t=t[e+3],e=lr(o,h,.5),r=lr(h,l,.5),l=lr(l,t,.5),h=lr(e,r,.5),r=lr(r,l,.5),ur([o,e,h,s=lr(h,r,.5)],0,i,n),ur([s,r,l,t],0,i,n)),n}function cr(t,e){return dr(t,0,t.length,e)}function dr(t,e,i,n,s){s=s||[];let r=t[e],a=t[i-1],h=0,o=1;for(let n=e+1;n<i-1;++n){let e=or(t[n],r,a);e>h&&(h=e,o=n)}return Math.sqrt(h)>n?(dr(t,e,o+1,n,s),dr(t,o,i,n,s)):(s.length||s.push(r),s.push(a)),s}function fr(t,e=.15,i){let n=[],s=(t.length-1)/3;for(let i=0;i<s;i++)ur(t,3*i,e,n);return i&&0<i?dr(n,0,n.length,i):n}let pr="none";class gr{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,combineNestedSvgPaths:!1,disableMultiStroke:!1,disableMultiStrokeFill:!1},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,i){return{shape:t,sets:e||[],options:i||this.defaultOptions}}line(t,e,i,n,s){return s=this._o(s),this._d("line",[Ds(t,e,i,n,s)],s)}rectangle(t,e,i,n,s){let r=[],a=function(t,e,i,n,s){return qs([[t,e],[t+i,e],[t+i,e+n],[t,e+n]],!0,s)}(t,e,i,n,s=this._o(s));return s.fill&&(t=[[t,e],[t+i,e],[t+i,e+n],[t,e+n]],"solid"===s.fillStyle?r.push(Hs(t,s)):r.push(Zs(t,s))),s.stroke!==pr&&r.push(a),this._d("rectangle",r,s)}ellipse(t,e,i,n,s){let r=[];return i=Xs(t,e,s=this._o(s),n=Bs(i,n,s)),s.fill&&("solid"===s.fillStyle?((t=Xs(t,e,s,n).opset).type="fillPath",r.push(t)):r.push(Zs(i.estimatedPoints,s))),s.stroke!==pr&&r.push(i.opset),this._d("ellipse",r,s)}circle(t,e,i,n){return(t=this.ellipse(t,e,i,i,n)).shape="circle",t}linearPath(t,e){return e=this._o(e),this._d("linearPath",[qs(t,!1,e)],e)}arc(t,e,i,n,s,r,a=!1,h){let o=[],l=Ys(t,e,i,n,s,r,a,!0,h=this._o(h));return a&&h.fill&&("solid"===h.fillStyle?((t=Ys(t,e,i,n,s,r,!0,!1,h)).type="fillPath",o.push(t)):o.push(function(t,e,i,n,s,r,a){for(i=Math.abs(i/2),n=Math.abs(n/2),i+=Ks(.01*i,a),n+=Ks(.01*n,a);0>s;)s+=2*Math.PI,r+=2*Math.PI;r-s>2*Math.PI&&(s=0,r=2*Math.PI);let h=(r-s)/a.curveStepCount,o=[];for(;s<=r;s+=h)o.push([t+i*Math.cos(s),e+n*Math.sin(s)]);return o.push([t+i*Math.cos(r),e+n*Math.sin(r)]),o.push([t,e]),Zs(o,a)}(t,e,i,n,s,r,h))),h.stroke!==pr&&o.push(l),this._d("arc",o,h)}curve(t,e){let i=[],n=function(t,e){let i=er(t,1+.2*e.roughness,e);if(!e.disableMultiStroke){var n=1.5*(1+.22*e.roughness);{const t=Object.assign({},e);t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),e=t}t=er(t,n,e),i=i.concat(t)}return{type:"path",ops:i}}(t,e=this._o(e));return e.fill&&e.fill!==pr&&3<=t.length&&(t=fr(function(t,e=0){var i=t.length;if(3>i)throw Error("A curve must have at least three points.");const n=[];if(3===i)n.push(ar(t[0]),ar(t[1]),ar(t[2]),ar(t[2]));else{(i=[]).push(t[0],t[0]);for(var s=1;s<t.length;s++)i.push(t[s]),s===t.length-1&&i.push(t[s]);for(t=[],e=1-e,n.push(ar(i[0])),s=1;s+2<i.length;s++){const r=i[s];t[0]=[r[0],r[1]],t[1]=[r[0]+(e*i[s+1][0]-e*i[s-1][0])/6,r[1]+(e*i[s+1][1]-e*i[s-1][1])/6],t[2]=[i[s+1][0]+(e*i[s][0]-e*i[s+2][0])/6,i[s+1][1]+(e*i[s][1]-e*i[s+2][1])/6],t[3]=[i[s+1][0],i[s+1][1]],n.push(t[1],t[2],t[3])}}return n}(t),10,(1+e.roughness)/2),"solid"===e.fillStyle?i.push(Hs(t,e)):i.push(Zs(t,e))),e.stroke!==pr&&i.push(n),this._d("curve",i,e)}polygon(t,e){let i=[],n=qs(t,!0,e=this._o(e));return e.fill&&("solid"===e.fillStyle?i.push(Hs(t,e)):i.push(Zs(t,e))),e.stroke!==pr&&i.push(n),this._d("polygon",i,e)}path(t,e){let i=this._o(e),n=[];if(!t)return this._d("path",n,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," "),e=i.fill&&"transparent"!==i.fill&&i.fill!==pr;let s=i.stroke!==pr,r=!!(i.simplification&&1>i.simplification),a=function(t,e,i){var n=Is(Ns(Rs(t)));t=[];let s=[];var r=[0,0];let a=[];const h=()=>{4<=a.length&&s.push(...fr(a,1)),a=[]};for(const{key:e,data:i}of n)switch(e){case"M":h(),s.length&&(t.push(s),s=[]),r=[i[0],i[1]],s.push(r);break;case"L":h(),s.push([i[0],i[1]]);break;case"C":a.length||(n=s.length?s[s.length-1]:r,a.push([n[0],n[1]])),a.push([i[0],i[1]]),a.push([i[2],i[3]]),a.push([i[4],i[5]]);break;case"Z":h(),s.push([r[0],r[1]])}if(h(),s.length&&(t.push(s),s=[]),!i)return t;r=[];for(const e of t)(t=cr(e,i)).length&&r.push(t);return r}(t,0,r?4-4*i.simplification:(1+i.roughness)/2);if(e)if(i.combineNestedSvgPaths){let t=[];a.forEach((e=>t.push(...e))),"solid"===i.fillStyle?n.push(Hs(t,i)):n.push(Zs(t,i))}else a.forEach((t=>{"solid"===i.fillStyle?n.push(Hs(t,i)):n.push(Zs(t,i))}));return s&&(r?a.forEach((t=>{n.push(qs(t,!1,i))})):n.push(function(t,e){t=Is(Ns(Rs(t)));let i=[],n=[0,0],s=[0,0];for(let{key:r,data:a}of t)switch(r){case"M":{let t=1*(e.maxRandomnessOffset||0);i.push({op:"move",data:a.map((i=>i+Ks(t,e)))}),s=[a[0],a[1]],n=[a[0],a[1]];break}case"L":i.push(...Js(s[0],s[1],a[0],a[1],e)),s=[a[0],a[1]];break;case"C":{let[t,n,r,h,o,l]=a;i.push(...rr(t,n,r,h,o,l,s,e)),s=[o,l];break}case"Z":i.push(...Js(s[0],s[1],n[0],n[1],e)),s=[n[0],n[1]]}return{type:"path",ops:i}}(t,i))),this._d("path",n,i)}opsToPath(t){let e="";for(let i of t.ops)switch(t=i.data,i.op){case"move":e+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":e+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":e+=`L${t[0]} ${t[1]} `}return e.trim()}toPaths(t){var e=t.sets||[];t=t.options||this.defaultOptions;let i=[];for(let n of e){switch(e=null,n.type){case"path":e={d:this.opsToPath(n),stroke:t.stroke,strokeWidth:t.strokeWidth,fill:pr};break;case"fillPath":e={d:this.opsToPath(n),stroke:pr,strokeWidth:0,fill:t.fill||pr};break;case"fillSketch":e=this.fillSketch(n,t)}e&&i.push(e)}return i}fillSketch(t,e){let i=e.fillWeight;return 0>i&&(i=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||pr,strokeWidth:i,fill:pr}}}let yr="http://www.w3.org/2000/svg";class mr{constructor(t,e){this.svg=t,this.gen=new gr(e)}draw(t){var e=t.sets||[];let i=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,s=n.createElementNS(yr,"g");for(let r of e){switch(e=null,r.type){case"path":(e=n.createElementNS(yr,"path")).setAttribute("d",this.opsToPath(r)),e.setAttribute("stroke",i.stroke),e.setAttribute("stroke-width",i.strokeWidth+""),e.setAttribute("fill","none"),i.strokeLineDash&&e.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",""+i.strokeLineDashOffset);break;case"fillPath":(e=n.createElementNS(yr,"path")).setAttribute("d",this.opsToPath(r)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",i.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(n,r,i)}e&&s.appendChild(e)}return s}fillSketch(t,e,i){let n=i.fillWeight;return 0>n&&(n=i.strokeWidth/2),(t=t.createElementNS(yr,"path")).setAttribute("d",this.opsToPath(e)),t.setAttribute("stroke",i.fill||""),t.setAttribute("stroke-width",n+""),t.setAttribute("fill","none"),i.fillLineDash&&t.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&t.setAttribute("stroke-dashoffset",""+i.fillLineDashOffset),t}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t){return this.gen.opsToPath(t)}line(t,e,i,n,s){return t=this.gen.line(t,e,i,n,s),this.draw(t)}rectangle(t,e,i,n,s){return t=this.gen.rectangle(t,e,i,n,s),this.draw(t)}ellipse(t,e,i,n,s){return t=this.gen.ellipse(t,e,i,n,s),this.draw(t)}circle(t,e,i,n){return t=this.gen.circle(t,e,i,n),this.draw(t)}linearPath(t,e){return t=this.gen.linearPath(t,e),this.draw(t)}polygon(t,e){return t=this.gen.polygon(t,e),this.draw(t)}arc(t,e,i,n,s,r,a=!1,h){return t=this.gen.arc(t,e,i,n,s,r,a,h),this.draw(t)}curve(t,e){return t=this.gen.curve(t,e),this.draw(t)}path(t,e){return t=this.gen.path(t,e),this.draw(t)}}var vr=(t,e)=>new mr(t,e);function br(t,e,i){e=e.split(".");let n=t;return e.forEach((t=>{n="object"==typeof n&&Object.keys(n).includes(t)?n[t]:void 0})),n||i}let xr=[],kr=t=>{Array.isArray(t)||(t=t?[t]:[]),t.filter((t=>!xr.includes(t))).forEach((e=>(t=>{let e=document.createElement("link");e.id=`rough-viz-font-${t}`,e.rel="stylesheet",e.href=(([t])=>`https://fonts.googleapis.com/css2?family=${t.replace(/ /g,"+")}&display=swap`)(t),e.crossorigin=!0,document.querySelector("head").appendChild(e),xr.push(t)})(t)))};class wr{constructor(t){this.element=this.el=t.element,this.title=t.title,this.titleFontSize=t.titleFontSize,this.font=br(t,"font",0),this.fillStyle=t.fillStyle,this.tooltipFontSize=br(t,"tooltipFontSize","0.95rem"),this.bowing=br(t,"bowing",0),this.simplification=br(t,"simplification",.2),this.interactive=!1!==t.interactive,this.dataFormat="object"==typeof t.data?"object":"file"}setSvg(){this.svg=Vt(this.el).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("id",this.roughId).attr("transform","translate("+this.margin.left+","+this.margin.top+")")}resolveFont(){0===this.font||void 0===this.font||"gaegu"===this.font.toString().toLowerCase()?(kr("Gaegu"),this.fontFamily="Gaegu"):1===this.font||"indie flower"===this.font.toString().toLowerCase()?(kr("Indie Flower"),this.fontFamily="Indie Flower"):this.fontFamily=this.font}}let Sr=({roughness:t,ceiling:e=20,defaultValue:i=1})=>void 0===t||"number"!=typeof t?i:t>e?e:t;class _r extends wr{constructor(t){super(t),this.data=t.data,this.margin=t.margin||{top:50,right:20,bottom:70,left:100},this.color=br(t,"color","skyblue"),this.highlight=br(t,"highlight","coral"),this.roughness=Sr({roughness:t.roughness}),this.stroke=br(t,"stroke","black"),this.strokeWidth=br(t,"strokeWidth",1),this.axisStrokeWidth=br(t,"axisStrokeWidth",.5),this.axisRoughness=br(t,"axisRoughness",.5),this.innerStrokeWidth=br(t,"innerStrokeWidth",1),this.fillWeight=br(t,"fillWeight",.5),this.axisFontSize=t.axisFontSize,this.labels="object"===this.dataFormat?"labels":t.labels,this.values="object"===this.dataFormat?"values":t.values,this.xValueFormat=t.xValueFormat,this.yValueFormat=t.yValueFormat,this.padding=br(t,"padding",.1),this.xLabel=br(t,"xLabel",""),this.yLabel=br(t,"yLabel",""),this.labelFontSize=br(t,"labelFontSize","1rem"),this.initChartValues(t),this.resolveFont(),this.drawChart=this.resolveData(t.data),this.drawChart(),"undefined"!==t.title&&this.setTitle(t.title)}initChartValues(t){let e=t.height?t.height:450;this.width=(t.width?t.width:350)-this.margin.left-this.margin.right,this.height=e-this.margin.top-this.margin.bottom,this.roughId=this.el+"_svg",this.graphClass=this.el.substring(1,this.el.length),this.interactionG="g."+this.graphClass,this.setSvg()}resolveData(t){return"string"!=typeof t?()=>{this.data=t,this.drawFromObject()}:t.includes(".csv")?()=>{hn(t).then((t=>{this.data=t,this.drawFromFile()}))}:t.includes(".tsv")?()=>{on(t).then((t=>{this.data=t,this.drawFromFile()}))}:void 0}addScales(){let t=this;this.xScale=zn().rangeRound([0,this.width]).padding(this.padding).domain("file"===this.dataFormat?this.data.map((e=>e[t.labels])):this.data[t.labels]),this.yScale=Dn().rangeRound([this.height,0]).domain("file"===this.dataFormat?[0,l(this.data,(e=>+e[t.values]))]:[0,l(this.data[t.values])])}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",this.width/2).attr("y",this.height+this.margin.bottom/2).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel),""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-this.margin.left/1.4).attr("x",-this.height/2).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){let t=x(this.xScale).tickSize(0).tickFormat((t=>this.xValueFormat?kn(this.xValueFormat)(t):t)),e=k(this.yScale).tickSize(0).tickFormat((t=>this.yValueFormat?kn(this.yValueFormat)(t):t));this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(t).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.8,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.9),this.svg.append("g").call(e).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.9),Dt("path.domain").attr("stroke","transparent")}makeAxesRough(t,e){let i=`xAxis${this.graphClass}`,n=`yAxis${this.graphClass}`,s=`rough-${i}`,r=`rough-${n}`;Vt(`.${i}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{fillStyle:"hachure"})).setAttribute("class",s),t.appendChild(i)})),Dt(`.${s}`).attr("transform",`translate(0, ${this.height})`),Vt(`.${n}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{fillStyle:"hachure"})).setAttribute("class",r),t.appendChild(i)}))}setTitle(t){this.svg.append("text").attr("x",this.width/2).attr("y",-this.margin.top/2).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/5)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(t)}addInteraction(){Dt(this.interactionG).data("file"===this.dataFormat?this.data:this.data.values).append("rect").attr("x",((t,e)=>"file"===this.dataFormat?this.xScale(t[this.labels]):this.xScale(this.data[this.labels][e]))).attr("y",((t,e)=>"file"===this.dataFormat?this.yScale(+t[this.values]):this.yScale(this.data[this.values][e]))).attr("width",this.xScale.bandwidth()).attr("height",((t,e)=>"file"===this.dataFormat?this.height-this.yScale(+t[this.values]):this.height-this.yScale(this.data[this.values][e]))).attr("fill","transparent");let t=Vt(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none"),e=this;Dt(this.interactionG).on("mouseover",(function(){t.style("opacity",1),Vt(this).select("path").style("stroke",e.highlight),Vt(this).selectAll("path:nth-child(2)").style("stroke-width",e.strokeWidth+1.2)})),Dt(this.interactionG).on("mouseout",(function(){t.style("opacity",0),Vt(this).select("path").style("stroke",e.color),Vt(this).selectAll("path:nth-child(2)").style("stroke-width",e.strokeWidth)})),Dt(this.interactionG).on("mousemove",(function(i,n){n=Vt(this).attr("attrX");let s=Vt(this).attr("attrY");i=Gt(i),t.html(`<b>${n}</b>: ${s}`).style("opacity",.95).attr("class",(function(t){})).style("transform",`translate(${i[0]+e.margin.left}px,\n          ${i[1]-(e.height+e.margin.top+e.margin.bottom)}px)`)}))}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId),this.rcAxis=vr(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}}),this.rc=vr(this.roughSvg,{options:{fill:this.color,stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){this.initRoughObjects(),this.addScales(),this.addAxes(),this.makeAxesRough(this.roughSvg,this.rcAxis),this.addLabels(),this.data.values.forEach(((t,e)=>{var i=this.rc.rectangle(this.xScale(this.data[this.labels][e]),this.yScale(+t),this.xScale.bandwidth(),this.height-this.yScale(+t),{simplification:this.simplification,fillWeight:this.fillWeight});(i=this.roughSvg.appendChild(i)).setAttribute("class",this.graphClass),i.setAttribute("attrX",this.data[this.labels][e]),i.setAttribute("attrY",+t)})),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth),!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects(),this.addScales(),this.addAxes(),this.makeAxesRough(this.roughSvg,this.rcAxis),this.addLabels(),this.data.forEach((t=>{var e=this.rc.rectangle(this.xScale(t[this.labels]),this.yScale(+t[this.values]),this.xScale.bandwidth(),this.height-this.yScale(+t[this.values]),{simplification:this.simplification,fillWeight:this.fillWeight});(e=this.roughSvg.appendChild(e)).setAttribute("class",this.graphClass),e.setAttribute("attrX",t[this.labels]),e.setAttribute("attrY",+t[this.values])})),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth),!0===this.interactive&&this.addInteraction()}}class Mr extends wr{constructor(t){super(t),this.margin=t.margin||{top:50,right:20,bottom:50,left:100},this.color=br(t,"color","skyblue"),this.highlight=br(t,"highlight","coral"),this.roughness=Sr({roughness:t.roughness}),this.stroke=br(t,"stroke","black"),this.strokeWidth=br(t,"strokeWidth",1),this.axisStrokeWidth=br(t,"axisStrokeWidth",.5),this.axisRoughness=br(t,"axisRoughness",.5),this.innerStrokeWidth=br(t,"innerStrokeWidth",1),this.fillWeight=br(t,"fillWeight",.5),this.axisFontSize=t.axisFontSize,this.labels="object"===this.dataFormat?"labels":t.labels,this.values="object"===this.dataFormat?"values":t.values,this.xValueFormat=t.xValueFormat,this.yValueFormat=t.yValueFormat,this.padding=br(t,"padding",.1),this.xLabel=br(t,"xLabel",""),this.yLabel=br(t,"yLabel",""),this.labelFontSize=br(t,"labelFontSize","1rem"),this.initChartValues(t),this.resolveFont(),this.drawChart=this.resolveData(t.data),this.drawChart(),"undefined"!==t.title&&this.setTitle(t.title)}initChartValues(t){let e=t.height?t.height:450;this.width=(t.width?t.width:350)-this.margin.left-this.margin.right,this.height=e-this.margin.top-this.margin.bottom,this.roughId=this.el+"_svg",this.graphClass=this.el.substring(1,this.el.length),this.interactionG="g."+this.graphClass,this.setSvg()}resolveData(t){return"string"!=typeof t?()=>{this.data=t,this.drawFromObject()}:t.includes(".csv")?()=>{hn(t).then((t=>{console.log(t),this.data=t,this.drawFromFile()}))}:t.includes(".tsv")?()=>{on(t).then((t=>{this.data=t,this.drawFromFile()}))}:void 0}addScales(){let t=this;this.yScale=zn().rangeRound([0,this.height]).padding(this.padding).domain("file"===this.dataFormat?this.data.map((e=>e[t.labels])):this.data[t.labels]),this.xScale=Dn().rangeRound([0,this.width]).domain("file"===this.dataFormat?[0,l(this.data,(e=>+e[t.values]))]:[0,l(this.data[t.values])])}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",this.width/2).attr("y",this.height+this.margin.bottom/2.4).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel),""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-this.margin.left/1.5).attr("x",-this.height/2).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){let t=x(this.xScale).tickSize(0).tickFormat((t=>this.xValueFormat?kn(this.xValueFormat)(t):t)),e=k(this.yScale).tickSize(0).tickFormat((t=>this.yValueFormat?kn(this.yValueFormat)(t):t));this.svg.append("g").attr("transform",`translate(0, ${this.height})`).call(t).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.85),this.svg.append("g").call(e).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.85),Dt("path.domain").attr("stroke","transparent")}makeAxesRough(t,e){let i=`xAxis${this.graphClass}`,n=`yAxis${this.graphClass}`,s=`rough-${i}`,r=`rough-${n}`;Vt(`.${i}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{stroke:"black",fillStyle:"hachure"})).setAttribute("class",s),t.appendChild(i)})),Dt(`.${s}`).attr("transform",`translate(0, ${this.height})`),Vt(`.${n}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{stroke:"black",fillStyle:"hachure"})).setAttribute("class",r),t.appendChild(i)}))}setTitle(t){this.svg.append("text").attr("x",this.width/2).attr("y",-this.margin.top/2).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/5)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(t)}addInteraction(){Dt(this.interactionG).data("file"===this.dataFormat?this.data:this.data.values).append("rect").attr("x",0).attr("y",((t,e)=>"file"===this.dataFormat?this.yScale(t[this.labels]):this.yScale(this.data[this.labels][e]))).attr("width",((t,e)=>"file"===this.dataFormat?this.xScale(+t[this.values]):this.xScale(this.data[this.values][e]))).attr("height",this.yScale.bandwidth()).attr("fill","transparent");let t=Vt(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none"),e=this;Dt(this.interactionG).on("mouseover",(function(){t.style("opacity",1),Vt(this).select("path").style("stroke",e.highlight),Vt(this).selectAll("path:nth-child(2)").style("stroke-width",e.strokeWidth+1.2)})),Dt(this.interactionG).on("mouseout",(function(){t.style("opacity",0),Vt(this).select("path").style("stroke",e.color),Vt(this).selectAll("path:nth-child(2)").style("stroke-width",e.strokeWidth)})),Dt(this.interactionG).on("mousemove",(function(i,n){n=Vt(this).attr("attrX");let s=Vt(this).attr("attrY");i=Gt(i),t.html(`<b>${n}</b>: ${s}`).style("opacity",.95).attr("class",(function(t){})).style("transform",`translate(${i[0]+e.margin.left}px,\n              ${i[1]-(e.height+e.margin.top+e.margin.bottom)}px)`)}))}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId),this.rcAxis=vr(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}}),this.rc=vr(this.roughSvg,{options:{fill:this.color,stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){this.initRoughObjects(),this.addScales(),this.addAxes(),this.makeAxesRough(this.roughSvg,this.rcAxis),this.addLabels(),this.data.values.forEach(((t,e)=>{var i=this.rc.rectangle(0,this.yScale(this.data[this.labels][e]),this.xScale(t),this.yScale.bandwidth(),{simplification:this.simplification,fillWeight:this.fillWeight});(i=this.roughSvg.appendChild(i)).setAttribute("class",this.graphClass),i.setAttribute("attrX",this.data[this.labels][e]),i.setAttribute("attrY",+t)})),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth),!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects(),this.addScales(),this.addAxes(),this.makeAxesRough(this.roughSvg,this.rcAxis),this.addLabels(),this.data.forEach((t=>{var e=this.rc.rectangle(0,this.yScale(t[this.labels]),this.xScale(+t[this.values]),this.yScale.bandwidth(),{simplification:this.simplification,fillWeight:this.fillWeight});(e=this.roughSvg.appendChild(e)).setAttribute("class",this.graphClass),e.setAttribute("attrX",t[this.labels]),e.setAttribute("attrY",+t[this.values])})),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth),!0===this.interactive&&this.addInteraction()}}let Ar="coral skyblue #66c2a5 tan #8da0cb #e78ac3 #a6d854 #ffd92f coral skyblue tan orange".split(" "),Fr=(t,e,i,n,s)=>{t.svg.append("svg").attr("x","left"===t.legendPosition?5:t.width-(i+2)).attr("y",0);const r=void 0===s?5-t.margin.left:s;n=t.rc.rectangle("left"===t.legendPosition?r:t.width+t.margin.right-2-i,-t.margin.top/3,i,n,{fill:"white",fillWeight:.1,strokeWidth:.75,roughness:2}),n=t.roughSvg.appendChild(n);const a="rough"+t.el.substring(1,t.el.length);n.setAttribute("class",a),e.forEach(((e,n)=>{const s=Vt("."+a).append("g").attr("transform",`translate(\n        ${"left"===t.legendPosition?5:t.width-(i+2)},\n        0)`);s.append("rect").style("fill",t.colors[n]).attr("width",20).attr("height",8).attr("x","left"===t.legendPosition?r:t.margin.right+5).attr("y",6+11*n-t.margin.top/3),s.append("text").style("font-size",".8rem").style("font-family",t.fontFamily).attr("x","left"===t.legendPosition?r+25:t.margin.right+30).attr("y",11*n+14-t.margin.top/3).text(e.text)}))};class Cr extends wr{constructor(t){super(t),this.margin=t.margin||{top:50,right:20,bottom:10,left:20},this.colors=br(t,"colors",Ar),this.highlight=t.highlight,this.roughness=Sr({roughness:t.roughness,ceiling:30}),this.strokeWidth=br(t,"strokeWidth",.75),this.innerStrokeWidth=br(t,"innerStrokeWidth",.75),this.fillWeight=br(t,"fillWeight",.85),this.labels="object"===this.dataFormat?"labels":t.labels,this.values="object"===this.dataFormat?"values":t.values,void 0===this.labels||void 0===this.values?console.log(`Error for ${this.el}: Must include labels and values when        instantiating Donut chart. Skipping chart.`):(this.legend=!1!==t.legend,this.legendPosition=br(t,"legendPosition","right"),this.initChartValues(t),this.resolveFont(),this.drawChart=this.resolveData(t.data),this.drawChart(),"undefined"!==t.title&&this.setTitle(t.title))}initChartValues(t){let e=t.height?t.height:300;this.width=(t.width?t.width:300)-this.margin.left-this.margin.right,this.height=e-this.margin.top-this.margin.bottom,this.roughId=this.el+"_svg",this.graphClass=this.el.substring(1,this.el.length),this.interactionG="g."+this.graphClass,this.radius=Math.min(this.width,this.height)/2,this.setSvg()}resolveData(t){return"string"!=typeof t?()=>{this.data=t,this.drawFromObject()}:t.includes(".csv")?()=>{hn(t).then((t=>{this.data=t,this.drawFromFile()}))}:t.includes(".tsv")?()=>{on(t).then((t=>{this.data=t,this.drawFromFile()}))}:t.includes(".json")?()=>{un(t).then((t=>{this.data=t,this.drawFromFile()}))}:void 0}setTitle(t){this.svg.append("text").attr("x",this.width/2).attr("y",-this.margin.top/3).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/4)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(t)}addInteraction(){Dt(this.interactionG).append("g").attr("transform",`translate(${this.width/2}, ${this.height/2})`).data("object"===this.dataFormat?this.makePie(this.data[this.values]):this.makePie(this.data)).append("path").attr("d",this.makeArc).attr("stroke-width","0px").attr("fill","transparent");let t,e=Vt(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none"),i=this;Dt(this.interactionG).on("mouseover",(function(){e.style("opacity",1),t=Vt(this).selectAll("path").style("stroke"),void 0===i.highlight?Vt(this).selectAll("path").style("opacity",.5):Vt(this).selectAll("path").style("stroke",i.highlight)})),Dt(this.interactionG).on("mouseout",(function(){e.style("opacity",0),Vt(this).selectAll("path").style("stroke",t),Vt(this).selectAll("path").style("opacity",1)})),Dt(this.interactionG).on("mousemove",(function(t,n){n=Vt(this).attr("attrX");let s=Vt(this).attr("attrY");t=Gt(t),e.html(`<b>${n}</b>: ${s}`).style("opacity",.95).attr("class",(function(t){})).style("transform",`translate(${t[0]+i.margin.left}px,\n                            ${t[1]-i.height-i.margin.bottom}px)`)}))}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId),this.rcAxis=vr(this.roughSvg,{options:{strokeWidth:3<=this.strokeWidth?3:this.strokeWidth}}),this.rc=vr(this.roughSvg,{options:{fill:this.color,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle,fillWeight:this.fillWeight}})}drawFromObject(){this.initRoughObjects(),this.makePie=vs(),this.makeArc=us().innerRadius(0).outerRadius(this.radius),this.arcs=this.makePie(this.data[this.values]),this.arcs.forEach(((t,e)=>{0!==t.value&&((t=this.rc.arc(this.width/2,this.height/2,2*this.radius,2*this.radius,t.startAngle-Math.PI/2,t.endAngle-Math.PI/2,!0,{fill:this.colors[e],stroke:this.colors[e]})).setAttribute("class",this.graphClass),(t=this.roughSvg.appendChild(t)).setAttribute("attrY",this.data[this.values][e]),t.setAttribute("attrX",this.data[this.labels][e]))}));var t=this.rc.circle(this.width/2,this.height/2,this.radius,{fill:"white",strokeWidth:.05,fillWeight:10,fillStyle:"solid"});this.roughSvg.appendChild(t),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);let e=6*(t=this.data.labels.map(((t,e)=>({color:this.colors[e],text:t})))).reduce(((t,e)=>t>e.text.length?t:e.text.length),0)+35,i=11*t.length+8;!0===this.legend&&Fr(this,t,e,i),!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects(),this.makePie=vs().value((t=>t[this.values])).sort(null);let t=[];this.makeArc=us().innerRadius(0).outerRadius(this.radius),this.arcs=this.makePie(this.data),this.arcs.forEach(((e,i)=>{0!==e.value&&((i=this.rc.arc(this.width/2,this.height/2,2*this.radius,2*this.radius,e.startAngle-Math.PI/2,e.endAngle-Math.PI/2,!0,{fill:this.colors[i],stroke:this.colors[i]})).setAttribute("class",this.graphClass),(i=this.roughSvg.appendChild(i)).setAttribute("attrY",e.data[this.values]),i.setAttribute("attrX",e.data[this.labels])),t.push(e.data[this.labels])}));var e=this.rc.circle(this.width/2,this.height/2,this.radius,{fill:"white",strokeWidth:.05,fillWeight:10,fillStyle:"solid"});this.roughSvg.appendChild(e),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);let i=6*(e=t.map(((t,e)=>({color:this.colors[e],text:t})))).reduce(((t,e)=>t>e.text.length?t:e.text.length),0)+35,n=11*e.length+8;!0===this.legend&&Fr(this,e,i,n),!0===this.interactive&&this.addInteraction()}}class zr extends wr{constructor(t){super(t),this.margin=t.margin||{top:50,right:20,bottom:50,left:100},this.roughness=Sr({roughness:t.roughness,defaultValue:2.2}),this.axisStrokeWidth=br(t,"axisStrokeWidth",.4),this.axisRoughness=br(t,"axisRoughness",.9),this.stroke=br(t,"stroke","black"),this.fillWeight=br(t,"fillWeight",.85),this.colors=t.colors,this.strokeWidth=br(t,"strokeWidth",8),this.axisFontSize=t.axisFontSize,this.x=t.x,this.y="object"===this.dataFormat?"y":t.y,this.xValueFormat=t.xValueFormat,this.yValueFormat=t.yValueFormat,this.legend=!1!==t.legend,this.legendPosition=br(t,"legendPosition","right"),this.circle=!1!==t.circle,this.circleRadius=br(t,"circleRadius",10),this.circleRoughness=Sr({roughness:t.circleRoughness,defaultValue:2}),this.xLabel=br(t,"xLabel",""),this.yLabel=br(t,"yLabel",""),this.labelFontSize=br(t,"labelFontSize","1rem"),"file"===this.dataFormat&&(this.dataSources=[],this.yKeys=Object.keys(t).filter((t=>/y/.test(t))),this.yKeys.map(((e,i)=>{"yLabel"!==e&&this.dataSources.push(t[e])}))),this.initChartValues(t),this.resolveFont(),this.drawChart=this.resolveData(t.data),this.drawChart(),"undefined"!==t.title&&this.setTitle(t.title)}initChartValues(t){let e=t.height?t.height:400;this.width=(t.width?t.width:300)-this.margin.left-this.margin.right,this.height=e-this.margin.top-this.margin.bottom,this.roughId=this.el+"_svg",this.graphClass=this.el.substring(1,this.el.length),this.interactionG="g."+this.graphClass,this.setSvg()}resolveData(t){return"string"!=typeof t?()=>{this.data=t,this.drawFromObject()}:t.includes(".csv")?()=>{hn(t).then((t=>{this.data=t,this.drawFromFile()}))}:t.includes(".tsv")?()=>{on(t).then((t=>{this.data=t,this.drawFromFile()}))}:void 0}addScales(){if("file"!==this.dataFormat)var t=(t=>{var e=Object.keys(t).map((e=>s(t[e])));return[u(e,(t=>t[0])),e=l(e,(t=>t[1]))]})(this.data);else{var e=this.dataSources.map((t=>s(this.data,(e=>+e[t]))));t=[t=u(e,(t=>t[0])),e=l(e,(t=>t[1]))]}void 0===this.x?(e=l(e=Object.keys(this.data).map((t=>this.data[t].length))),e="file"===this.dataFormat?[0,this.data.length]:[0,e]):e=s(this.x);let i=t[1]-t[0];this.xScale=void 0===this.x?Wn().range([0,this.width]).domain([...Array(e[1]).keys()]):Wn().range([0,this.width]).domain(this.x),this.yScale=Dn().range([this.height,0]).domain([0,t[1]+.05*i])}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",this.width/2).attr("y",this.height+this.margin.bottom/1.3).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel),""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-this.margin.left/2).attr("x",-this.height/2).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){let t=x(this.xScale).tickSize(0).tickFormat((t=>this.xValueFormat?kn(this.xValueFormat)(t):t)),e=k(this.yScale).tickSize(0).tickFormat((t=>this.yValueFormat?kn(this.yValueFormat)(t):t));this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(t).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10, 0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize),this.svg.append("g").call(e).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize),Dt("path.domain").attr("stroke","transparent"),Dt("g.tick").style("opacity",1)}makeAxesRough(t,e){let i=`xAxis${this.graphClass}`,n=`yAxis${this.graphClass}`,s=`rough-${i}`,r=`rough-${n}`;Vt(`.${i}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{stroke:"black",fillStyle:"hachure"})).setAttribute("class",s),t.appendChild(i)})),Dt(`.${s}`).attr("transform",`translate(0, ${this.height})`),Vt(`.${n}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{stroke:"black",fillStyle:"hachure"})).setAttribute("class",r),t.appendChild(i)}))}setTitle(t){this.svg.append("text").attr("x",this.width/2).attr("y",-this.margin.top/2).attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(20,Math.min(this.width,this.height)/4)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(t)}addInteraction(){let t=this;this.chartScreen=this.svg.append("g").attr("pointer-events","all"),this.dataSources.map(((t,e)=>{e=("file"===this.dataFormat?this.data:this.data[t]).map(((e,i)=>void 0===this.x?[this.xScale(i),this.yScale(e[t])]:[this.xScale(this.x[i]),this.yScale(+e[t])])).filter((t=>void 0!==t[0]));let i=function(t,e){function i(i){var h,o,l,u=(i=cs(i)).length,c=!1;for(null==s&&(a=r(l=Yi())),h=0;h<=u;++h)!(h<u&&n(o=i[h],h,i))===c&&((c=!c)?a.lineStart():a.lineEnd()),c&&a.point(+t(o,h,i),+e(o,h,i));if(l)return a=null,l+""||null}var n=qn(!0),s=null,r=fs,a=null;return t="function"==typeof t?t:void 0===t?ps:qn(t),e="function"==typeof e?e:void 0===e?gs:qn(e),i.x=function(e){return arguments.length?(t="function"==typeof e?e:qn(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:qn(+t),i):e},i.defined=function(t){return arguments.length?(n="function"==typeof t?t:qn(!!t),i):n},i.curve=function(t){return arguments.length?(r=t,null!=s&&(a=r(s)),i):r},i.context=function(t){return arguments.length?(null==t?s=a=null:a=r(s=t),i):s},i}().x((t=>t[0])).y((t=>t[1]));this.svg.append("path").datum(e).attr("fill","none").attr("stroke","blue").attr("stroke-width",1.5).attr("d",i).attr("visibility","hidden"),e=t+"class",this.svg.append("g").attr("class",e+"text").append("text").style("font-size",this.tooltipFontSize).style("opacity",0).style("font-family",this.fontFamily).attr("text-anchor","middle").attr("alignment-baseline","middle")})),this.chartScreen.append("rect").attr("width",this.width).attr("height",this.height).attr("fill","none").on("mousemove",(function(e,i){e=Gt(e)[0],i=t.xScale.domain();var s=t.xScale.range();s=c(s[0],s[1]+1,t.xScale.step());const r=n(s,e),a=i[r];t.dataSources.map(((e,i)=>{i="file"===t.dataFormat?void 0===t.x?t.data[a]:t.data[r]:t.data[e][r];const n="."+e+"classtext";"file"===t.dataFormat?Vt(n).selectAll("text").style("opacity",1).html(void 0===t.x?`(${r},${i[e]})`:`(${t.x[r]}, ${i[e]})`).attr("x",void 0===t.x?t.xScale(r):t.xScale(t.x[r])).attr("y",t.yScale(i[e])-6):Vt(n).selectAll("text").style("opacity",1).html(void 0===t.x?`(${r}, ${i})`:`(${t.x[r]}, ${i})`).attr("x",void 0===t.x?t.xScale(r):t.xScale(t.x[r])).attr("y",t.yScale(i))}))})).on("mouseout",(()=>{t.dataSources.map((t=>{Vt("."+t+"classtext").selectAll("text").style("opacity",0)}))}))}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId),this.rcAxis=vr(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}}),this.rc=vr(this.roughSvg,{options:{stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.strokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){void 0===this.colors&&(this.colors=Ar),this.dataSources=Object.keys(this.data),this.initRoughObjects(),this.addScales(),this.dataSources.map(((t,e)=>{var i=(t=this.data[t].map(((t,e)=>void 0===this.x?[this.xScale(e),this.yScale(+t)]:[this.xScale(this.x[e]),this.yScale(t)]))).filter((t=>void 0!==t[0]));i=this.rc.curve(i,{stroke:1===this.colors.length?this.colors[0]:this.colors[e],roughness:this.roughness,bowing:this.bowing}),this.roughSvg.appendChild(i).setAttribute("class",this.graphClass),!0===this.circle&&t.forEach(((t,i)=>{t=this.rc.circle(t[0],t[1],this.circleRadius,{stroke:this.colors[e],fill:this.colors[e],fillStyle:"solid",strokeWidth:1,roughness:this.circleRoughness}),this.roughSvg.appendChild(t)}))}));let t=this.dataSources.map(((t,e)=>({color:this.colors[e],text:t}))),e=6*t.reduce(((t,e)=>t>e.text.length?t:e.text.length),0)+35,i=11*t.length+8;!0===this.legend&&Fr(this,t,e,i,2),this.addAxes(),this.addLabels(),this.makeAxesRough(this.roughSvg,this.rcAxis),!0===this.interactive&&this.addInteraction()}drawFromFile(){void 0===this.colors&&(this.colors=Ar),this.initRoughObjects(),this.addScales(),this.dataSources.map(((t,e)=>{let i=this.data.map(((e,i)=>void 0===this.x?[this.xScale(i),this.yScale(e[t])]:[this.xScale(this.x[i]),this.yScale(+e[t])])).filter((t=>void 0!==t[0])),n=this.rc.curve(i,{stroke:this.colors[e],strokeWidth:this.strokeWidth,roughness:1,bowing:10});this.roughSvg.appendChild(n),!0===this.circle&&i.forEach(((t,i)=>{t=this.rc.circle(t[0],t[1],this.circleRadius,{stroke:this.colors[e],fill:this.colors[e],fillStyle:"solid",strokeWidth:1,roughness:this.circleRoughness}),this.roughSvg.appendChild(t)}))}));let t=this.dataSources.map(((t,e)=>({color:this.colors[e],text:t}))),e=6*t.reduce(((t,e)=>t>e.text.length?t:e.text.length),0)+35,i=11*t.length+8;!0===this.legend&&Fr(this,t,e,i,2),this.addAxes(),this.addLabels(),this.makeAxesRough(this.roughSvg,this.rcAxis),!0===this.interactive&&this.addInteraction()}}class Or extends wr{constructor(t){super(t),this.margin=t.margin||{top:50,right:20,bottom:10,left:20},this.colors=br(t,"colors",Ar),this.highlight=t.highlight,this.roughness=Sr({roughness:t.roughness,ceiling:30,defaultValue:0}),this.strokeWidth=br(t,"strokeWidth",.75),this.innerStrokeWidth=br(t,"innerStrokeWidth",1),this.fillWeight=br(t,"fillWeight",.5),this.labels="object"===this.dataFormat?"labels":t.labels,this.values="object"===this.dataFormat?"values":t.values,void 0===this.labels||void 0===this.values?console.log(`Error for ${this.el}: Must include labels and values when        instantiating Donut chart. Skipping chart.`):(this.legend=!1!==t.legend,this.legendPosition=br(t,"legendPosition","right"),this.initChartValues(t),this.resolveFont(),this.drawChart=this.resolveData(t.data),this.drawChart(),"undefined"!==t.title&&this.setTitle(t.title))}initChartValues(t){let e=t.height?t.height:450;this.width=(t.width?t.width:350)-this.margin.left-this.margin.right,this.height=e-this.margin.top-this.margin.bottom,this.roughId=this.el+"_svg",this.graphClass=this.el.substring(1,this.el.length),this.interactionG="g."+this.graphClass,this.radius=Math.min(this.width,this.height)/2,this.setSvg()}resolveData(t){return"string"!=typeof t?()=>{this.data=t,this.drawFromObject()}:t.includes(".csv")?()=>{hn(t).then((t=>{console.log(t),this.data=t,this.drawFromFile()}))}:t.includes(".tsv")?()=>{on(t).then((t=>{console.log(t),this.data=t,this.drawFromFile()}))}:t.includes(".json")?()=>{un(t).then((t=>{console.log(t),this.data=t,this.drawFromFile()}))}:void 0}setTitle(t){this.svg.append("text").attr("x",this.width/2).attr("y",-this.margin.top/3).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/4)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(t)}addInteraction(){Dt(this.interactionG).append("g").attr("transform",`translate(${this.width/2}, ${this.height/2})`).data("object"===this.dataFormat?this.makePie(this.data[this.values]):this.makePie(this.data)).append("path").attr("d",this.makeArc).attr("stroke-width","0px").attr("fill","transparent");let t,e=Vt(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none"),i=this;Dt(this.interactionG).on("mouseover",(function(){e.style("opacity",1),t=Vt(this).selectAll("path").style("stroke"),void 0===i.highlight?Vt(this).selectAll("path").style("opacity",.5):Vt(this).selectAll("path").style("stroke",i.highlight)})),Dt(this.interactionG).on("mouseout",(function(){e.style("opacity",0),Vt(this).selectAll("path").style("stroke",t),Vt(this).selectAll("path").style("opacity",1)})),Dt(this.interactionG).on("mousemove",(function(t,n){n=Vt(this).attr("attrX");let s=Vt(this).attr("attrY");t=Gt(t),e.html(`<b>${n}</b>: ${s}`).style("opacity",.95).attr("class",(function(t){})).style("transform",`translate(${t[0]+i.margin.left}px,\n                            ${t[1]-i.height-i.margin.bottom}px)`)}))}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId),this.rcAxis=vr(this.roughSvg,{options:{strokeWidth:3<=this.strokeWidth?3:this.strokeWidth}}),this.rc=vr(this.roughSvg,{options:{fill:this.color,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){this.initRoughObjects(),this.makePie=vs(),this.makeArc=us().innerRadius(0).outerRadius(this.radius),this.arcs=this.makePie(this.data[this.values]),this.arcs.forEach(((t,e)=>{0!==t.value&&((t=this.rc.arc(this.width/2,this.height/2,2*this.radius,2*this.radius,t.startAngle-Math.PI/2,t.endAngle-Math.PI/2,!0,{fill:this.colors[e],stroke:this.colors[e]})).setAttribute("class",this.graphClass),(t=this.roughSvg.appendChild(t)).setAttribute("attrY",this.data[this.values][e]),t.setAttribute("attrX",this.data[this.labels][e]))})),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);let t=this.data.labels.map(((t,e)=>({color:this.colors[e],text:t}))),e=6*t.reduce(((t,e)=>t>e.text.length?t:e.text.length),0)+35,i=11*t.length+8;!0===this.legend&&Fr(this,t,e,i),!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects(),this.makePie=vs().value((t=>t[this.values])).sort(null);let t=[];this.makeArc=us().innerRadius(0).outerRadius(this.radius),this.arcs=this.makePie(this.data),this.arcs.forEach(((e,i)=>{0!==e.value&&((i=this.rc.arc(this.width/2,this.height/2,2*this.radius,2*this.radius,e.startAngle-Math.PI/2,e.endAngle-Math.PI/2,!0,{fill:this.colors[i],stroke:this.colors[i]})).setAttribute("class",this.graphClass),(i=this.roughSvg.appendChild(i)).setAttribute("attrY",e.data[this.values]),i.setAttribute("attrX",e.data[this.labels])),t.push(e.data[this.labels])})),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth);let e=t.map(((t,e)=>({color:this.colors[e],text:t}))),i=6*e.reduce(((t,e)=>t>e.text.length?t:e.text.length),0)+35,n=11*e.length+8;!0===this.legend&&Fr(this,e,i,n),!0===this.interactive&&this.addInteraction()}}let Wr="pink skyblue coral gold teal grey darkgreen pink brown slateblue grey1 orange".split(" ");class jr extends wr{constructor(t){super(t),this.margin=t.margin||{top:50,right:20,bottom:50,left:100},this.colorVar=t.colorVar,this.roughness=Sr({roughness:t.roughness}),this.highlight=t.highlight,this.highlightLabel=br(t,"highlightLabel","xy"),this.radius=br(t,"radius",8),this.axisStrokeWidth=br(t,"axisStrokeWidth",.4),this.axisRoughness=br(t,"axisRoughness",.9),this.curbZero=!0===t.curbZero,this.innerStrokeWidth=br(t,"innerStrokeWidth",1),this.stroke=br(t,"stroke","black"),this.fillWeight=br(t,"fillWeight",.85),this.colors=t.colors,this.strokeWidth=br(t,"strokeWidth",1),this.axisFontSize=t.axisFontSize,this.x="object"===this.dataFormat?"x":t.x,this.y="object"===this.dataFormat?"y":t.y,this.xValueFormat=t.xValueFormat,this.yValueFormat=t.yValueFormat,this.xLabel=br(t,"xLabel",""),this.yLabel=br(t,"yLabel",""),this.labelFontSize=br(t,"labelFontSize","1rem"),this.initChartValues(t),this.resolveFont(),this.drawChart=this.resolveData(t.data),this.drawChart(),"undefined"!==t.title&&this.setTitle(t.title)}initChartValues(t){let e=t.height?t.height:400;this.width=(t.width?t.width:300)-this.margin.left-this.margin.right,this.height=e-this.margin.top-this.margin.bottom,this.roughId=this.el+"_svg",this.graphClass=this.el.substring(1,this.el.length),this.interactionG="g."+this.graphClass,this.setSvg()}resolveData(t){return"string"!=typeof t?()=>{this.data=t,this.drawFromObject()}:t.includes(".csv")?()=>{hn(t).then((t=>{console.log(t),this.data=t,this.drawFromFile()}))}:t.includes(".tsv")?()=>{on(t).then((t=>{this.data=t,this.drawFromFile()}))}:void 0}addScales(){let t="file"===this.dataFormat?s(this.data,(t=>+t[this.x])):s(this.data[this.x]),e=t[1]-t[0],i="file"===this.dataFormat?s(this.data,(t=>+t[this.y])):s(this.data[this.y]),n=i[1]-i[0],r="file"===this.dataFormat?s(this.data,(t=>t[this.colorVar])):[1,1];if("file"===this.dataFormat){let t=s(this.data,(t=>+t[this.radius])),e=Math.min(this.width,this.height)/2/2;this.radiusScale=Dn().range([8,e]).domain(t)}!0===this.curbZero&&(0<i[0]&&(i[0]=0),0<t[0]&&(t[0]=0)),this.xScale=Dn().range([0,this.width]).domain([t[0]-.05*e,t[1]+.05*e]),this.yScale=Dn().range([this.height,0]).domain([i[0]-.05*n,i[1]+.05*n]),this.colorScale=Cn().range(this.colors).domain(r)}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",this.width/2).attr("y",this.height+this.margin.bottom/1.3).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel),""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-this.margin.left/2).attr("x",-this.height/2).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){let t=x(this.xScale).tickSize(0).tickFormat((t=>this.xValueFormat?kn(this.xValueFormat)(t):t)),e=k(this.yScale).tickSize(0).tickFormat((t=>this.yValueFormat?kn(this.yValueFormat)(t):t));this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(t).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10, 0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize),this.svg.append("g").call(e).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize),Dt("path.domain").attr("stroke","transparent"),Dt("g.tick").style("opacity",1)}makeAxesRough(t,e){let i=`xAxis${this.graphClass}`,n=`yAxis${this.graphClass}`,s=`rough-${i}`,r=`rough-${n}`;Vt(`.${i}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{stroke:"black",fillStyle:"hachure"})).setAttribute("class",s),t.appendChild(i)})),Dt(`.${s}`).attr("transform",`translate(0, ${this.height})`),Vt(`.${n}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{stroke:"black",fillStyle:"hachure"})).setAttribute("class",r),t.appendChild(i)}))}setTitle(t){this.svg.append("text").attr("x",this.width/2).attr("y",-this.margin.top/2).attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(20,Math.min(this.width,this.height)/4)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(t)}addInteraction(){let t=Dt(this.interactionG).data("file"===this.dataFormat?this.data:this.data.x).append("circle").attr("cx",((t,e)=>"file"===this.dataFormat?this.xScale(+t[this.x]):this.xScale(+this.data[this.x][e]))).attr("cy",((t,e)=>"file"===this.dataFormat?this.yScale(+t[this.y]):this.yScale(+this.data[this.y][e])));"file"===this.dataFormat?t.attr("r",(t=>"number"==typeof this.radius?.7*this.radius:.6*this.radiusScale(+t[this.radius]))).attr("fill","transparent"):t.attr("r",((t,e)=>"number"==typeof this.radius?.7*this.radius:.6*this.radius[e])).attr("fill","transparent");var e=Vt(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none");let i,n=this;Dt(this.interactionG).on("mouseover",(function(){e.style("opacity",1),i=Vt(this).selectAll("path").style("stroke"),void 0===n.highlight?Vt(this).selectAll("path:nth-child(1)").style("opacity",.4):Vt(this).selectAll("path:nth-child(1)").style("stroke",n.highlight),Vt(this).selectAll("path:nth-child(2)").style("stroke-width",n.strokeWidth+1.2)})),Dt(this.interactionG).on("mouseout",(function(){e.style("opacity",0),Vt(this).selectAll("path").style("opacity",1),Vt(this).selectAll("path:nth-child(1)").style("stroke",i),Vt(this).selectAll("path:nth-child(2)").style("stroke",n.stroke),Vt(this).selectAll("path:nth-child(2)").style("stroke-width",n.strokeWidth)})),Dt(this.interactionG).on("mousemove",(function(t,i){i=Vt(this).attr("attrX");let s=Vt(this).attr("attrY"),r=Vt(this).attr("attrHighlightLabel");t=Gt(t),e.html("xy"===n.highlightLabel?`<b>x</b>: ${i} <br><b>y</b>: ${s}`:`<b>${r}</b>`).attr("class",(function(t){})).style("transform",`translate(${t[0]+n.margin.left}px,\n          ${t[1]-(n.height+n.margin.top+n.margin.bottom)}px)`)}))}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId),this.rcAxis=vr(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}}),this.rc=vr(this.roughSvg,{options:{stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}drawFromObject(){void 0===this.colors&&(this.colors=Wr[0]),this.initRoughObjects(),this.addScales(),this.addAxes(),this.makeAxesRough(this.roughSvg,this.rcAxis),this.addLabels(),this.data.x.forEach(((t,e)=>{var i=this.rc.circle(this.xScale(+t),this.yScale(+this.data[this.y][e]),"number"==typeof this.radius?this.radius:this.radius[e],{fill:"string"==typeof this.colors?this.colors:1===this.colors.length?this.colors[0]:this.colors[e],simplification:this.simplification,fillWeight:this.fillWeight});(i=this.roughSvg.appendChild(i)).setAttribute("class",this.graphClass),i.setAttribute("attrX",t),i.setAttribute("attrY",this.data[this.y][e]),i.setAttribute("attrHighlightLabel",this.data[this.highlightLabel])})),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth),!0===this.interactive&&this.addInteraction()}drawFromFile(){void 0===this.colors&&(this.colors=Wr),this.initRoughObjects(),this.addScales(),this.addAxes(),this.makeAxesRough(this.roughSvg,this.rcAxis),this.addLabels(),this.data.forEach(((t,e)=>{e=this.rc.circle(this.xScale(+t[this.x]),this.yScale(+t[this.y]),"number"==typeof this.radius?this.radius:this.radiusScale(+t[this.radius]),{fill:void 0===this.colorVar?this.colors[0]:this.colorScale(t[this.colorVar]),simplification:this.simplification,fillWeight:this.fillWeight}),(e=this.roughSvg.appendChild(e)).setAttribute("class",this.graphClass),e.setAttribute("attrX",t[this.x]),e.setAttribute("attrY",t[this.y]),e.setAttribute("attrHighlightLabel",t[this.highlightLabel])})),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth),!0===this.interactive&&this.addInteraction()}}class Pr extends wr{constructor(t){super(t),this.data=t.data,this.margin=t.margin||{top:50,right:20,bottom:70,left:100},this.colors=br(t,"colors",Ar),this.highlight=br(t,"highlight","coral"),this.roughness=Sr({roughness:t.roughness}),this.stroke=br(t,"stroke","black"),this.strokeWidth=br(t,"strokeWidth",1),this.axisStrokeWidth=br(t,"axisStrokeWidth",.5),this.axisRoughness=br(t,"axisRoughness",.5),this.innerStrokeWidth=br(t,"innerStrokeWidth",1),this.fillWeight=br(t,"fillWeight",.5),this.axisFontSize=t.axisFontSize,this.labels=t.labels,this.values=t.values,this.stackColorMapping={},this.padding=br(t,"padding",.1),this.xLabel=br(t,"xLabel",""),this.yLabel=br(t,"yLabel",""),this.labelFontSize=br(t,"labelFontSize","1rem"),this.initChartValues(t),this.resolveFont(),this.drawChart=this.resolveData(t.data),this.drawChart(),"undefined"!==t.title&&this.setTitle(t.title)}initChartValues(t){let e=t.height?t.height:450;this.width=(t.width?t.width:350)-this.margin.left-this.margin.right,this.height=e-this.margin.top-this.margin.bottom,this.roughId=this.el+"_svg",this.graphClass=this.el.substring(1,this.el.length),this.interactionG="g."+this.graphClass,this.setSvg()}getTotal(t){for(let e=0;e<t.length;e++){let i=0;for(let n=0;n<t.columns.length;++n)t.columns[n]!==this.labels&&(i+=t[e][t.columns[n]]=+t[e][t.columns[n]]);t[e].total=i}return t}updateColorMapping(t){this.stackColorMapping[t]||(this.stackColorMapping[t]=Ar[Object.keys(this.stackColorMapping).length])}resolveData(t){return"string"!=typeof t?()=>{this.data=t;for(let e=0;e<t.length;++e){let i=0;Object.keys(t[e]).forEach((n=>{n!==this.labels&&(this.updateColorMapping(n),i+=t[e][n],t[e].total=i)}))}this.drawFromObject()}:t.includes(".csv")?()=>{hn(t).then((t=>{this.getTotal(t),this.data=t,this.drawFromFile()}))}:t.includes(".tsv")?()=>{on(t).then((t=>{this.getTotal(t),this.data=t,this.drawFromFile()}))}:void 0}addScales(){this.xScale=zn().rangeRound([0,this.width]).padding(this.padding).domain(this.data.map((t=>t[this.labels]))),this.data.sort((function(t,e){return e.total-t.total})),this.yScale=Dn().rangeRound([this.height,0]).domain([0,l(this.data,(t=>t.total))]).nice();let t="object"===this.dataFormat?this.data.map((t=>t[this.labels])):this.data.columns;this.zScale=Cn().range("#98abc5 #8a89a6 #7b6888 #6b486b #a05d56 #d0743c #ff8c00".split(" ")).domain(t)}addLabels(){""!==this.xLabel&&this.svg.append("text").attr("x",this.width/2).attr("y",this.height+this.margin.bottom/2).attr("dx","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.xLabel),""!==this.yLabel&&this.svg.append("text").attr("transform","rotate(-90)").attr("y",-this.margin.left/1.4).attr("x",-this.height/2).attr("dy","1em").attr("class","labelText").style("text-anchor","middle").style("font-family",this.fontFamily).style("font-size",this.labelFontSize).text(this.yLabel)}addAxes(){var t=x(this.xScale).tickSize(0);this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(t).attr("class",`xAxis${this.graphClass}`).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.8,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.9),t=k(this.yScale).tickSize(0),this.svg.append("g").call(t).attr("class",`yAxis${this.graphClass}`).selectAll("text").style("font-family",this.fontFamily).style("font-size",void 0===this.axisFontSize?`${Math.min(.95,Math.min(this.width,this.height)/140)}rem`:this.axisFontSize).style("opacity",.9),Dt("path.domain").attr("stroke","transparent")}makeAxesRough(t,e){let i=`xAxis${this.graphClass}`,n=`yAxis${this.graphClass}`,s=`rough-${i}`,r=`rough-${n}`;Vt(`.${i}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{fillStyle:"hachure"})).setAttribute("class",s),t.appendChild(i)})),Dt(`.${s}`).attr("transform",`translate(0, ${this.height})`),Vt(`.${n}`).selectAll("path.domain").each((function(i,n){i=Vt(this).node().getAttribute("d"),(i=e.path(i,{fillStyle:"hachure"})).setAttribute("class",r),t.appendChild(i)}))}setTitle(t){this.svg.append("text").attr("x",this.width/2).attr("y",-this.margin.top/2).attr("class","title").attr("text-anchor","middle").style("font-size",void 0===this.titleFontSize?`${Math.min(40,Math.min(this.width,this.height)/5)}px`:this.titleFontSize).style("font-family",this.fontFamily).style("opacity",.8).text(t)}addInteraction(){Dt(this.interactionG).each((function(t,e){t=this.attributes,Vt(this).append("rect").attr("x",t.x.value).attr("y",t.y.value).attr("width",t.width.value).attr("height",t.height.value).attr("fill","transparent")}));let t,e=Vt(this.el).append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","3px").style("font-family",this.fontFamily).style("font-size",this.tooltipFontSize).style("pointer-events","none"),i=this;Dt(this.interactionG).on("mouseover",(function(){e.style("opacity",1),t=Vt(this).selectAll("path").style("stroke"),Vt(this).select("path").style("stroke",i.highlight),Vt(this).selectAll("path:nth-child(2)").style("stroke-width",i.strokeWidth+1.2)})),Dt(this.interactionG).on("mouseout",(function(){e.style("opacity",0),Vt(this).select("path").style("stroke",t),Vt(this).selectAll("path:nth-child(2)").style("stroke-width",i.strokeWidth)})),Dt(this.interactionG).on("mousemove",(function(t,n){n=Vt(this).attr("attrX");const s=Vt(this).attr("attrY"),r=Vt(this).attr("keyY");t=Gt(t),e.html(`<h4>${n}</h4> <b>${r}</b>: ${s}`).style("opacity",.95).attr("class",(function(t){})).style("transform",`translate(${t[0]+i.margin.left}px,\n          ${t[1]-(i.height+i.margin.top+i.margin.bottom)}px)`)}))}initRoughObjects(){this.roughSvg=document.getElementById(this.roughId),this.rcAxis=vr(this.roughSvg,{options:{strokeWidth:this.axisStrokeWidth,roughness:this.axisRoughness}}),this.rc=vr(this.roughSvg,{options:{stroke:"none"===this.stroke?void 0:this.stroke,strokeWidth:this.innerStrokeWidth,roughness:this.roughness,bowing:this.bowing,fillStyle:this.fillStyle}})}stacking(){this.data.forEach((t=>{let e=0;Object.keys(t).forEach(((i,n)=>{if(0<n&&"total"!==i){e+=parseInt(t[i],10);let s=this.xScale(t[this.labels]),r=this.yScale(e),a=this.xScale.bandwidth(),h=this.height-this.yScale(+t[i]);n=this.rc.rectangle(s,r,a,h,{fill:this.stackColorMapping[i]||this.colors[n],stroke:this.stackColorMapping[i]||this.colors[n],simplification:this.simplification,fillWeight:this.fillWeight}),(n=this.roughSvg.appendChild(n)).setAttribute("class",this.graphClass),n.setAttribute("attrX",t[this.labels]),n.setAttribute("keyY",i),n.setAttribute("attrY",+t[i]),n.setAttribute("x",s),n.setAttribute("y",r),n.setAttribute("width",a),n.setAttribute("height",h)}}))}))}drawFromObject(){this.initRoughObjects(),this.addScales(),this.addAxes(),this.makeAxesRough(this.roughSvg,this.rcAxis),this.addLabels(),this.stacking(),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth),!0===this.interactive&&this.addInteraction()}drawFromFile(){this.initRoughObjects(),this.addScales(),this.addAxes(),this.makeAxesRough(this.roughSvg,this.rcAxis),this.addLabels(),this.stacking(),Dt(this.interactionG).selectAll("path:nth-child(2)").style("stroke-width",this.strokeWidth),!0===this.interactive&&this.addInteraction()}}let $r="coral skyblue #66c2a5 tan #8da0cb #e78ac3 #a6d854 #ffd92f tan orange".split(" "),Lr={axisFontSize:{type:String,default:"1rem"},axisRoughness:{type:Number,default:.5},axisStrokeWidth:{type:Number,default:.5},xLabel:String,yLabel:String},Er={legend:{type:Boolean,default:!0},legendPosition:{type:String,default:"right"}},Rr={chartData:{type:[Object,String],required:!0},title:String,titleFontSize:{type:String,default:"1rem"},tooltipFontSize:{type:String,default:"0.95rem"},font:{type:[String,Number],default:"gaegu"},fillStyle:{type:String,default:"hachure"},fillWeight:Number,roughness:{type:Number,default:1},bowing:{type:Number,default:0},simplification:{type:Number,default:.2},interactive:{type:Boolean,default:!0},width:Number,height:Number,margin:{type:Object},strokeWidth:{type:Number,default:1}},Nr=Object.assign(Object.assign({},Lr),{labels:String,values:String,highlight:{type:String,default:"coral"},innerStrokeWidth:{type:Number,default:1},labelFontSize:{type:String,default:"1rem"},padding:{type:Number,default:.1},stroke:{type:String,default:"black"}}),Ir=Object.assign(Object.assign({},Er),{labels:String,values:String,colors:{type:Array,default:$r},highlight:{type:String,default:"coral"},innerStrokeWidth:{type:Number,default:.75},padding:{type:Number,default:.1}}),Tr=Object.assign(Object.assign({},Lr),{colors:{type:[Array,String],default:$r},labelFontSize:{type:String,default:"1rem"},stroke:{type:String,default:"black"}}),Vr=Object.assign(Object.assign(Object.assign({},Rr),Nr),{color:{type:String,default:"skyblue"}}),Gr=Object.assign(Object.assign(Object.assign({},Rr),Nr),{colors:Array,chartData:{type:Array,required:!0},labels:{type:String,required:!0}}),Dr=Object.assign(Object.assign({},Rr),Ir),qr=Object.assign(Object.assign(Object.assign(Object.assign({},Rr),Tr),Er),{chartData:{type:String,required:!0},y:String,circle:{type:Boolean,default:!0},circleRadius:{type:Number,default:10},circleRoughness:{type:Number,default:2}}),Br=Object.assign(Object.assign(Object.assign({},Rr),Tr),{x:String,y:String,colorVar:String,curbZero:{type:Boolean,default:!1},highlight:{type:String,default:"coral"},highlightLabel:String,innerStrokeWidth:{type:Number,default:1},radius:{type:[Number,Array]}});for(var Xr,Yr=256,Hr=[];Yr--;)Hr[Yr]=(Yr+256).toString(16).substring(1);let Zr=(e,i)=>{const n=t.ref(null),s="chartdiv"+function(t){var e=0;if(t=t||11,!Xr||Yr+t>512)for(Xr="",Yr=0;e<256;e++)Xr+=Hr[256*Math.random()|0];return Xr.substring(Yr,Yr+++t)}();return t.onMounted((()=>{const r=n.value;r.id=s,t.watchEffect((()=>{const{chartData:t}=i,n=function(t,e){var i,n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)0>e.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n}(i,["chartData"]);r.innerHTML="",new e(Object.assign({element:`#${r.id}`},Object.assign({data:t},n)))}))})),n};var Ur=t.defineComponent({props:Object.assign({},Vr),setup:t=>({chartdiv:Zr(_r,t)})});let Qr={ref:"chartdiv"};Ur.render=function(e,i,n,s,r,a){return t.openBlock(),t.createBlock("div",Qr,null,512)},Ur.__file="src/components/Bar.vue";var Kr=t.defineComponent({props:Object.assign({},Dr),setup:t=>({chartdiv:Zr(Cr,t)})});let Jr={ref:"chartdiv"};Kr.render=function(e,i,n,s,r,a){return t.openBlock(),t.createBlock("div",Jr,null,512)},Kr.__file="src/components/Donut.vue";var ta=t.defineComponent({props:Object.assign({},Vr),setup:t=>({chartdiv:Zr(Mr,t)})});let ea={ref:"chartdiv"};ta.render=function(e,i,n,s,r,a){return t.openBlock(),t.createBlock("div",ea,null,512)},ta.__file="src/components/BarH.vue";var ia=t.defineComponent({props:Object.assign({},qr),setup(e,i){let n=t.computed((()=>{const t=i.attrs,n={};return Object.keys(t).forEach((e=>{const i=t[e];/^y\d+$/.test(e)&&"string"==typeof i&&(n[e]=i)})),Object.assign(Object.assign({},e),n)}));return{chartdiv:Zr(zr,n.value)}}});let na={ref:"chartdiv"};ia.render=function(e,i,n,s,r,a){return t.openBlock(),t.createBlock("div",na,null,512)},ia.__file="src/components/Line.vue";var sa=t.defineComponent({props:Object.assign({},Dr),setup:t=>({chartdiv:Zr(Or,t)})});let ra={ref:"chartdiv"};sa.render=function(e,i,n,s,r,a){return t.openBlock(),t.createBlock("div",ra,null,512)},sa.__file="src/components/Pie.vue";var aa=t.defineComponent({props:Object.assign({},Br),setup:t=>({chartdiv:Zr(jr,t)})});let ha={ref:"chartdiv"};aa.render=function(e,i,n,s,r,a){return t.openBlock(),t.createBlock("div",ha,null,512)},aa.__file="src/components/Scatter.vue";var oa=t.defineComponent({props:Object.assign({},Gr),setup:t=>({chartdiv:Zr(Pr,t)})});let la={ref:"chartdiv"};oa.render=function(e,i,n,s,r,a){return t.openBlock(),t.createBlock("div",la,null,512)},oa.__file="src/components/StackedBar.vue",exports.Bar=Ur,exports.BarH=ta,exports.Donut=Kr,exports.Line=ia,exports.Pie=sa,exports.Scatter=aa,exports.StackedBar=oa;
